{"version":3,"sources":["api/store.js","components/shop/ShopPageSearch.jsx"],"names":["storeApi","getNewProducts","options","arguments","length","undefined","filters","keyword","token","params","limit","page","sort","locationName","filter_province","locationId","filter_locationId","categoryId","filter_categoryId","longitude","latitude","Object","keys","forEach","slug","fetch","qs","stringify","headers","Authorization","then","res","json","getStores","getStore","addReviewStore","req","method","body","JSON","searchStore","uploadExcel","file","mall_id","formdata","FormData","append","parseQueryOptions","location","query","queryString","parse","optionValues","parseFloat","parseQueryKeyword","parseQueryFilters","filterValues","param","mr","match","filterSlug","initialState","init","categoryIsLoading","category","productsListIsLoading","productsList","reducer","state","action","type","option","value","filter","Error","window","search","ShopPageSearch","props","_state$productsList","_state$productsList2","columns","viewMode","sidebarPosition","customer","offcanvas","dispatch","useReducer","useEffect","latidude","x","encode","buildQuery","pathname","history","replaceState","canceled","push","result","_result$data","console","log","apiData","data","items","sorts","transformedData","pages","name","isSelected","catch","error","React","createElement","BlockLoader","content","productsView","ProductsView","isLoading","layout","grid","sidebarComponent","CategorySidebar","CategorySidebarItem","WidgetFilters","title","map","item","selected","values","className","sidebar","categoryFiltered","style","background","Helmet","theme","defaultProps","connect","sidebarState","mapDispatchToProps","sidebarClose"],"mappings":"uHAAA,oBACA,MAAMA,EAAW,CACbC,eAAgB,WAAiD,IAAhDC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAIG,EAAOH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAII,EAAOJ,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAAEG,EAAKL,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACvD,MAAMI,EAAS,CACXC,MAAOR,EAAQQ,OAAS,GACxBC,KAAMT,EAAQS,MAAQ,GAmC1B,OA/BIJ,IACAE,EAAOF,QAAUA,GAIjBL,EAAQU,OACRH,EAAOG,KAAOV,EAAQU,MAItBV,EAAQW,eACRJ,EAAOK,gBAAkBZ,EAAQW,cAEjCX,EAAQa,aACRN,EAAOO,kBAAoBd,EAAQa,YAEnCb,EAAQe,aACRR,EAAOS,kBAAoBhB,EAAQe,YAEnCf,EAAQiB,YACRV,EAAOU,UAAYjB,EAAQiB,WAE3BjB,EAAQkB,WACRX,EAAOW,SAAWlB,EAAQkB,UAI9BC,OAAOC,KAAKhB,GAASiB,QAASC,IAC1Bf,EAAO,UAAUe,GAAUlB,EAAQkB,KAGhCC,MAAM,iEAAiEC,IAAGC,UAAUlB,GAAW,CAClGmB,QAAS,CACL,eAAgB,mBAChBC,cAAerB,GAAS,MAE7BsB,KAAMC,GAAQA,EAAIC,SAEzBC,UAAW,WAAiD,IAAhD/B,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAIG,EAAOH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAAII,EAAOJ,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAAEG,EAAKL,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAClD,MAAMI,EAAS,IAAKP,EAASK,WAK7B,OAHAc,OAAOC,KAAKhB,GAASiB,QAASC,IAC1Bf,EAAO,UAAUe,GAAUlB,EAAQkB,KAEhCC,MAAM,iDAA2CC,IAAGC,UAAUlB,GAAW,CAC5EmB,QAAS,CACL,eAAgB,mBAChBC,cAAerB,GAAS,MAE7BsB,KAAMC,GAAQA,EAAIC,SAEzBE,SAAWV,IACP,MAAMf,EAAS,CAAEe,QACjB,OAAOC,MAAM,iDAA2CC,IAAGC,UAAUlB,IAAWqB,KAAMC,GAAQA,EAAIC,SAGtGG,eAAgBA,CAACC,EAAK5B,IACXiB,MAAM,uDAAkD,CAC3DY,OAAQ,OACRT,QAAS,CAAE,eAAgB,mBAAoBC,cAAerB,GAC9D8B,KAAMC,KAAKZ,UAAUS,KACtBN,KAAMC,GAAQA,EAAIC,QAEzBQ,YAAcjC,GACHkB,MAAM,kFAAkFlB,EAAW,CACtG8B,OAAQ,MACRT,QAAS,CAAE,eAAgB,sBAC5BE,KAAMC,GAAQA,EAAIC,QAEzBS,YAAaA,CAACC,EAAMC,KAChB,MAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,OAAQJ,GACxBE,EAASE,OAAO,UAAWH,GACpBlB,MAAM,6DAA8D,CACvEY,OAAQ,OACRC,KAAMM,IACPd,KAAMC,GAAQA,EAAIC,UAIdhC,O,iCCzFf,0IAsBA,SAAS+C,EAAkBC,GACvB,MAAMC,EAAQC,IAAYC,MAAMH,GAE1BI,EAAe,CACjBzC,KAAM,EACND,MAAO,IA6BX,MA1B0B,kBAAfuC,EAAMtC,OACbyC,EAAazC,KAAO0C,WAAWJ,EAAMtC,OAEd,kBAAhBsC,EAAMvC,QACb0C,EAAa1C,MAAQ2C,WAAWJ,EAAMvC,QAEhB,kBAAfuC,EAAMrC,OACbwC,EAAaxC,KAAOqC,EAAMrC,MAGE,kBAArBqC,EAAMhC,aACbmC,EAAanC,WAAagC,EAAMhC,YAEJ,kBAArBgC,EAAMlC,aACbqC,EAAarC,WAAakC,EAAMlC,YAEF,kBAAvBkC,EAAMpC,eACbuC,EAAavC,aAAeoC,EAAMpC,cAEP,kBAApBoC,EAAM9B,YACbiC,EAAajC,UAAY8B,EAAM9B,WAEL,kBAAnB8B,EAAM7B,WACbgC,EAAahC,SAAW6B,EAAM7B,UAG3BgC,EAEX,SAASE,EAAkBN,GACvB,MAAMC,EAAQC,IAAYC,MAAMH,GAEhC,IAAIzC,OAAUF,EAMd,MAJ4B,iBAAjB4C,EAAM1C,UACbA,EAAU0C,EAAM1C,SAGbA,EAGX,SAASgD,EAAkBP,GACvB,MAAMC,EAAQC,IAAYC,MAAMH,GAC1BQ,EAAe,GAcrB,OAZAnC,OAAOC,KAAK2B,GAAO1B,QAASkC,IACxB,MAAMC,EAAKD,EAAME,MAAM,6BAEvB,IAAKD,EACD,OAGJ,MAAME,EAAaF,EAAG,GAEtBF,EAAaI,GAAcX,EAAMQ,KAG9BD,EAmDX,MAAMK,EAAe,CACjBC,MAAM,EAINC,mBAAmB,EAInBC,SAAU,KAIVC,uBAAuB,EAIvBC,aAAc,KAQdhE,QAAS,GAMTI,QAAS,GACTC,QAAS,MAIb,SAAS4D,EAAQC,EAAOC,GACpB,OAAQA,EAAOC,MACX,IAAK,yBACD,MAAO,IACAF,EACHN,MAAM,EACNC,mBAAmB,EACnBC,SAAUK,EAAOL,UAEzB,IAAK,sBACD,MAAO,IAAKI,EAAOH,uBAAuB,GAC9C,IAAK,8BACD,MAAO,IAAKG,EAAOH,uBAAuB,EAAOC,aAAcG,EAAOH,cAC1E,IAAK,mBACD,MAAO,IACAE,EACHlE,QAAS,IAAKkE,EAAMlE,QAASS,KAAM,EAAG,CAAC0D,EAAOE,QAASF,EAAOG,QAEtE,IAAK,mBACD,MAAO,IACAJ,EACHlE,QAAS,IAAKkE,EAAMlE,QAASS,KAAM,GACnCL,QAAS,IAAK8D,EAAM9D,QAAS,CAAC+D,EAAOI,QAASJ,EAAOG,QAE7D,IAAK,gBACD,MAAO,IACAJ,EACHlE,QAAS,IAAKkE,EAAMlE,QAASS,KAAM,EAAGE,aAAc,GAAIE,WAAY,GAAIE,WAAY,IACpFX,QAAS,IAEjB,IAAK,QACD,OAAO8D,EAAMN,KAAOD,EAAeO,EACvC,QACI,MAAM,IAAIM,OAItB,SAASZ,EAAKM,GACV,MAAOlE,EAASI,EAASC,GAzHlB,CAACwC,EADQC,EA0H+B2B,OAAO3B,SAAS4B,QAzH1BrB,EAAkBP,GAAWM,EAAkBN,IADxF,IAAoBA,EA4HhB,MAAO,IAAKoB,EAAOlE,UAASI,UAASC,WAGzC,SAASsE,EAAeC,GAAQ,IAADC,EAAAC,EAC3B,MAAM,QAAEC,EAAO,SAAEC,EAAQ,gBAAEC,EAAe,SAAEC,GAAaN,EACnDO,EAAwB,IAAZJ,EAAgB,SAAW,UACtCb,EAAOkB,GAAYC,qBAAWpB,EAASN,EAAcC,GAsF5D,GAnFA0B,oBAAU,KACN,MAAMvC,EAlId,SAAoB/C,EAASI,EAASC,GAClC,MAAME,EAAS,GAwCf,OAtCqB,IAAjBP,EAAQS,OACRF,EAAOE,KAAOT,EAAQS,MAGJ,KAAlBT,EAAQQ,QACRD,EAAOC,MAAQR,EAAQQ,OAGN,YAAjBR,EAAQU,OACRH,EAAOG,KAAOV,EAAQU,MAGA,KAAtBV,EAAQiB,YACRV,EAAOU,UAAYjB,EAAQiB,WAEN,KAArBjB,EAAQuF,WACRhF,EAAOgF,SAAWvF,EAAQuF,UAED,KAAzBvF,EAAQW,eACRJ,EAAOI,aAAeX,EAAQW,cAEP,KAAvBX,EAAQa,aACRN,EAAOM,WAAab,EAAQa,YAEL,KAAvBb,EAAQe,aACRR,EAAOQ,WAAaf,EAAQe,YAGhB,KAAZV,QAA8BF,IAAZE,GAAqC,OAAZA,IAC3CE,EAAOF,QAAUA,GAGrBc,OAAOC,KAAKhB,GACPmE,OAAQiB,KAAQpF,EAAQoF,IACxBnE,QAASqC,IACNnD,EAAO,UAAUmD,GAAgBtD,EAAQsD,KAG1CV,IAAYvB,UAAUlB,EAAQ,CAAEkF,QAAQ,IAyF7BC,CAAWxB,EAAMlE,QAASkE,EAAM9D,QAAS8D,EAAM7D,SAEvDyC,EAAW,GAAG2B,OAAO3B,SAAS6C,WAAW5C,EAAQ,IAAM,KAAKA,IAClE0B,OAAOmB,QAAQC,aAAa,KAAM,GAAI/C,IACvC,CAACoB,EAAMlE,QAASkE,EAAM9D,QAAS8D,EAAM7D,UAGxCiF,oBAAU,KACN,IAAIQ,GAAW,EAoEf,OAlEAV,EAAS,CAAEhB,KAAM,wBACK,KAAlBF,EAAM7D,cAAoCF,IAAlB+D,EAAM7D,SAC9BuE,EAAMgB,QAAQG,KAAK,KAGvBjG,IACKC,eAAemE,EAAMlE,QAAS,IAAKkE,EAAM9D,SAAW8D,EAAM7D,QAAS6E,EAAS5E,OAC5EsB,KAAMoE,IAAY,IAADC,EACd,GAAIH,EACA,OAGJI,QAAQC,IAAI,+BAAgCH,GAG5C,MAAMI,GAAqB,QAAXH,EAAAD,EAAOK,YAAI,IAAAJ,OAAA,EAAXA,EAAaI,OAAQL,EAAOK,MAAQL,EACpDE,QAAQC,IAAI,4BAA6BC,GACzCF,QAAQC,IAAI,kCAA0C,OAAPC,QAAO,IAAPA,OAAO,EAAPA,EAASE,OACxDJ,QAAQC,IAAI,oCAA4C,OAAPC,QAAO,IAAPA,OAAO,EAAPA,EAAShG,SAC1D8F,QAAQC,IAAI,kCAA0C,OAAPC,QAAO,IAAPA,OAAO,EAAPA,EAASG,OAGxD,MAAMC,EAAkB,IACjBJ,EACH3F,KAAMyD,EAAMlE,QAAQS,MAAQ,EAG5BgG,MACIL,EAAQE,OAASF,EAAQE,MAAMpG,QAAUkG,EAAQ5F,OAAS,IACpD0D,EAAMlE,QAAQS,MAAQ,GACrByD,EAAMlE,QAAQS,MAAQ,GAAK,EAEtC8F,MAAOH,EAAQG,OAAS,CACpB,CAAEjF,KAAM,YAAaoF,KAAM,gBAAiBC,YAAY,GACxD,CAAErF,KAAM,WAAYoF,KAAM,aAAcC,YAAY,GACpD,CAAErF,KAAM,YAAaoF,KAAM,aAAcC,YAAY,GACrD,CAAErF,KAAM,YAAaoF,KAAM,iBAAkBC,YAAY,GACzD,CAAErF,KAAM,aAAcoF,KAAM,kBAAmBC,YAAY,IAG/DvG,QAASgG,EAAQhG,SAAW,IAGhC8F,QAAQC,IAAI,oCAAqCK,GACjDN,QAAQC,IAAI,4CAA6CK,EAAgBpG,SAEzEgF,EAAS,CAAEhB,KAAM,8BAA+BJ,aAAcwC,MAEjEI,MAAOC,IACJX,QAAQW,MAAM,oBAAqBA,GAC/Bf,GAGJV,EAAS,CACLhB,KAAM,8BACNJ,aAAc,CACVsC,MAAO,GACP7F,KAAM,EACNgG,MAAO,EACPjG,MAAO,GACP+F,MAAO,GACPnG,QAAS,QAKlB,KACH0F,GAAW,IAGhB,CAACV,EAAUlB,EAAM7D,QAAS6D,EAAMlE,QAASkE,EAAM9D,QAASwE,EAAMgB,UAE7D1B,EAAMH,wBAA0BG,EAAMF,aACtC,OAAO8C,IAAAC,cAACC,UAAW,MAGvB,IAAIC,EAEJ,MAAMC,EACFJ,IAAAC,cAACI,IAAY,CACTC,UAAWlD,EAAMH,sBACjBC,aAAcE,EAAMF,cAAgB,CAAEsC,MAAO,GAAIC,MAAO,GAAInG,QAAS,IACrEmG,OAAyB,QAAlB1B,EAAAX,EAAMF,oBAAY,IAAAa,OAAA,EAAlBA,EAAoB0B,QAAS,GACpCvG,QAASkE,EAAMlE,QACfI,QAAS8D,EAAM9D,QACfgF,SAAUA,EACViC,OAAQrC,EACRsC,KAAM,QAAQvC,KAAWA,EAAU,EAAI,OAAS,YAChDI,UAAWA,EACX9E,QAAS6D,EAAM7D,UAIjBkH,EACFT,IAAAC,cAACS,IAAe,CAACrC,UAAWA,GACxB2B,IAAAC,cAACU,IAAmB,KAChBX,IAAAC,cAACW,IAAa,CACVC,MAAM,SACNxC,UAAWA,EACX/E,UAA4B,QAAlB0E,EAAAZ,EAAMF,oBAAY,IAAAc,OAAA,EAAlBA,EAAoB1E,UAAW,IAAIwH,IAAKC,GAChC,aAAdA,EAAKzD,KAAsB,IAAKyD,EAAMC,SAAU5D,EAAMlE,QAAQe,YAAe,IAAK8G,IAEtFE,OAAQ,IAAK7D,EAAM9D,WAAY8D,EAAMlE,SACrCoF,SAAUA,MAM1B,GAAIL,EAAU,EACVkC,EACIH,IAAAC,cAAA,OAAKiB,UAAU,kBACXlB,IAAAC,cAAA,OAAKiB,UAAU,SAASd,GACvBK,OAGN,CACH,MAAMU,EAAUnB,IAAAC,cAAA,OAAKiB,UAAU,wBAAwBT,GAEvDN,EACIH,IAAAC,cAAA,OAAKiB,UAAU,kBACV9D,EAAMF,aAAakE,kBAChBpB,IAAAC,cAAA,OAAKiB,UAAU,2BACXlB,IAAAC,cAAA,UAAK7C,EAAMF,aAAakE,mBAGhCpB,IAAAC,cAAA,OAAKiB,UAAW,qCAAqC/C,GAC5B,UAApBA,GAA+BgD,EAChCnB,IAAAC,cAAA,OAAKiB,UAAU,wBACXlB,IAAAC,cAAA,OAAKiB,UAAU,SAASd,IAEP,QAApBjC,GAA6BgD,IAM9C,OACInB,IAAAC,cAAA,OAAKoB,MAAO,CAAEC,WAAY,oBAAsBJ,UAAU,QACtDlB,IAAAC,cAACsB,IAAM,KACHvB,IAAAC,cAAA,aAAQuB,IAAM5B,OAGjBO,GA2BbtC,EAAe4D,aAAe,CAC1BxD,QAAS,EACTC,SAAU,OACVC,gBAAiB,SAaNuD,sBAVUtE,IAAK,CAC1BuE,aAAcvE,EAAM+D,QACpBxH,KAAMyD,EAAMJ,SACZoB,SAAUhB,EAAMgB,WAGOwD,KAAA,CACvBC,mBAGWH,CAA6C7D","file":"static/js/28.fd413a6d.chunk.js","sourcesContent":["import qs from \"query-string\";\nconst storeApi = {\n    getNewProducts: (options = {}, filters = {}, keyword, token) => {\n        const params = {\n            limit: options.limit || 10,\n            page: options.page || 1,\n        };\n\n        // Add keyword to params if provided\n        if (keyword) {\n            params.keyword = keyword;\n        }\n\n        // Add sort option if provided\n        if (options.sort) {\n            params.sort = options.sort;\n        }\n\n        // Add location filters if provided\n        if (options.locationName) {\n            params.filter_province = options.locationName;\n        }\n        if (options.locationId) {\n            params.filter_locationId = options.locationId;\n        }\n        if (options.categoryId) {\n            params.filter_categoryId = options.categoryId;\n        }\n        if (options.longitude) {\n            params.longitude = options.longitude;\n        }\n        if (options.latitude) {\n            params.latitude = options.latitude;\n        }\n\n        // Add filters to params\n        Object.keys(filters).forEach((slug) => {\n            params[`filter_${slug}`] = filters[slug];\n        });\n\n        return fetch(`https://siplah.eurekabookhouse.co.id/api/product/shortProduct?${qs.stringify(params)}`, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: token || \"\",\n            },\n        }).then((res) => res.json());\n    },\n    getStores: (options = {}, filters = {}, keyword, token) => {\n        const params = { ...options, keyword };\n\n        Object.keys(filters).forEach((slug) => {\n            params[`filter_${slug}`] = filters[slug];\n        });\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall?${qs.stringify(params)}`, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: token || \"\",\n            },\n        }).then((res) => res.json());\n    },\n    getStore: (slug) => {\n        const params = { slug };\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall?${qs.stringify(params)}`).then((res) => res.json());\n    },\n\n    addReviewStore: (req, token) => {\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall/review`, {\n            method: \"post\",\n            headers: { \"Content-Type\": \"application/json\", Authorization: token },\n            body: JSON.stringify(req),\n        }).then((res) => res.json());\n    },\n    searchStore: (keyword) => {\n        return fetch(`https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword=${keyword}`, {\n            method: \"get\",\n            headers: { \"Content-Type\": \"application/json\" },\n        }).then((res) => res.json());\n    },\n    uploadExcel: (file, mall_id) => {\n        const formdata = new FormData();\n        formdata.append(\"file\", file);\n        formdata.append(\"mall_id\", mall_id);\n        return fetch(`https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV`, {\n            method: \"POST\",\n            body: formdata,\n        }).then((res) => res.json());\n    },\n};\n\nexport default storeApi;\n","// react\nimport React, { useEffect, useReducer } from \"react\";\n\n// third-party\nimport PropTypes from \"prop-types\";\nimport queryString from \"query-string\";\nimport { connect } from \"react-redux\";\nimport { Helmet } from \"react-helmet-async\";\n\n// application\nimport BlockLoader from \"../blocks/BlockLoader\";\nimport CategorySidebar from \"./CategorySidebar\";\nimport CategorySidebarItem from \"./CategorySidebarItem\";\nimport ProductsView from \"./ProductsView\";\nimport shopApi from \"../../api/shop\";\nimport storeApi from \"../../api/store\";\nimport WidgetFilters from \"../widgets/WidgetFilters\";\nimport { sidebarClose } from \"../../store/sidebar\";\n\n// data stubs\nimport theme from \"../../data/theme\";\n\nfunction parseQueryOptions(location) {\n    const query = queryString.parse(location);\n\n    const optionValues = {\n        page: 1,\n        limit: 24,\n    };\n\n    if (typeof query.page === \"string\") {\n        optionValues.page = parseFloat(query.page);\n    }\n    if (typeof query.limit === \"string\") {\n        optionValues.limit = parseFloat(query.limit);\n    }\n    if (typeof query.sort === \"string\") {\n        optionValues.sort = query.sort;\n    }\n\n    if (typeof query.categoryId === \"string\") {\n        optionValues.categoryId = query.categoryId;\n    }\n    if (typeof query.locationId === \"string\") {\n        optionValues.locationId = query.locationId;\n    }\n    if (typeof query.locationName === \"string\") {\n        optionValues.locationName = query.locationName;\n    }\n    if (typeof query.longitude === \"string\") {\n        optionValues.longitude = query.longitude;\n    }\n    if (typeof query.latitude === \"string\") {\n        optionValues.latitude = query.latitude;\n    }\n\n    return optionValues;\n}\nfunction parseQueryKeyword(location) {\n    const query = queryString.parse(location);\n\n    let keyword = undefined;\n\n    if (typeof query.keyword == \"string\") {\n        keyword = query.keyword;\n    }\n\n    return keyword;\n}\n\nfunction parseQueryFilters(location) {\n    const query = queryString.parse(location);\n    const filterValues = {};\n\n    Object.keys(query).forEach((param) => {\n        const mr = param.match(/^filter_([-_A-Za-z0-9]+)$/);\n\n        if (!mr) {\n            return;\n        }\n\n        const filterSlug = mr[1];\n\n        filterValues[filterSlug] = query[param];\n    });\n\n    return filterValues;\n}\n\nfunction parseQuery(location) {\n    return [parseQueryOptions(location), parseQueryFilters(location), parseQueryKeyword(location)];\n}\n\nfunction buildQuery(options, filters, keyword) {\n    const params = {};\n\n    if (options.page !== 1) {\n        params.page = options.page;\n    }\n\n    if (options.limit !== 24) {\n        params.limit = options.limit;\n    }\n\n    if (options.sort !== \"default\") {\n        params.sort = options.sort;\n    }\n\n    if (options.longitude !== \"\") {\n        params.longitude = options.longitude;\n    }\n    if (options.latidude !== \"\") {\n        params.latidude = options.latidude;\n    }\n    if (options.locationName !== \"\") {\n        params.locationName = options.locationName;\n    }\n    if (options.locationId !== \"\") {\n        params.locationId = options.locationId;\n    }\n    if (options.categoryId !== \"\") {\n        params.categoryId = options.categoryId;\n    }\n\n    if (keyword !== \"\" && keyword !== undefined && keyword !== null) {\n        params.keyword = keyword;\n    }\n\n    Object.keys(filters)\n        .filter((x) => !!filters[x])\n        .forEach((filterSlug) => {\n            params[`filter_${filterSlug}`] = filters[filterSlug];\n        });\n\n    return queryString.stringify(params, { encode: false });\n}\n\nconst initialState = {\n    init: false,\n    /**\n     * Indicates that the category is loading.\n     */\n    categoryIsLoading: true,\n    /**\n     * Category object.\n     */\n    category: null,\n    /**\n     * Indicates that the products list is loading.\n     */\n    productsListIsLoading: true,\n    /**\n     * Products list.\n     */\n    productsList: null,\n    /**\n     * Products list options.\n     *\n     * options.page:  number - Current page.\n     * options.limit: number - Items per page.\n     * options.sort:  string - Sort algorithm.\n     */\n    options: {},\n    /**\n     * Products list filters.\n     *\n     * filters[FILTER_SLUG]: string - filter value.\n     */\n    filters: {},\n    keyword: null,\n    // categoryId: \"\",\n};\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case \"FETCH_CATEGORY_SUCCESS\":\n            return {\n                ...state,\n                init: true,\n                categoryIsLoading: false,\n                category: action.category,\n            };\n        case \"FETCH_PRODUCTS_LIST\":\n            return { ...state, productsListIsLoading: true };\n        case \"FETCH_PRODUCTS_LIST_SUCCESS\":\n            return { ...state, productsListIsLoading: false, productsList: action.productsList };\n        case \"SET_OPTION_VALUE\":\n            return {\n                ...state,\n                options: { ...state.options, page: 1, [action.option]: action.value },\n            };\n        case \"SET_FILTER_VALUE\":\n            return {\n                ...state,\n                options: { ...state.options, page: 1 },\n                filters: { ...state.filters, [action.filter]: action.value },\n            };\n        case \"RESET_FILTERS\":\n            return {\n                ...state,\n                options: { ...state.options, page: 1, locationName: \"\", locationId: \"\", categoryId: \"\" },\n                filters: {},\n            };\n        case \"RESET\":\n            return state.init ? initialState : state;\n        default:\n            throw new Error();\n    }\n}\n\nfunction init(state) {\n    const [options, filters, keyword] = parseQuery(window.location.search);\n\n    return { ...state, options, filters, keyword };\n}\n\nfunction ShopPageSearch(props) {\n    const { columns, viewMode, sidebarPosition, customer } = props;\n    const offcanvas = columns === 3 ? \"mobile\" : \"always\";\n    const [state, dispatch] = useReducer(reducer, initialState, init);\n\n    // Replace current url.\n    useEffect(() => {\n        const query = buildQuery(state.options, state.filters, state.keyword);\n\n        const location = `${window.location.pathname}${query ? \"?\" : \"\"}${query}`;\n        window.history.replaceState(null, \"\", location);\n    }, [state.options, state.filters, state.keyword]);\n\n    // Load products.\n    useEffect(() => {\n        let canceled = false;\n\n        dispatch({ type: \"FETCH_PRODUCTS_LIST\" });\n        if (state.keyword === \"\" || state.keyword === undefined) {\n            props.history.push(\"/\");\n        }\n\n        storeApi\n            .getNewProducts(state.options, { ...state.filters }, state.keyword, customer.token)\n            .then((result) => {\n                if (canceled) {\n                    return;\n                }\n\n                console.log(\"ShopPageSearch - API result:\", result);\n\n                // Handle the new API response structure - items are nested in result.data.data\n                const apiData = result.data?.data || result.data || result;\n                console.log(\"ShopPageSearch - apiData:\", apiData);\n                console.log(\"ShopPageSearch - apiData.items:\", apiData?.items);\n                console.log(\"ShopPageSearch - apiData.filters:\", apiData?.filters);\n                console.log(\"ShopPageSearch - apiData.sorts:\", apiData?.sorts);\n\n                // Transform the response to match expected structure\n                const transformedData = {\n                    ...apiData,\n                    page: state.options.page || 1,\n                    // Calculate pages based on total items and limit\n                    // Since the API doesn't return total count, we'll estimate or set a default\n                    pages:\n                        apiData.items && apiData.items.length < (apiData.limit || 10)\n                            ? state.options.page || 1\n                            : (state.options.page || 1) + 1,\n                    // Ensure sorts array exists with default if not provided\n                    sorts: apiData.sorts || [\n                        { slug: \"RELEVANCE\", name: \"Paling Sesuai\", isSelected: true },\n                        { slug: \"name-asc\", name: \"Nama (A-Z)\", isSelected: false },\n                        { slug: \"name-desc\", name: \"Nama (Z-A)\", isSelected: false },\n                        { slug: \"price-asc\", name: \"Harga Terendah\", isSelected: false },\n                        { slug: \"price-desc\", name: \"Harga Tertinggi\", isSelected: false },\n                    ],\n                    // Ensure filters array exists\n                    filters: apiData.filters || [],\n                };\n\n                console.log(\"ShopPageSearch - transformedData:\", transformedData);\n                console.log(\"ShopPageSearch - transformedData.filters:\", transformedData.filters);\n\n                dispatch({ type: \"FETCH_PRODUCTS_LIST_SUCCESS\", productsList: transformedData });\n            })\n            .catch((error) => {\n                console.error(\"Search API Error:\", error);\n                if (canceled) return;\n\n                // Set empty result on error\n                dispatch({\n                    type: \"FETCH_PRODUCTS_LIST_SUCCESS\",\n                    productsList: {\n                        items: [],\n                        page: 1,\n                        pages: 1,\n                        limit: 24,\n                        sorts: [],\n                        filters: [],\n                    },\n                });\n            });\n\n        return () => {\n            canceled = true;\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dispatch, state.keyword, state.options, state.filters, props.history]);\n\n    if (state.productsListIsLoading && !state.productsList) {\n        return <BlockLoader />;\n    }\n\n    let content;\n\n    const productsView = (\n        <ProductsView\n            isLoading={state.productsListIsLoading}\n            productsList={state.productsList || { items: [], sorts: [], filters: [] }}\n            sorts={state.productsList?.sorts || []}\n            options={state.options}\n            filters={state.filters}\n            dispatch={dispatch}\n            layout={viewMode}\n            grid={`grid-${columns}-${columns > 3 ? \"full\" : \"sidebar\"}`}\n            offcanvas={offcanvas}\n            keyword={state.keyword}\n        />\n    );\n\n    const sidebarComponent = (\n        <CategorySidebar offcanvas={offcanvas}>\n            <CategorySidebarItem>\n                <WidgetFilters\n                    title=\"Filter\"\n                    offcanvas={offcanvas}\n                    filters={(state.productsList?.filters || []).map((item) =>\n                        item.type === \"category\" ? { ...item, selected: state.options.categoryId } : { ...item }\n                    )}\n                    values={{ ...state.filters, ...state.options }}\n                    dispatch={dispatch}\n                />\n            </CategorySidebarItem>\n        </CategorySidebar>\n    );\n\n    if (columns > 4) {\n        content = (\n            <div className=\"container mt-5\">\n                <div className=\"block\">{productsView}</div>\n                {sidebarComponent}\n            </div>\n        );\n    } else {\n        const sidebar = <div className=\"shop-layout__sidebar\">{sidebarComponent}</div>;\n\n        content = (\n            <div className=\"container mt-5\">\n                {state.productsList.categoryFiltered && (\n                    <div className=\"page-header__title mt-1\">\n                        <h4>{state.productsList.categoryFiltered}</h4>\n                    </div>\n                )}\n                <div className={`shop-layout shop-layout--sidebar--${sidebarPosition}`}>\n                    {sidebarPosition === \"start\" && sidebar}\n                    <div className=\"shop-layout__content\">\n                        <div className=\"block\">{productsView}</div>\n                    </div>\n                    {sidebarPosition === \"end\" && sidebar}\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div style={{ background: \"rgb(236,236,237)\" }} className=\"pt-5\">\n            <Helmet>\n                <title>{theme.name}</title>\n            </Helmet>\n\n            {content}\n        </div>\n    );\n}\n\nShopPageSearch.propTypes = {\n    /**\n     * Category slug.\n     */\n    categorySlug: PropTypes.string,\n    /**\n     * number of product columns (default: 3)\n     */\n    columns: PropTypes.number,\n    /**\n     * mode of viewing the list of products (default: 'grid')\n     * one of ['grid', 'grid-with-features', 'list']\n     */\n    viewMode: PropTypes.oneOf([\"grid\", \"grid-with-features\", \"list\"]),\n    /**\n     * sidebar position (default: 'start')\n     * one of ['start', 'end']\n     * for LTR scripts \"start\" is \"left\" and \"end\" is \"right\"\n     */\n    sidebarPosition: PropTypes.oneOf([\"start\", \"end\"]),\n};\n\nShopPageSearch.defaultProps = {\n    columns: 3,\n    viewMode: \"grid\",\n    sidebarPosition: \"start\",\n};\n\nconst mapStateToProps = (state) => ({\n    sidebarState: state.sidebar,\n    page: state.category,\n    customer: state.customer,\n});\n\nconst mapDispatchToProps = () => ({\n    sidebarClose,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPageSearch);\n"],"sourceRoot":""}