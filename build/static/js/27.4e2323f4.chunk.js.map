{"version":3,"sources":["components/shared/Pagination.jsx","api/store.js","api/territory.js","components/store/StoreView.jsx","components/store/PageStores.jsx"],"names":["Pagination","Component","constructor","arguments","setPage","value","total","current","onPageChange","this","props","getPages","siblings","pages","min","Math","max","i","push","render","_this$props","firstLinkClasses","classNames","disabled","lastLinkClasses","map","page","index","classes","active","React","createElement","key","className","style","zIndex","type","onClick","white","aria-label","defaultProps","storeApi","getNewProducts","options","length","undefined","filters","keyword","token","params","limit","sort","locationName","filter_province","locationId","filter_locationId","categoryId","filter_categoryId","longitude","latitude","Object","keys","forEach","slug","concat","fetch","qs","stringify","headers","Authorization","then","res","json","getStores","_objectSpread","process","getStore","addReviewStore","req","method","body","JSON","searchStore","uploadExcel","file","mall_id","formdata","FormData","append","territory","getProvince","getCity","id","getDistrict","StoreView","storeList","isLoading","state","dispatch","doHandleChooseStore","doChangeProvince","doChangeCity","doChangeDistrict","doChangeKeywordValue","layout","storeListItems","handlePageChange","option","filter","callback","useCallback","data","SET_OPTION_VALUE","useSetOption","parseFloat","rootClasses","items","item","class","borderRadius","src","image","primary","alt","overflow","textOverflow","wordBreak","whiteSpace","marginBottom","textTransform","name","location","province","totalProduct","Link","to","color","city","Fragment","Select","isClearable","classNamePrefix","selectedProvince","onChange","provinceIsLoading","isSearchable","placeholder","provincesList","selectedCity","cityIsLoading","isDisabled","citiesList","selectedDistrict","districtIsLoading","districtsList","defaultPropTypes","parseQueryOptions","query","queryString","parse","optionValues","parseQueryFilters","filterValues","param","mr","match","filterSlug","parseQueryKeyword","initialState","storeIsLoading","reducer","action","FETCH_PROVINCE_LIST","FETCH_PROVINCE_LIST_SUCCESS","SELECTED_PROVINCE","FETCH_CITY_LIST","FETCH_CITY_LIST_SUCCESS","SELECTED_CITY","FETCH_DISTRICT_LIST","FETCH_DISTRICT_LIST_SUCCESS","SELECTED_DISTRICT","SET_FILTER_VALUE","FETCH_STORE_LIST","FETCH_STORE_LIST_SUCCESS","SET_SEARCH_VALUE","Error","init","window","search","Stores","useReducer","customer","queryPars","typingTimeoutRef","useRef","useEffect","x","encode","buildQuery","pathname","history","replaceState","store","result","status","label","find","code","district","backgroundColor","background","height","border","e","target","clearTimeout","setTimeout","connect"],"mappings":"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","file":"static/js/27.4e2323f4.chunk.js","sourcesContent":["// react\nimport React, { Component } from \"react\";\n\n// third-party\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\n\nclass Pagination extends Component {\n    setPage = (value) => {\n        const { total, current, onPageChange,} = this.props;\n\n        if (value < 1 || value > total || value === current) {\n            return;\n        }\n\n        if (onPageChange) {\n            onPageChange(value);\n        }\n    };\n\n    getPages() {\n        const { siblings, current, total } = this.props;\n        const pages = [];\n        const min = Math.max(1, current - siblings - Math.max(0, siblings - total + current));\n        const max = Math.min(total, min + siblings * 2);\n\n        for (let i = min; i <= max; i += 1) {\n            pages.push(i);\n        }\n\n        return pages;\n    }\n\n    render() {\n        const { current, total } = this.props;\n        const firstLinkClasses = classNames(\"page-item\", {\n            disabled: current <= 1,\n        });\n        const lastLinkClasses = classNames(\"page-item\", {\n            disabled: current >= total,\n        });\n\n        const pages = this.getPages().map((page, index) => {\n            const classes = classNames(\"page-item\", {\n                active: page === current,\n            });\n\n            return (\n                <li key={index} className={classes} style={{ zIndex: 0 }}>\n                    <button type=\"button\" className=\"page-link\" onClick={() => this.setPage(page)}>\n                        {page}\n                        {page === current && <span className=\"sr-only\">(current)</span>}\n                    </button>\n                </li>\n            );\n        });\n\n        return (\n            <ul className={classNames(\"pagination justify-content-center\", {\n                'white': this.props?.white\n            })} style={{ zIndex: -1 }}>\n                <li className={firstLinkClasses}>\n                    <button\n                        type=\"button\"\n                        className=\"page-link page-link--with-arrow\"\n                        aria-label=\"Previous\"\n                        onClick={() => this.setPage(1)}\n                    >\n                        <i className=\"fas fa-angle-double-left fa-1x\"></i>\n                    </button>\n                </li>\n                {pages}\n                <li className={lastLinkClasses}>\n                    <button\n                        type=\"button\"\n                        className=\"page-link page-link--with-arrow\"\n                        aria-label=\"Next\"\n                        onClick={() => this.setPage(this.props.total)}\n                    >\n                        <i className=\"fas fa-angle-double-right\"></i>\n                    </button>\n                </li>\n            </ul>\n        );\n    }\n}\n\nPagination.propTypes = {\n    /**\n     * the number of sibling links\n     */\n    siblings: PropTypes.number,\n    /**\n     * current page number\n     */\n    current: PropTypes.number,\n    /**\n     * total pages\n     */\n    total: PropTypes.number,\n    /**\n     * total pages\n     */\n    onPageChange: PropTypes.func,\n};\n\nPagination.defaultProps = {\n    siblings: 1,\n    current: 1,\n    total: 1,\n};\n\nexport default Pagination;\n","import qs from \"query-string\";\nconst storeApi = {\n    getNewProducts: (options = {}, filters = {}, keyword, token) => {\n        const params = {\n            limit: options.limit || 10,\n            page: options.page || 1,\n        };\n\n        // Add keyword to params if provided\n        if (keyword) {\n            params.keyword = keyword;\n        }\n\n        // Add sort option if provided\n        if (options.sort) {\n            params.sort = options.sort;\n        }\n\n        // Add location filters if provided\n        if (options.locationName) {\n            params.filter_province = options.locationName;\n        }\n        if (options.locationId) {\n            params.filter_locationId = options.locationId;\n        }\n        if (options.categoryId) {\n            params.filter_categoryId = options.categoryId;\n        }\n        if (options.longitude) {\n            params.longitude = options.longitude;\n        }\n        if (options.latitude) {\n            params.latitude = options.latitude;\n        }\n\n        // Add filters to params\n        Object.keys(filters).forEach((slug) => {\n            params[`filter_${slug}`] = filters[slug];\n        });\n\n        return fetch(`https://siplah.eurekabookhouse.co.id/api/product/shortProduct?${qs.stringify(params)}`, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: token || \"\",\n            },\n        }).then((res) => res.json());\n    },\n    getStores: (options = {}, filters = {}, keyword, token) => {\n        const params = { ...options, keyword };\n\n        Object.keys(filters).forEach((slug) => {\n            params[`filter_${slug}`] = filters[slug];\n        });\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall?${qs.stringify(params)}`, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: token || \"\",\n            },\n        }).then((res) => res.json());\n    },\n    getStore: (slug) => {\n        const params = { slug };\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall?${qs.stringify(params)}`).then((res) => res.json());\n    },\n\n    addReviewStore: (req, token) => {\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}mall/review`, {\n            method: \"post\",\n            headers: { \"Content-Type\": \"application/json\", Authorization: token },\n            body: JSON.stringify(req),\n        }).then((res) => res.json());\n    },\n    searchStore: (keyword) => {\n        return fetch(`https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword=${keyword}`, {\n            method: \"get\",\n            headers: { \"Content-Type\": \"application/json\" },\n        }).then((res) => res.json());\n    },\n    uploadExcel: (file, mall_id) => {\n        const formdata = new FormData();\n        formdata.append(\"file\", file);\n        formdata.append(\"mall_id\", mall_id);\n        return fetch(`https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV`, {\n            method: \"POST\",\n            body: formdata,\n        }).then((res) => res.json());\n    },\n};\n\nexport default storeApi;\n","const territory = {\n    getProvince: () => {\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}master/province`).then((res) => res.json());\n    },\n    getCity: (id) => {\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}master/city/${id}`).then((res) => res.json());\n    },\n\n    getDistrict: (id) => {\n        return fetch(`${process.env.REACT_APP_URL_SIPLAH}master/district/${id}`).then((res) => res.json());\n    },\n};\n\nexport default territory;\n","// react\nimport React, { useCallback } from \"react\";\n\n// third-party\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { Link } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport Pagination from \"../shared/Pagination\";\nimport { SET_OPTION_VALUE } from \"../../data/constant\";\n\nfunction useSetOption(option, filter, dispatch) {\n    const callback = useCallback(filter, []);\n\n    return useCallback(\n        (data) => {\n            dispatch({\n                type: SET_OPTION_VALUE,\n                option,\n                value: callback(data),\n            });\n        },\n        [option, callback, dispatch]\n    );\n}\n\nconst StoreView = (props) => {\n    const {\n        storeList,\n        isLoading,\n        state,\n        dispatch,\n        doHandleChooseStore,\n        doChangeProvince,\n        doChangeCity,\n        doChangeDistrict,\n        doChangeKeywordValue,\n        layout,\n        options,\n    } = props;\n\n    let storeListItems;\n\n    const handlePageChange = useSetOption(\"page\", parseFloat, dispatch);\n\n    const rootClasses = classNames(\"products-view\", {\n        \"products-view--loading\": isLoading,\n    });\n\n    if (storeList.items === undefined) {\n        storeListItems = [];\n    } else {\n        if (layout === \"modal\") {\n            storeListItems = storeList.items.map((item, index) => (\n                <div className={`col-lg-6 mt-3`}>\n                    <div class=\"card \" style={{ borderRadius: \"12px\" }}>\n                        <div className=\"card-body\">\n                            <div className=\"row\">\n                                <div className=\"col-5\">\n                                    <img src={item.image.primary} alt=\"\" className=\"img-contain\" />\n                                </div>\n                                <div className=\"col-7\">\n                                    <h5 className=\"font-weight-bold\"style={{\n                                            overflow: \"hidden\",\n                                            textOverflow: \"ellipsis\",\n                                            wordBreak: \" break-all\",\n                                            whiteSpace: \"nowrap\",\n                                            marginBottom: \"0px\",\n                                            textTransform:'uppercase'\n                                        }}\n                                    >\n                                        {item.name}\n                                    </h5>\n                                    <h6 className=\"mb-0\">{item.location.province}</h6>\n                                    <div>\n                                        <small>{item.totalProduct} Produk</small>\n                                    </div>\n                                    <button className=\"btn btn-primary\" onClick={() => doHandleChooseStore(item)}>\n                                        Pilih\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ));\n        } else {\n            storeListItems = storeList.items.map((item, index) => (\n                <div className={`col-lg-6 mt-3`}>\n                    <Link to={`/store/${item.slug}`} className=\"text-dark\">\n                        <div class=\"card shadow\" style={{ borderRadius: \"12px\" }}>\n                            <div className=\"card-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-5\">\n                                        <img src={item.image.primary} alt=\"\" className=\"img-contain\" />\n                                    </div>\n                                    <div className=\"col-7\">\n                                        <h5 style={{color:'rgb(255, 98, 33)'}} className=\"font-weight-bold text-uppercase\">{item.name}</h5>\n                                        <span className=\"text-secondary d-block\">{item.location.city}</span>\n                                        <small className=\"text-primary\">{item.totalProduct} Produk</small>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </Link>\n                </div>\n            ));\n        }\n    }\n\n    return (\n        <>\n            <div className=\"row mt-3\">\n                <div className=\"col-12\">\n                    <div class=\"card bg-danger border-0 shadow\" style={{ borderRadius: '20px' }}>\n                        <div class=\"card-body\">\n                            <div className=\"row align-items-center\">\n                                <div className=\"col-12 mb-2\">\n                                    <h4 className=\"text-white\">Cari penyedia sesuai wilayah</h4>\n                                </div>\n                                <div className=\"col-lg-4 col-sm-6\">\n                                    <div class=\"form-group\">\n                                        <Select\n                                            isClearable\n                                            className=\"basic-single\"\n                                            classNamePrefix=\"select\"\n                                            value={state.selectedProvince}\n                                            onChange={doChangeProvince}\n                                            isLoading={state.provinceIsLoading}\n                                            isSearchable={true}\n                                            name={\"province\"}\n                                            placeholder=\"Pilih Provinsi\"\n                                            options={state.provincesList}\n                                        />\n                                    </div>\n                                </div>\n                                <div className=\"col-lg-4 col-sm-6\">\n                                    <div class=\"form-group\">\n                                        <Select\n                                            isClearable\n                                            className=\"basic-single\"\n                                            classNamePrefix=\"select\"\n                                            value={state.selectedCity}\n                                            onChange={doChangeCity}\n                                            isLoading={state.cityIsLoading}\n                                            isSearchable={true}\n                                            name={\"city\"}\n                                            isDisabled={state.citiesList == null}\n                                            placeholder=\"Pilih Kabupaten/Kota\"\n                                            options={state.citiesList}\n                                        />\n                                    </div>\n                                </div>\n                                <div className=\"col-lg-4 col-sm-6 \">\n                                    <div class=\"form-group\">\n                                        <Select\n                                            isClearable\n                                            className=\"basic-single\"\n                                            classNamePrefix=\"select\"\n                                            value={state.selectedDistrict}\n                                            onChange={doChangeDistrict}\n                                            isLoading={state.districtIsLoading}\n                                            isSearchable={true}\n                                            name={\"district\"}\n                                            isDisabled={state.districtsList == null}\n                                            placeholder=\"Pilih Kecamatan\"\n                                            options={state.districtsList}\n                                        />\n                                    </div>\n                                </div>\n\n                                <div className=\"col-12\">\n                                    <div class=\"form-group\">\n                                        <input\n                                            type=\"text\"\n                                            class=\"form-control\"\n                                            value={state.keyword}\n                                            onChange={doChangeKeywordValue}\n                                            placeholder=\"Cari Nama Toko ...\"\n                                            style={{ borderRadius: '10px' }}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className={rootClasses}>\n                <div className=\"products-view__loader\" />\n                {storeListItems.length > 0 ? (\n                    <>\n                        <div class=\"row\">{storeListItems}</div>\n                        <div className=\"products-view__pagination\">\n                            <Pagination\n                                white={true}\n                                current={options.page || storeList.page}\n                                siblings={2}\n                                total={storeList.pages}\n                                onPageChange={handlePageChange}\n                            />\n                        </div>\n                    </>\n                ) : (\n                    <div className=\"row mt-3\">\n                        <div className=\"col-12\">\n                            <h3 className=\"text-center\">Maaf, Toko Tidak Ditemukan</h3>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\nStoreView.propTypes = {\n    storeList: PropTypes.object,\n    isLoading: PropTypes.bool,\n    state: PropTypes.object,\n    doChangeCity: PropTypes.func,\n    doChangeDistrict: PropTypes.func,\n    doChangeProvince: PropTypes.func,\n    dispatch: PropTypes.func,\n    layout: PropTypes.oneOf([\"default\", \"modal\"]),\n    doChangeKeywordValue: PropTypes.func,\n    options: PropTypes.object,\n};\n\nStoreView.defaultPropTypes = {\n    isLoading: true,\n};\n\nexport default StoreView;\n","/*eslint eqeqeq: \"error\"*/\r\n/*react-hooks/exhaustive-deps:\"error\" */\r\nimport React, { useEffect, useReducer, useRef } from \"react\";\r\n\r\n// api\r\nimport territory from \"../../api/territory\";\r\nimport store from \"../../api/store\";\r\n\r\n// third-party\r\nimport queryString from \"query-string\";\r\nimport propTypes from \"prop-types\";\r\n\r\n// application\r\nimport StoreView from \"./StoreView\";\r\n\r\n// constant\r\nimport {\r\n    FETCH_CITY_LIST,\r\n    FETCH_CITY_LIST_SUCCESS,\r\n    FETCH_DISTRICT_LIST,\r\n    FETCH_DISTRICT_LIST_SUCCESS,\r\n    FETCH_PROVINCE_LIST,\r\n    FETCH_PROVINCE_LIST_SUCCESS,\r\n    FETCH_STORE_LIST,\r\n    FETCH_STORE_LIST_SUCCESS,\r\n    SELECTED_CITY,\r\n    SELECTED_DISTRICT,\r\n    SELECTED_PROVINCE,\r\n    SET_FILTER_VALUE,\r\n    SET_OPTION_VALUE,\r\n    SET_SEARCH_VALUE,\r\n} from \"../../data/constant\";\r\nimport { connect } from \"react-redux\";\r\n\r\nfunction parseQueryOptions(location) {\r\n    const query = queryString.parse(location);\r\n\r\n    const optionValues = {\r\n        page: 1,\r\n        limit: 10,\r\n    };\r\n\r\n    if (typeof query.page === \"string\") {\r\n        optionValues.page = parseFloat(query.page);\r\n    }\r\n\r\n    return optionValues;\r\n}\r\n\r\nfunction parseQueryFilters(location) {\r\n    const query = queryString.parse(location);\r\n    const filterValues = {};\r\n\r\n    Object.keys(query).forEach((param) => {\r\n        const mr = param.match(/^filter_([-_A-Za-z0-9]+)$/);\r\n\r\n        if (!mr) {\r\n            return;\r\n        }\r\n\r\n        const filterSlug = mr[1];\r\n\r\n        filterValues[filterSlug] = query[param];\r\n    });\r\n\r\n    return filterValues;\r\n}\r\n\r\nfunction parseQueryKeyword(location) {\r\n    const query = queryString.parse(location);\r\n    let keyword;\r\n    if (typeof query.keyword === \"string\") {\r\n        keyword = query.keyword;\r\n    }\r\n\r\n    return keyword;\r\n}\r\n\r\nfunction parseQuery(location) {\r\n    return [parseQueryOptions(location), parseQueryFilters(location), parseQueryKeyword(location)];\r\n}\r\n\r\nfunction buildQuery(options, filters, keyword) {\r\n    const params = { keyword };\r\n\r\n    if (options.page !== 1) {\r\n        params.page = options.page;\r\n    }\r\n\r\n    Object.keys(filters)\r\n        .filter((x) => x !== \"category\" && !!filters[x])\r\n        .forEach((filterSlug) => {\r\n            params[`filter_${filterSlug}`] = filters[filterSlug];\r\n        });\r\n\r\n    return queryString.stringify(params, { encode: false });\r\n}\r\n\r\nconst initialState = {\r\n    /*\r\n        loading province\r\n    */\r\n    provinceIsLoading: true,\r\n    /*\r\n        list province\r\n    */\r\n    provincesList: [],\r\n    /*\r\n        selected province\r\n    */\r\n    selectedProvince: null,\r\n    /*\r\n        loading city\r\n    */\r\n    cityIsLoading: false,\r\n    /*\r\n    city list\r\n   */\r\n    citiesList: [],\r\n    /*\r\n    selected city\r\n  */\r\n    selectedCity: null,\r\n    /*\r\n        loading district\r\n    */\r\n    districtIsLoading: false,\r\n    /*\r\n    district list\r\n   */\r\n    districtsList: [],\r\n    /*\r\n    selected district\r\n  */\r\n    selectedDistrict: null,\r\n    /*\r\n        filter\r\n    */\r\n    filters: {},\r\n    /*\r\n        options\r\n    */\r\n    options: {},\r\n    /*\r\n        stores\r\n    */\r\n    storeList: [],\r\n\r\n    storeIsLoading: true,\r\n    keyword: null,\r\n};\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case FETCH_PROVINCE_LIST:\r\n            return {\r\n                ...state,\r\n                provinceIsLoading: true,\r\n            };\r\n        case FETCH_PROVINCE_LIST_SUCCESS:\r\n            return {\r\n                ...state,\r\n                provinceIsLoading: false,\r\n                provincesList: action.provincesList,\r\n            };\r\n        case SELECTED_PROVINCE:\r\n            return {\r\n                ...state,\r\n                selectedProvince: action.selectedProvince,\r\n                citiesList: null,\r\n                districtsList: null,\r\n                selectedCity: null,\r\n                selectedDistrict: null,\r\n                filters: { province: state.filters.province },\r\n            };\r\n        case FETCH_CITY_LIST:\r\n            return {\r\n                ...state,\r\n                cityIsLoading: true,\r\n            };\r\n        case FETCH_CITY_LIST_SUCCESS:\r\n            return {\r\n                ...state,\r\n                cityIsLoading: false,\r\n                citiesList: action.citiesList,\r\n            };\r\n        case SELECTED_CITY:\r\n            return {\r\n                ...state,\r\n                selectedCity: action.selectedCity,\r\n                selectedDistrict: null,\r\n                filters: { province: state.filters.province, city: state.filters.city },\r\n            };\r\n        case FETCH_DISTRICT_LIST:\r\n            return {\r\n                ...state,\r\n                districtIsLoading: true,\r\n            };\r\n        case FETCH_DISTRICT_LIST_SUCCESS:\r\n            return {\r\n                ...state,\r\n                districtIsLoading: false,\r\n                districtsList: action.districtsList,\r\n            };\r\n        case SELECTED_DISTRICT:\r\n            return {\r\n                ...state,\r\n                selectedDistrict: action.selectedDistrict,\r\n            };\r\n        case SET_FILTER_VALUE:\r\n            return {\r\n                ...state,\r\n                options: { ...state.options, page: 1 },\r\n                filters: { ...state.filters, [action.filter]: action.value },\r\n            };\r\n        case FETCH_STORE_LIST:\r\n            return { ...state, storeIsLoading: true };\r\n        case FETCH_STORE_LIST_SUCCESS:\r\n            return { ...state, storeIsLoading: false, storeList: action.storeList };\r\n        case SET_OPTION_VALUE:\r\n            return {\r\n                ...state,\r\n                options: { ...state.options, page: 1, [action.option]: action.value },\r\n            };\r\n        case SET_SEARCH_VALUE:\r\n            return {\r\n                ...state,\r\n                keyword: action.keyword,\r\n                options: { ...state.options, page: 1 },\r\n            };\r\n        default:\r\n            throw new Error();\r\n    }\r\n}\r\n\r\nfunction init(state) {\r\n    const [options, filters, keyword] = parseQuery(window.location.search);\r\n\r\n    return { ...state, options, filters, keyword };\r\n}\r\n\r\nconst Stores = (props) => {\r\n    const [state, dispatch] = useReducer(reducer, initialState, init);\r\n    const { layout, doHandleChooseStore, customer } = props;\r\n    const queryPars = queryString.parse(window.location.search);\r\n    const typingTimeoutRef = useRef(null);\r\n\r\n    // Replace current url.\r\n    useEffect(() => {\r\n        const query = buildQuery(state.options, state.filters);\r\n        const location = `${window.location.pathname}${query ? \"?\" : \"\"}${query}`;\r\n        window.history.replaceState(null, \"\", location);\r\n    }, [state.options, state.filters]);\r\n\r\n    useEffect(() => {\r\n        if (queryPars.keyword !== state.keyword) {\r\n            dispatch({ type: SET_SEARCH_VALUE, keyword: queryPars.keyword });\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [queryPars.keyword]);\r\n\r\n    // load store list\r\n    useEffect(() => {\r\n        // kalau keyword kosong -> langsung fetch\r\n        if (!state.keyword) {\r\n            dispatch({ type: FETCH_STORE_LIST });\r\n            store.getStores(state.options, { ...state.filters }, undefined, customer.token).then((res) => {\r\n                const { data } = res;\r\n                dispatch({ type: FETCH_STORE_LIST_SUCCESS, storeList: data });\r\n            });\r\n            return; // stop disini\r\n        }\r\n\r\n        // kalau ada keyword -> debounce 2 detik\r\n        // const handler = setTimeout(() => {\r\n        //     dispatch({ type: FETCH_STORE_LIST });\r\n        //     store.getStores(state.options, { ...state.filters }, state.keyword, customer.token).then((res) => {\r\n        //         const { data } = res;\r\n        //         dispatch({ type: FETCH_STORE_LIST_SUCCESS, storeList: data });\r\n        //     });\r\n        // }, 2000);\r\n\r\n        // return () => clearTimeout(handler);\r\n    }, [state.options, state.filters]);\r\n\r\n    // load province list\r\n    useEffect(() => {\r\n        dispatch({ type: FETCH_PROVINCE_LIST });\r\n        territory.getProvince().then((result) => {\r\n            const { status, data } = result;\r\n\r\n            const provincesList = data.items.map((item) => {\r\n                return { value: item.id, label: item.name };\r\n            });\r\n\r\n            const selectedProvince = provincesList.find((item) => item.value === state.filters.province);\r\n            if (status.code === 200) {\r\n                if (selectedProvince !== undefined) {\r\n                    doChangeProvince(selectedProvince);\r\n                }\r\n                dispatch({ type: FETCH_PROVINCE_LIST_SUCCESS, provincesList });\r\n            }\r\n        });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [state.filters.province]);\r\n\r\n    /*\r\n            function for change province\r\n    */\r\n    const doChangeProvince = (data) => {\r\n        if (data !== null) {\r\n            dispatch({ type: SELECTED_PROVINCE, selectedProvince: data });\r\n\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"province\", value: data.value });\r\n\r\n            dispatch({ type: FETCH_CITY_LIST });\r\n\r\n            territory.getCity(data.value).then((res) => {\r\n                const { status, data } = res;\r\n\r\n                const citiesList = data.items.city.map((item) => {\r\n                    return { label: item.name, value: item.id };\r\n                });\r\n\r\n                const selectedCity = citiesList.find((item) => item.value === state.filters.city);\r\n\r\n                if (status.code === 200) {\r\n                    if (selectedCity !== undefined) {\r\n                        doChangeCity(selectedCity);\r\n                    }\r\n                    dispatch({\r\n                        type: FETCH_CITY_LIST_SUCCESS,\r\n                        citiesList,\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            dispatch({ type: SELECTED_PROVINCE, selectedProvince: data });\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"province\", value: data });\r\n        }\r\n    };\r\n\r\n    /*\r\n\r\n    function for change city\r\n\r\n    */\r\n    const doChangeCity = (data) => {\r\n        if (data !== null) {\r\n            dispatch({ type: SELECTED_CITY, selectedCity: data });\r\n\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"city\", value: data.value });\r\n\r\n            dispatch({ type: FETCH_DISTRICT_LIST });\r\n\r\n            territory.getDistrict(data.value).then((res) => {\r\n                const { status, data } = res;\r\n                if (status.code === 200) {\r\n                    const districtsList = data.items.district.map((item) => {\r\n                        return { value: item.id, label: item.name };\r\n                    });\r\n\r\n                    const selectedDistrict = districtsList.find((item) => item.value === state.filters.district);\r\n                    if (selectedDistrict !== undefined) {\r\n                        doChangeDistrict(selectedDistrict);\r\n                    }\r\n\r\n                    dispatch({ type: FETCH_DISTRICT_LIST_SUCCESS, districtsList });\r\n                }\r\n            });\r\n        } else {\r\n            dispatch({ type: SELECTED_CITY, selectedCity: data });\r\n\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"city\", value: data });\r\n            dispatch({ type: FETCH_DISTRICT_LIST_SUCCESS, districtsList: null });\r\n        }\r\n    };\r\n    /*\r\n\r\n    function for change district\r\n\r\n    */\r\n    const doChangeDistrict = (data) => {\r\n        if (data !== null) {\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"district\", value: data.value });\r\n            dispatch({ type: SELECTED_DISTRICT, selectedDistrict: data });\r\n        } else {\r\n            dispatch({ type: SET_FILTER_VALUE, filter: \"district\", value: data });\r\n            dispatch({ type: SELECTED_DISTRICT, selectedDistrict: data });\r\n        }\r\n    };\r\n\r\n    const doChangeKeywordValue = (e) => {\r\n        const { value } = e.target;\r\n\r\n        // update keyword state\r\n        dispatch({\r\n            type: SET_SEARCH_VALUE,\r\n            keyword: value !== \"\" ? value : undefined,\r\n        });\r\n\r\n        // selalu clear timeout biar ga numpuk\r\n        if (typingTimeoutRef.current) {\r\n            clearTimeout(typingTimeoutRef.current);\r\n        }\r\n\r\n        // kalau ada value â†’ debounce 2 detik\r\n        typingTimeoutRef.current = setTimeout(() => {\r\n            dispatch({ type: FETCH_STORE_LIST });\r\n            store.getStores(state.options, { ...state.filters }, value, customer.token).then((res) => {\r\n                dispatch({\r\n                    type: FETCH_STORE_LIST_SUCCESS,\r\n                    storeList: res.data,\r\n                });\r\n            });\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <section className=\"py-4\" style={{ backgroundColor: \"rgb(0,129,199)\" }}>\r\n            <div className=\"container\">\r\n                {layout === \"default\" && (\r\n                    <div className=\"row d-none d-md-none d-lg-block\">\r\n                        <div className=\"col-xl-12\">\r\n                            <div\r\n                                className=\"card bg-transparent border-0 text-white\"\r\n                                style={{\r\n                                    borderRadius: \"15px\",\r\n                                }}\r\n                            >\r\n                                <div className=\"card-body p-0\">\r\n                                    <h5 className=\"card-title\">Terdapat Banyak Penyedia</h5>\r\n                                    <p className=\"card-text\">\r\n                                        Penyedia adalah subjek dalam rantai pemenuhan keperluan sekolah. Penyedia\r\n                                        menyediakan dan melayani sekolah yang melakukan pemesanan pada sistem SIPLah\r\n                                        sesuai dengan kebijakan yang berlaku. Penyedia tunduk pada kebijakan produk\r\n                                        maupun kebijakan privasi. Total Penyedia berasal dari penyedia yang sudah\r\n                                        dinyatakan lengkap persyaratan (proses Approve) menjadi penyedia SIPLah\r\n                                        Kemdikbud Eureka.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-xl-12 mt-3\">\r\n                            <div\r\n                                className=\"card text-white shadow\"\r\n                                style={{\r\n                                    background:\r\n                                        \"url(https://siplah.eurekabookhouse.co.id/assets/front/images/banner/banner-mall-page.jpg) no-repeat center center\",\r\n                                    height: \"280px\",\r\n                                    borderRadius: \"15px\",\r\n                                    border: \"none\",\r\n                                }}\r\n                            >\r\n                                <div className=\"card-body \">\r\n                                    <h5>Penyedia Beragam</h5>\r\n                                    <h3>Berbagai penyedia di seluruh pelosok indonesia</h3>\r\n                                    <h6>Temukan disekitar anda</h6>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <StoreView\r\n                    isLoading={state.storeIsLoading}\r\n                    storeList={state.storeList}\r\n                    state={state}\r\n                    layout={layout}\r\n                    doHandleChooseStore={doHandleChooseStore}\r\n                    options={state.options}\r\n                    doChangeCity={doChangeCity}\r\n                    doChangeDistrict={doChangeDistrict}\r\n                    doChangeProvince={doChangeProvince}\r\n                    dispatch={dispatch}\r\n                    doChangeKeywordValue={doChangeKeywordValue}\r\n                />\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nStores.propTypes = {\r\n    layout: propTypes.oneOf([\"default\", \"modal\"]),\r\n};\r\n\r\nStores.defaultPropTypes = {\r\n    layout: \"default\",\r\n};\r\n\r\nconst mapStateToProps = (state) => ({ customer: state.customer });\r\nexport default connect(mapStateToProps, null)(Stores);\r\n"],"sourceRoot":""}