(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[34],{357:function(e,a,t){"use strict";t.r(a);var o=t(4),n=t(1),l=t.n(n),r=t(47),s=t(10),c=t(30),m=t.n(c),i=t(137),d=t(16),u=t(38),b=t(37),g=t(22),p=t(20),h=t(35),E=t(26);const k={loginCustomer:u.b,addMiniCart:g.a,customerAdd:b.a};a.default=Object(s.j)(Object(h.b)(null,k)((function(e){const[a,t]=Object(n.useState)({}),[s,c]=Object(n.useState)(!1),u=e=>{const{value:n,name:l}=e.target;t(Object(o.a)(Object(o.a)({},a),{},{[l]:n}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,null,l.a.createElement("title",null,"Login Customer \u2014 ".concat(i.a.name))),l.a.createElement("div",{className:"block mt-4"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 offset-md-2"},l.a.createElement("div",{className:"card flex-grow-1 mb-md-0"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h4",{className:"card-title"},"Masuk untuk berbelanja"),l.a.createElement("a",{href:"https://sso.datadik.kemdikbud.go.id/app/46703e0b-320d-47d1-a058-21ae14e36b99",style:{borderRadius:"10px",color:"white",marginTop:"10px",marginBottom:"10px"},className:"btn btn-danger btn-block btn-lg",rel:"noopener noreferrer"},l.a.createElement("i",{class:"fas fa-sign-in-alt"})," Akun Dapodik"),l.a.createElement("h6",{className:"text-line"},"atau masuk dengan"),l.a.createElement("form",{onSubmit:t=>(void 0!==t&&t.preventDefault(),c(!0),new Promise(t=>{d.a.login(a).then(a=>{const{data:n,status:l}=a,r=n;200===l.code?(localStorage.setItem("token",r),localStorage.setItem("auth","true"),d.a.getMiniCart(r).then(a=>{const{data:t}=a;e.addMiniCart(t)}),d.a.getCustomer(r).then(a=>{const{data:t}=a;localStorage.setItem("userData",JSON.stringify(Object(o.a)(Object(o.a)({},t),{},{token:r}))),e.customerAdd(Object(o.a)(Object(o.a)({},t),{},{token:r})),e.loginCustomer({type:E.a,auth:!0,isLogin:!0}),p.b.success("Login Berhasil"),c(!1),e.history.push("/account/dashboard")})):(c(!1),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),e.loginCustomer({type:E.a,auth:!1,isLogout:!0}),e.customerAdd({}),p.b.error("Login Gagal",{toastId:"logout"})),t()})}))},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"login-email"},"Email"),l.a.createElement("input",{id:"login-email",onChange:u,type:"email",name:"email",className:"form-control",placeholder:"Enter email"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"login-password"},"Kata Sandi"),l.a.createElement("input",{id:"login-password",onChange:u,name:"password",type:"password",className:"form-control",placeholder:"Password"})),l.a.createElement("button",{type:"submit",style:{borderRadius:"10px",color:"white",marginTop:"10px",marginBottom:"10px"},className:m()("btn btn-lg btn-block btn-primary",{"btn-loading":s})},"Login")))))))))})))}}]);
//# sourceMappingURL=34.b311ecf8.chunk.js.map