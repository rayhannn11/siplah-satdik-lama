(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[20,37],{170:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var n=a(1),s=a.n(n);function o(e){return s.a.createElement("div",Object.assign({className:"block-loader"},e),s.a.createElement("div",{className:"block-loader__spinner"}))}},172:function(e,t,a){"use strict";var n=a(1);class s extends n.Component{constructor(e){super(e),this.canceled=!1,this.run=()=>{const{action:e}=this.props,{loading:t}=this.state;!t&&e&&(this.setState({loading:!0}),e().then(()=>{this.canceled||this.setState({loading:!1})}))},this.state={loading:!1}}componentWillUnmount(){this.canceled=!0}render(){const{render:e}=this.props,{loading:t}=this.state;return e?e({run:this.run,loading:t}):null}}t.a=s},175:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));const n={home:()=>"/",catalog:()=>"/shop/catalog",category:e=>"/shop/catalog/".concat(e.slug),product:e=>"/product/".concat(e.mall.id,"/").concat(e.slug),mall:e=>"/store/".concat(e.slug)};function s(e){return e.parent?[...s(e.parent),e.parent]:[]}},185:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(34),c=a.n(o),l=a(39);class i extends n.PureComponent{constructor(e){var t;super(e),this.setWrapperRef=e=>{this.wrapperRef=e},this.handleOutsideClick=e=>{const{open:t}=this.state;this.wrapperRef&&!this.wrapperRef.contains(e.target)&&t&&this.close()},this.handleButtonClick=e=>{const{onClick:t,dropdown:a}=this.props;a&&e.preventDefault(),this.toggle(),t&&t(e)},this.state={open:null!==(t=this.props.openNotif)&&void 0!==t&&t,tooltipOpen:!1}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick)}componentDidUpdate(e,t){const{open:a}=this.state,{onOpen:n,onClose:s}=this.props;a!==t.open&&(a&&n&&n(),!a&&s&&s())}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick)}toggle(){this.setState(e=>({open:!e.open}))}open(){this.setState(()=>({open:!0}))}close(){this.setState(()=>({open:!1})),this.props.closeNotif&&this.props.closeNotif()}render(){const{open:e}=this.state,{url:t,className:a,icon:n}=this.props;console.log(this.props,"props lonceng");let o,{value:i,dropdown:r}=this.props;void 0!==i&&(i=s.a.createElement("span",{className:"indicator__value"},i));const m=s.a.createElement("span",{className:"indicator__area"},n,i);o=t?s.a.createElement(l.b,{to:t,className:"indicator__button",onClick:this.handleButtonClick},m):s.a.createElement("button",{type:"button",className:"indicator__button",onClick:this.handleButtonClick},m),r&&(r=s.a.createElement("div",{className:"indicator__dropdown"},r));const u=c()("indicator indicator--trigger--click ".concat(a),{"indicator--opened":e});return s.a.createElement("div",{className:u,ref:this.setWrapperRef},o,r)}}t.a=i},233:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(34),c=a.n(o),l=a(10),i=a(65),r=a(40),m=a(39),u=a(172),d=a(169),p=a(64),h=a(175),g=a(170);const E=s.a.memo(e=>{const{context:t,className:a,products:n,itemMalls:o,cartAddItem:l,isLoading:i,customer:r,query:p}=e,E=c()("suggestions suggestions--location--".concat(t),a);console.log(n,"search product"),console.log(o,"search itemMalls");const b=n&&n.map(a=>{var n;const o="number"===typeof a.price.primary?a.price.primary:parseFloat(a.price.primary||0),i="non"===a.ppnType,p=(i||Math.ceil(o/1.11*.11),Math.floor(o/1.11)),g=Math.ceil(11/12*Number(p)),E=Math.ceil(.12*g),b=i?"Rp ".concat(Math.round(o).toLocaleString("id-ID")):a.price.primaryCurrencyFormat;return s.a.createElement("li",{key:a.id,className:"suggestions__item"},a.images&&a.images.length>0&&s.a.createElement("div",{className:"suggestions__item-image product-image"},s.a.createElement("div",{className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:a.images[0],alt:""}))),s.a.createElement("div",{className:"suggestions__item-info"},s.a.createElement(m.b,{className:"suggestions__item-name",to:h.b.product(a)},a.name),s.a.createElement("div",{className:"suggestions__item-meta"},null===(n=a.mall)||void 0===n?void 0:n.name)),s.a.createElement("div",{className:"suggestions__item-price"},b,s.a.createElement("div",{className:"suggestions__item-ppn",style:{fontSize:"11px",color:"#6c757d"}},i?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#28A745"}},"Bebas Pajak"),s.a.createElement("div",null,"DPP PPH: ",b),s.a.createElement("div",null,"DPP Nilai Lain: Rp 0"),s.a.createElement("div",null,"PPN 12%: Rp 0")):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#28A745"}},"Harga Termasuk Pajak"),s.a.createElement("div",null,"DPP PPH: Rp ",p.toLocaleString("id-ID")),s.a.createElement("div",null,"DPP Nilai Lain: Rp ",g.toLocaleString("id-ID")),s.a.createElement("div",null,"PPN ",12,"%: Rp ",E.toLocaleString("id-ID"))))),"header"===t&&s.a.createElement("div",{className:"suggestions__item-actions"},s.a.createElement(u.a,{action:()=>(t=>void 0!==(null===r||void 0===r?void 0:r.token)&&""!==(null===r||void 0===r?void 0:r.token)?l(t,null===r||void 0===r?void 0:r.token):new Promise(t=>{e.history.push("/login"),t()}))(a),render:e=>{let{run:t,loading:a}=e;return s.a.createElement("button",{type:"button",onClick:t,title:"Add to cart",className:c()("btn btn-primary btn-sm btn-svg-icon",{"btn-loading":a})},s.a.createElement(d.i,null))}})))}),_=o&&o.map(e=>{var t;return s.a.createElement("li",{key:e.id,className:"suggestions__item"},e.image&&e.image.primary&&s.a.createElement("div",{className:"suggestions__item-image product-image"},s.a.createElement("div",{className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:e.image.primary,alt:""}))),s.a.createElement("div",{className:"suggestions__item-info"},s.a.createElement(m.b,{className:"suggestions__item-name",to:"/store/".concat(e.slug)},e.name),s.a.createElement("div",{className:"suggestions__item-meta"},null===(t=e.location)||void 0===t?void 0:t.city)))});return s.a.createElement("div",{className:E},i?s.a.createElement(g.default,null):s.a.createElement("ul",{className:"suggestions__list"},s.a.createElement("li",{className:"suggestions__item"},s.a.createElement("div",null,"BARANG")),b&&b.length>0?s.a.createElement(s.a.Fragment,null,b,s.a.createElement("li",{className:"suggestions__item d-flex justify-content-center"},s.a.createElement(m.b,{to:"/products/search?keyword=".concat(p),className:"suggestions__item-name",style:{color:"#0E336D"}},"Lihat Produk Lainnya"))):s.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Produk tidak ditemukan"),s.a.createElement("li",{className:"suggestions__item"},s.a.createElement("div",null,"TOKO")),_&&_.length>0?s.a.createElement(s.a.Fragment,null,_,s.a.createElement("li",{className:"suggestions__item"},s.a.createElement(m.b,{to:"/store?keyword=".concat(p),className:"suggestions__item-name d-flex justify-content-between align-items-center w-100"},s.a.createElement("div",{style:{color:"#0E336D"}},'Lihat Pencarian Toko "',p,'" Lainnya'),s.a.createElement(d.f,null)))):s.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Toko tidak ditemukan")))}),b={cartAddItem:p.a};var _=Object(l.j)(Object(r.b)(e=>({customer:e.customer}),b)(E));const v=s.a.memo(e=>{const{context:t,className:a,inputRef:o,onClose:l,location:r,customer:m}=e,[u,p]=Object(n.useState)(()=>()=>{}),[h,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[v,N]=Object(n.useState)([]),[f,y]=Object(n.useState)([]),[k,O]=Object(n.useState)(!0),[C,j]=Object(n.useState)(""),S=Object(n.useRef)(null),P=Object(n.useCallback)(()=>{l&&l(),g(!1)},[l]);Object(n.useEffect)(()=>P(),[P,r]),Object(n.useEffect)(()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&P()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[P]),Object(n.useEffect)(()=>()=>u(),[u]);const R=Object(n.useRef)(null),w=Object(n.useCallback)(e=>{const t=e.target.value;j(t),R.current&&clearTimeout(R.current),t.length>2?(O(!0),g(!0),b(!0),R.current=setTimeout(()=>{i.a.getSuggestions(t,{limit:5,page:1},null===m||void 0===m?void 0:m.token).then(e=>{var t,a,n,s,o,c;O(!1),console.log("Search API Response:",e);const l=(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.items)||(null===(n=e.data)||void 0===n?void 0:n.items)||[],i=(null===(s=e.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.itemMalls)||(null===(c=e.data)||void 0===c?void 0:c.itemMalls)||[];console.log("Extracted search products:",l),console.log("Extracted search itemMalls:",i),N(l),y(i)}).catch(e=>{console.error("Search API Error:",e),O(!1),N([]),y([])})},800)):b(!1)},[null===m||void 0===m?void 0:m.token]),x=c()("search search--location--".concat(t),a,{"search--suggestions-open":h,"search--has-suggestions":E}),L="mobile-header"!==t?"":s.a.createElement("button",{className:"search__button search__button--type--close",type:"button",onClick:P},s.a.createElement(d.o,null));return s.a.createElement("div",{className:x,ref:S,onBlur:()=>{setTimeout(()=>{document.activeElement&&document.activeElement!==document.body&&S.current&&!S.current.contains(document.activeElement)&&P()},10)}},s.a.createElement("div",{className:"search__body"},s.a.createElement("form",{style:{borderRadius:"10px"},className:"search__form",action:"".concat("/satdik","/products/search")},s.a.createElement("input",{style:{borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},ref:o,onChange:w,onFocus:()=>{g(!0)},onKeyDown:e=>{27===e.which&&P()},value:C,className:"search__input",name:"keyword",placeholder:"Cari produk search...","aria-label":"Site search",type:"text",autoComplete:"off"}),s.a.createElement("button",{className:"search__button search__button--type--submit",type:"submit",style:{borderTopRightRadius:"10px",borderBottomRightRadius:"10px"}},s.a.createElement(d.w,null)),L),s.a.createElement(_,{className:"search__suggestions",context:t,itemMalls:f,products:v,isLoading:k,query:C})))});t.a=Object(l.j)(Object(r.b)(e=>({customer:e.customer}),null)(v))},387:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(34),c=a.n(o),l=a(40),i=a(193),r=a(39),m=a(169),u=a(73),d=a(185),p=a(233);class h extends n.Component{constructor(e){super(e),this.handleOpenSearch=()=>{this.setState(()=>({searchOpen:!0}))},this.handleCloseSearch=()=>{this.setState(()=>({searchOpen:!1}))},this.state={searchOpen:!1},this.searchInput=s.a.createRef()}componentDidUpdate(e,t){const{searchOpen:a}=this.state;a&&a!==t.searchOpen&&this.searchInput.current&&this.searchInput.current.focus()}render(){const{openMobileMenu:e,miniCart:t,auth:a}=this.props,{searchOpen:n}=this.state,o=c()("mobile-header__search",{"mobile-header__search--open":n});return s.a.createElement("div",{className:"mobile-header"},s.a.createElement("div",{className:"mobile-header__panel"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"mobile-header__body"},s.a.createElement("button",{type:"button",className:"mobile-header__menu-button",onClick:e},s.a.createElement(m.q,null)),s.a.createElement(r.b,{to:"/",className:"mobile-header__logo"},s.a.createElement(i.LazyLoadImage,{width:"100%",height:"100%",effect:"opacity",alt:"logo siplah",src:"".concat("/satdik","/images/logo.png")})),s.a.createElement(p.a,{context:"mobile-header",className:o,inputRef:this.searchInput,onClose:this.handleCloseSearch}),s.a.createElement("div",{className:"mobile-header__indicators"},s.a.createElement(d.a,{className:"indicator--mobile indicator--mobile-search d-md-none",onClick:this.handleOpenSearch,icon:s.a.createElement(m.w,null)}),a&&s.a.createElement(d.a,{className:"indicator--mobile",url:"/shop/cart",value:null===t||void 0===t?void 0:t.totalAllProduct,icon:s.a.createElement(m.j,null)}))))))}}const g={openMobileMenu:u.c};t.default=Object(l.b)(e=>({cart:e.cart,miniCart:e.miniCart,auth:e.auth}),g)(h)}}]);
//# sourceMappingURL=20.42451315.chunk.js.map