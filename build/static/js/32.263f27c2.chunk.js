(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[32],{355:function(e,a,t){"use strict";t.r(a);var o=t(1),n=t.n(o),l=t(46),r=t(9),s=t(29),m=t.n(s),c=t(136),i=t(15),d=t(37),u=t(36),g=t(21),p=t(19),b=t(34),h=t(25);const E={loginCustomer:d.b,addMiniCart:g.a,customerAdd:u.a};a.default=Object(r.j)(Object(b.b)(null,E)((function(e){const[a,t]=Object(o.useState)({}),[r,s]=Object(o.useState)(!1),d=e=>{const{value:o,name:n}=e.target;t({...a,[n]:o})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.a,null,n.a.createElement("title",null,"Login Customer \u2014 "+c.a.name)),n.a.createElement("div",{className:"block mt-4"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 offset-md-2"},n.a.createElement("div",{className:"card flex-grow-1 mb-md-0"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h4",{className:"card-title"},"Masuk untuk berbelanja"),n.a.createElement("a",{href:"https://sso.datadik.kemdikbud.go.id/app/46703e0b-320d-47d1-a058-21ae14e36b99",style:{borderRadius:"10px",color:"white",marginTop:"10px",marginBottom:"10px"},className:"btn btn-danger btn-block btn-lg",rel:"noopener noreferrer"},n.a.createElement("i",{class:"fas fa-sign-in-alt"})," Akun Dapodik"),n.a.createElement("h6",{className:"text-line"},"atau masuk dengan"),n.a.createElement("form",{onSubmit:t=>(void 0!==t&&t.preventDefault(),s(!0),new Promise(t=>{i.a.login(a).then(a=>{const{data:o,status:n}=a,l=o;200===n.code?(localStorage.setItem("token",l),localStorage.setItem("auth","true"),i.a.getMiniCart(l).then(a=>{const{data:t}=a;e.addMiniCart(t)}),i.a.getCustomer(l).then(a=>{const{data:t}=a;localStorage.setItem("userData",JSON.stringify({...t,token:l})),e.customerAdd({...t,token:l}),e.loginCustomer({type:h.a,auth:!0,isLogin:!0}),p.b.success("Login Berhasil"),s(!1),e.history.push("/account/dashboard")})):(s(!1),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),e.loginCustomer({type:h.a,auth:!1,isLogout:!0}),e.customerAdd({}),p.b.error("Login Gagal",{toastId:"logout"})),t()})}))},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"login-email"},"Email"),n.a.createElement("input",{id:"login-email",onChange:d,type:"email",name:"email",className:"form-control",placeholder:"Enter email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"login-password"},"Kata Sandi"),n.a.createElement("input",{id:"login-password",onChange:d,name:"password",type:"password",className:"form-control",placeholder:"Password"})),n.a.createElement("button",{type:"submit",style:{borderRadius:"10px",color:"white",marginTop:"10px",marginBottom:"10px"},className:m()("btn btn-lg btn-block btn-primary",{"btn-loading":r})},"Login")))))))))})))}}]);
//# sourceMappingURL=32.263f27c2.chunk.js.map