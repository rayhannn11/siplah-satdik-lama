(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[22,42],{142:function(e,t,a){"use strict";var s=a(6),o=a.n(s);const r={getNewProducts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const r={limit:e.limit||10,page:e.page||1};return a&&(r.keyword=a),e.sort&&(r.sort=e.sort),e.locationName&&(r.filter_province=e.locationName),e.locationId&&(r.filter_locationId=e.locationId),e.categoryId&&(r.filter_categoryId=e.categoryId),e.longitude&&(r.longitude=e.longitude),e.latitude&&(r.latitude=e.latitude),Object.keys(t).forEach(e=>{r["filter_"+e]=t[e]}),fetch("https://siplah.eurekabookhouse.co.id/api/product/shortProduct?"+o.a.stringify(r),{headers:{"Content-Type":"application/json",Authorization:s||""}}).then(e=>e.json())},getStores:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const r={...e,keyword:a};return Object.keys(t).forEach(e=>{r["filter_"+e]=t[e]}),fetch("https://siplah.eurekabookhouse.co.id/api/mall?"+o.a.stringify(r),{headers:{"Content-Type":"application/json",Authorization:s||""}}).then(e=>e.json())},getStore:e=>{const t={slug:e};return fetch("https://siplah.eurekabookhouse.co.id/api/mall?"+o.a.stringify(t)).then(e=>e.json())},addReviewStore:(e,t)=>fetch("https://siplah.eurekabookhouse.co.id/api/mall/review",{method:"post",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then(e=>e.json()),searchStore:e=>fetch("https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword="+e,{method:"get",headers:{"Content-Type":"application/json"}}).then(e=>e.json()),uploadExcel:(e,t)=>{const a=new FormData;return a.append("file",e),a.append("mall_id",t),fetch("https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV",{method:"POST",body:a}).then(e=>e.json())}};t.a=r},166:function(e,t,a){"use strict";t.a=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}));return new String(t)}},178:function(e,t,a){"use strict";a.r(t);var s=a(1),o=a.n(s),r=a(9),l=a(6),n=a.n(l),c=a(34),i=a(135),m=a(167),d=a(168),u=a(171),p=a(57),g=a(170),h=a(58);function f(e){const t=n.a.parse(e),a={page:1,limit:6,from:"",fromProductId:""};return"string"===typeof t.page&&(a.page=parseFloat(t.page)),"string"===typeof t.limit&&(a.limit=parseFloat(t.limit)),"string"===typeof t.sort&&(a.sort=t.sort),"string"===typeof t.keyword&&(a.keyword=t.keyword),"string"===typeof t.from&&(a.from=t.from),"string"===typeof t.fromProductId&&(a.fromProductId=t.fromProductId),"string"===typeof t.categoryId&&(a.categoryId=t.categoryId),a}function E(e){const t=n.a.parse(e),a={};return Object.keys(t).forEach(e=>{const s=e.match(/^filter_([-_A-Za-z0-9]+)$/);if(!s)return;const o=s[1];a[o]=t[e]}),a}const b={init:!1,categoryIsLoading:!0,category:null,productsListIsLoading:!0,productsList:null,options:{},filters:{}};function v(e,t){switch(t.type){case"FETCH_CATEGORY_SUCCESS":return{...e,init:!0,categoryIsLoading:!1,category:t.category};case"FETCH_PRODUCTS_LIST":return{...e,productsListIsLoading:!0};case"FETCH_PRODUCTS_LIST_SUCCESS":return{...e,productsListIsLoading:!1,productsList:t.productsList};case"SET_OPTION_VALUE":return{...e,options:{...e.options,page:1,[t.option]:t.value}};case"SET_FILTER_VALUE":return{...e,options:{...e.options,page:1},filters:{...e.filters,[t.filter]:t.value}};case"RESET_FILTERS":return{...e,options:{page:1,limit:6},filters:{}};case"RESET":return e.init?b:e;default:throw new Error}}function y(e){const[t,a]=[f(s=window.location.search),E(s)];var s;return{...e,options:t,filters:a}}function N(e){const{columns:t,viewMode:a,sidebarPosition:l,store:c,forAct:h,doHandleChooseProduct:f,mainProduct:E,customer:N,doHandleFetchCompareList:_}=e,k=3===t?"mobile":"always",[w,x]=Object(s.useReducer)(v,b,y);let j,{slug:O,categoryId:I}=Object(r.i)();if(Object(s.useEffect)(()=>{const e=function(e,t){const a={};return 1!==e.page&&(a.page=e.page),6!==e.limit&&(a.limit=e.limit),""!==e.sort&&(a.sort=e.sort),""!==e.keyword&&(a.keyword=e.keyword),""!==e.from&&(a.from=e.from),""!==e.fromProductId&&(a.fromProductId=e.fromProductId),""!==e.categoryId&&(a.categoryId=e.categoryId),Object.keys(t).filter(e=>!!t[e]).forEach(e=>{a["filter_"+e]=t[e]}),n.a.stringify(a,{encode:!1})}(w.options,w.filters),t=`${window.location.pathname}${e?"?":""}${e}`;window.history.replaceState(null,"",t)},[w.options,w.filters]),""!==c&&void 0!==c&&(O=c),Object(s.useEffect)(()=>{let e=!1;return x({type:"FETCH_PRODUCTS_LIST"}),p.a.getProducts({...w.options},{...w.filters},O,I,N.token).then(t=>{const{data:a}=t;e||x(h?{type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:a}:{type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:{...a,filters:a.filters.filter(e=>"category"!==e.type)}})}),()=>{e=!0}},[x,O,c,I,w.categoryName,w.options,w.filters,N.token]),w.productsListIsLoading&&!w.productsList)return o.a.createElement(i.default,null);const S=o.a.createElement(u.a,{forAct:h,doHandleChooseProduct:f,isLoading:w.productsListIsLoading,productsList:w.productsList,mainProduct:E,sorts:w.productsList.sorts,options:w.options,filters:w.filters,dispatch:x,layout:a,doHandleFetchCompareList:_,grid:`grid-${t}-${t>3?"full":"sidebar"}`,offcanvas:k});let C=o.a.createElement(m.a,{offcanvas:k},o.a.createElement(d.a,null,o.a.createElement(g.a,{title:"Filter",offcanvas:k,filters:w.productsList.filters,values:w.filters,dispatch:x})));if("compare"===h&&(C=o.a.createElement(m.a,{offcanvas:k,style:{position:"sticky",top:"10px",left:0}},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("img",{alt:"",src:E.image,style:{width:"100%",opacity:.7,display:"block",height:"auto",transition:".5s ease",backfaceVisibility:"hidden"}})),o.a.createElement("div",{className:"col-12 text-center",style:{position:"absolute",top:" 50%",left:" 50%",transform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)",textAlign:"center",background:"rgba(0,0,0,.5)",padding:"17px",color:"white"}},o.a.createElement("h5",null,E.name),o.a.createElement("h6",null,E.priceCurrencyFormat),o.a.createElement("h6",null,"Jumlah : ",E.qty),o.a.createElement("span",{class:"badge badge-primary"},"Barang Yang Dibandingkan"))))))),t>4)j=o.a.createElement("div",{className:"container mt-5"},o.a.createElement("div",{className:"block"},S),C);else{const e=o.a.createElement("div",{className:"shop-layout__sidebar"},C);j=o.a.createElement("div",{style:{background:"rgb(236,236,237)"},className:"pt-5"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"shop-layout shop-layout--sidebar--"+l},"start"===l&&e,o.a.createElement("div",{className:"shop-layout__content"},o.a.createElement("div",{className:"block"},S)),"end"===l&&e)))}return o.a.createElement(o.a.Fragment,null,j)}N.defaultProps={columns:3,viewMode:"grid",sidebarPosition:"start"};t.default=Object(c.b)(e=>({sidebarState:e.sidebar,page:e.category,customer:e.customer}),()=>({sidebarClose:h.b}))(N)},210:function(e,t,a){"use strict";var s=a(4),o=a(10),r=a(1),l=a.n(r),n=a(3),c=a.n(n),i=a(29),m=a.n(i),d=a(139),u={tag:d.n,className:c.a.string,cssModule:c.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,n=Object(o.a)(e,["className","cssModule","tag"]),c=Object(d.j)(m()(t,"modal-footer"),a);return l.a.createElement(r,Object(s.a)({},n,{className:c}))};p.propTypes=u,p.defaultProps={tag:"div"},t.a=p},376:function(e,t,a){"use strict";a.r(t);var s=a(1),o=a.n(s),r=a(46),l=a(9),n=a(33),c=a(136),i=a(142),m=a(23),d=a(135),u=a(178),p=a(34),g=a(240),h=a(273),f=a(209),E=a(29),b=a.n(E),v=a(61),y=a(83),N=a(166);const _={addChatList:v.a};var k=Object(p.b)(e=>({customer:e.customer}),_)(e=>{const{isOpen:t,toggle:a,store:r,customer:l}=e,[n,c]=Object(s.useState)([]),[i,m]=Object(s.useState)(""),[d,u]=Object(s.useState)(""),p=Object(s.useCallback)(e=>{c(e)},[]),E=Object(s.useCallback)(e=>{e&&e.scrollIntoView({smoth:!0})},[]);Object(s.useEffect)(()=>(fetch(`https://siplah.eurekabookhouse.co.id/api_chat/room?customerId=${l.id}&sellerId=${r.id}`).then(e=>e.json()).then(e=>{y.a.database().ref("/contact/customer/"+e.room).on("value",t=>{null===t.val()&&y.a.database().ref("/contact/customer/"+e.room).set(""+Object(N.a)())}),u(e.room)}),()=>{}),[l.id,r.id]),Object(s.useEffect)(()=>{if(void 0!==l.id||void 0!==r.id){var e=new FormData;e.append("customerId",l.id),e.append("seller_id",r.id),e.append("role","seller"),fetch("https://siplah.eurekabookhouse.co.id/api/backendseller/Mychat/readChat",{method:"POST",body:e,redirect:"follow"}).then(e=>{y.a.database().ref("/unread-message/customer/"+l.id).set(""+Object(N.a)()),e.text()})}},[r.id]),Object(s.useEffect)(()=>{y.a.database().ref("/contact/customer/"+d).on("value",e=>{fetch(`https://siplah.eurekabookhouse.co.id/api_chat/message?customerId=${l.id}&sellerId=${r.id}`).then(e=>e.json()).then(e=>{p(e)})})},[r.id,l.id,p,d]),Object(s.useEffect)(()=>{let e=!1;if(!e){var t=new Headers,a=new FormData;return a.append("customerId",l.id),a.append("seller_id",r.id),fetch("https://siplah.eurekabookhouse.co.id/api/backendseller/Mychat/checkRoom",{method:"POST",headers:t,body:a,redirect:"follow"}).then(e=>{e.text()}),()=>{e=!0}}},[]);return o.a.createElement(g.a,{isOpen:t,toggle:a,size:"xl",style:{overflowY:"hidden"}},o.a.createElement(h.a,{toggle:a},o.a.createElement("h6",null,r.name)),o.a.createElement(f.a,null,o.a.createElement("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},o.a.createElement("div",{className:"chat-container"},o.a.createElement("ul",{className:"chat-box chatContainerScroll",style:{maxHeight:"40vh",overflowY:"auto",overflowX:"hidden"}},n.map((e,t)=>{const a=n.length-1===t;return o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{key:t,ref:a?E:null,className:b()("",{"chat-left":"seller"===e.role,"chat-right mr-2":"customer"===e.role})},"customer"===e.role&&o.a.createElement("div",{className:"chat-hour"},e.time),o.a.createElement("div",{className:b()("chat-text text-light",{"bg-info":"seller"===e.role,"bg-secondary":"customer"===e.role}),style:{whiteSpace:"pre-line"}},o.a.createElement("h6",{className:"font-weight-bold mb-1 text-capitalize"},"seller"===e.role?e.sellerName:e.customerName),o.a.createElement("span",{style:{wordWrap:"anywhere"}},e.text)),"seller"===e.role&&o.a.createElement("div",{className:"chat-hour"},e.time)))})),o.a.createElement("div",{className:"form-group mt-3 mb-1"},o.a.createElement("textarea",{className:"form-control",rows:3,style:{resize:"none"},value:i,onChange:e=>m(e.target.value),autoFocus:!0,placeholder:"Tulis Pesan Anda..."})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{type:"button",onClick:()=>{if(""!==i){var e=new Headers,t=new FormData;t.append("customerId",l.id),t.append("seller_id",r.id),t.append("message",i),t.append("role","customer"),fetch("https://siplah.eurekabookhouse.co.id/api/backendseller/mychat/addchattoRoom",{method:"POST",headers:e,body:t,redirect:"follow"}).then(async e=>{y.a.database().ref("/unread-message/seller/"+r.id).set(""+Object(N.a)()),y.a.database().ref("/contact/seller/"+d).set(""+Object(N.a)()),c([...n,await e.json()]),m("")})}},className:b()("btn btn-primary btn-lg btn-block")},"Kirim Pesan"))))))}),w=a(143),x=a(210),j=a(57),O=a(141);var I=e=>{const{toggle:t,isOpen:a,storeId:r}=e,[l,n]=Object(s.useState)({items:[]}),[c,i]=Object(s.useState)({page:1,limit:5});Object(s.useEffect)(()=>{j.a.getMallReviews(r,c).then(e=>{n(e.data)})},[c]);let m=[];return l.items&&(m=l.items.map((e,t)=>o.a.createElement("li",{key:t,className:"reviews-list__item"},o.a.createElement("div",{className:"review"},o.a.createElement("div",{className:" review__content"},o.a.createElement("div",{className:" review__author"},e.customerName),o.a.createElement("div",{className:" review__rating"},o.a.createElement(w.a,{value:e.rate})),o.a.createElement("div",{className:" review__text"},e.text),o.a.createElement("div",{className:" review__date"},e.createdAt)))))),o.a.createElement(g.a,{isOpen:a,toggle:()=>t(!a),size:"xl"},o.a.createElement(h.a,{toggle:()=>t(!a)},o.a.createElement("h5",null,"Ulasan Toko")),o.a.createElement(f.a,null,o.a.createElement("div",{className:"reviews-view",style:{maxHeight:"50vh",overflowY:"auto",overflowX:"hidden"}},o.a.createElement("div",{className:"reviews-view__list"},o.a.createElement("div",{className:"reviews-list"},m.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("ol",{className:"reviews-list__content"},m)):o.a.createElement("h5",{className:"text-center"},"Belum Ada Ulasan"))))),m.length>0&&o.a.createElement(x.a,{className:"align-items-center justify-content-center"},o.a.createElement("div",{className:"reviews-list__pagination"},o.a.createElement(O.a,{onPageChange:e=>i({...c,page:e}),current:l.page,siblings:2,total:l.pages}))))};const S={store:null,storeIsLoading:!0};function C(e,t){switch(t.type){case m.m:return{...e,storeIsLoading:!0};case m.n:return{...e,storeIsLoading:!1,store:t.store};default:throw new Error}}t.default=Object(p.b)(e=>({auth:e.auth}),null)(e=>{const{slug:t}=Object(l.i)(),[a,p]=Object(s.useReducer)(C,S),[g,h]=Object(s.useState)(!1),[f,E]=Object(s.useState)(!1),{store:b,storeIsLoading:v}=a;Object(s.useEffect)(()=>(p({type:m.m}),i.a.getStore(t).then(e=>{const{data:t,status:a}=e;200===a.code?p({type:m.n,store:t}):p({type:m.n,store:null})}),()=>{}),[t]);const y=()=>{h(!g)};return v?o.a.createElement(d.default,null):null==b?o.a.createElement("div",{className:"block block-empty "},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"block-empty__body"},o.a.createElement("div",{className:"block-empty__message"},"Toko Tidak Ditemukan"),o.a.createElement("div",{className:"block-empty__actions"},o.a.createElement(n.b,{to:"/store",className:"btn btn-primary btn-sm"},"Cari Toko"))))):o.a.createElement("div",{className:"pt-4",style:{backgroundColor:"rgb(236, 236, 237)"}},o.a.createElement(r.a,null,o.a.createElement("title",null,`${b.name} \u2014 ${c.a.name}`)),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"card shadow",style:{borderRadius:"20px"}},o.a.createElement("div",{style:{display:"block",width:"100%",maxWidth:"1200px",maxHeight:"100%",position:"relative",paddingTop:"30.25%",overflow:"hidden",backgroundColor:"rgb(255,247,241)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",borderBottom:"2px solid #F0F0F0"}},o.a.createElement("img",{alt:"",src:b.image.header,style:{display:"block",position:"absolute",height:"100%",objectFit:"contain",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}})),o.a.createElement("div",{className:"card-body position-relative",style:{borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",backgroundColor:"rgb(255,247,241)"}},o.a.createElement("div",{className:"rounded-circle shadow d-flex justify-content-center position-absolute img-profile__store bg-white",style:{background:` no-repeat center/75% url(${b.image.primary})`}}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4"},o.a.createElement("h4",{className:"m-0"},b.name),o.a.createElement("span",null,b.location.province," | Total ",b.totalProduct," Produk")),o.a.createElement("div",{className:"offset-md-2 col-md-4"},e.auth&&o.a.createElement("button",{className:"btn btn-sm btn-primary d-block mt-1",onClick:y},"Chat Penjual"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("small",{className:"store-info__title mt-2"},"Nama PIC"),o.a.createElement("small",{className:"mt-0 text-uppercase"},b.pic.name),o.a.createElement("small",{className:"store-info__title mt-2"},"Telp PIC"),o.a.createElement("small",{className:"mt-0"},b.pic.phone),o.a.createElement("small",{className:"store-info__title mt-2"},"Jabatan PIC"),o.a.createElement("small",{className:"mt-0 text-uppercase"},b.pic.position)),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("small",{className:"store-info__title"},"Alamat Toko"),o.a.createElement("small",{className:"mt-0"},b.location.address),o.a.createElement("small",{className:"store-info__title"},"Email Toko"),o.a.createElement("small",{className:"mt-0"},b.email),o.a.createElement("small",{className:"store-info__title"},"Jenis Usaha"),o.a.createElement("small",{className:"mt-0"},b.type),o.a.createElement("small",{className:"store-info__title"},"Rating Toko"),o.a.createElement("div",{className:"product__rating mt-2"},o.a.createElement("div",{className:"product__rating-stars"},o.a.createElement(w.a,{value:b.averageRating})),o.a.createElement("div",{className:"product__rating-legend",style:{color:"blue",cursor:"pointer"},onClick:()=>E(!f)},o.a.createElement("u",null,"(",b.totalRating+" Ulasan",")"))))))),o.a.createElement(I,{storeId:b.id,toggle:E,isOpen:f})),o.a.createElement(u.default,{forAct:"store"}),e.auth&&g&&o.a.createElement(k,{isOpen:g,toggle:y,store:b}))})}}]);
//# sourceMappingURL=22.0a56f9ba.chunk.js.map