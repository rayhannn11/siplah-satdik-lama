{"version":3,"sources":["components/blocks/BlockLoader.jsx","components/shared/AsyncAction.jsx","services/utils.js","components/header/Indicator.jsx","components/header/Suggestions.jsx","components/header/Search.jsx","components/mobile/MobileHeader.jsx"],"names":["BlockLoader","props","React","createElement","Object","assign","className","AsyncAction","Component","constructor","super","canceled","run","action","this","loading","state","setState","then","componentWillUnmount","render","url","home","catalog","category","slug","product","mall","id","getCategoryParents","parent","Indicator","PureComponent","_this$props$openNotif","setWrapperRef","node","wrapperRef","handleOutsideClick","event","open","contains","target","close","handleButtonClick","onClick","dropdown","preventDefault","toggle","openNotif","tooltipOpen","componentDidMount","document","addEventListener","componentDidUpdate","prevProps","prevState","onOpen","onClose","removeEventListener","closeNotif","icon","button","value","undefined","title","Link","to","type","classes","classNames","ref","Suggestions","memo","context","products","itemMalls","cartAddItem","isLoading","customer","query","rootClasses","console","log","list","map","_product$mall","price","primary","parseFloat","isTaxExempt","taxExempt","ppnTagItem","dppPph","Math","ceil","floor","dppNilaiLain","Number","ppn","formattedPrice","round","toLocaleString","primaryCurrencyFormat","key","images","length","src","alt","name","style","fontSize","color","Fragment","ppnRate","token","Promise","resolve","history","push","handleAddCart","_ref","Cart16Svg","listToko","_mall$location","image","location","city","ArrowRoundedRight6x9Svg","mapDispatchToProps","withRouter","connect","Search","inputRef","cancelFn","setCancelFn","useState","suggestionsOpen","setSuggestionsOpen","hasSuggestions","setHasSuggestions","suggestedProducts","setSuggestedProducts","suggestedItemMalls","setSuggestedItemMalls","isLoadingSuggestions","setIsLoadingSuggestions","setQuery","wrapper","useRef","useCallback","useEffect","onGlobalClick","current","debounceRef","handleChangeQuery","clearTimeout","setTimeout","shopApi","getSuggestions","limit","page","response","_response$data","_response$data$data","_response$data2","_response$data3","_response$data3$data","_response$data4","data","items","catch","error","closeButton","Cross20Svg","onBlur","handleBlur","activeElement","body","borderRadius","borderTopLeftRadius","borderBottomLeftRadius","onChange","onFocus","handleFocus","onKeyDown","which","placeholder","aria-label","autoComplete","borderTopRightRadius","borderBottomRightRadius","Search20Svg","MobileHeader","handleOpenSearch","searchOpen","handleCloseSearch","searchInput","createRef","focus","openMobileMenu","miniCart","auth","searchClasses","Menu18x14Svg","LazyLoadImage","width","height","effect","totalAllProduct","Cart20Svg","mobileMenuOpen","cart"],"mappings":"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","file":"static/js/20.c16672a3.chunk.js","sourcesContent":["// react\nimport React from \"react\";\n\nexport default function BlockLoader(props) {\n    return (\n        <div className=\"block-loader\" {...props}>\n            <div className=\"block-loader__spinner\" />\n        </div>\n    );\n}\n","// react\nimport { Component } from 'react';\n\n// third-party\nimport PropTypes from 'prop-types';\n\nclass AsyncAction extends Component {\n    canceled = false;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: false,\n        };\n    }\n\n    componentWillUnmount() {\n        this.canceled = true;\n    }\n\n    run = () => {\n        const { action } = this.props;\n        const { loading } = this.state;\n\n        if (loading || !action) {\n            return;\n        }\n\n        this.setState({ loading: true });\n\n        action().then(() => {\n            if (this.canceled) {\n                return;\n            }\n\n            this.setState({ loading: false });\n        });\n    };\n\n    render() {\n        const { render } = this.props;\n        const { loading } = this.state;\n\n        if (render) {\n            return render({ run: this.run, loading });\n        }\n\n        return null;\n    }\n}\n\nAsyncAction.propTypes = {\n    action: PropTypes.func,\n    render: PropTypes.func,\n};\n\nexport default AsyncAction;\n","export const url = {\n    home: () => \"/\",\n\n    catalog: () => \"/shop/catalog\",\n\n    category: (category) => `/shop/catalog/${category.slug}`,\n\n    product: (product) => `/product/${product.mall.id}/${product.slug}`,\n\n    mall: (mall) => `/store/${mall.slug}`,\n};\n\nexport function getCategoryParents(category) {\n    return category.parent ? [...getCategoryParents(category.parent), category.parent] : [];\n}\n","// react\nimport React, { PureComponent } from \"react\";\n\n// third-party\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\n\nclass Indicator extends PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: this.props.openNotif ?? false,\n            tooltipOpen: false,\n        };\n    }\n\n    componentDidMount() {\n        document.addEventListener(\"mousedown\", this.handleOutsideClick);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { open } = this.state;\n        const { onOpen, onClose } = this.props;\n        if (open !== prevState.open) {\n            if (open && onOpen) {\n                onOpen();\n            }\n            if (!open && onClose) {\n                onClose();\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"mousedown\", this.handleOutsideClick);\n    }\n\n    setWrapperRef = (node) => {\n        this.wrapperRef = node;\n    };\n\n    handleOutsideClick = (event) => {\n        const { open } = this.state;\n\n        if (this.wrapperRef && !this.wrapperRef.contains(event.target) && open) {\n            this.close();\n        }\n    };\n\n    handleButtonClick = (event) => {\n        const { onClick, dropdown } = this.props;\n\n        if (dropdown) {\n            event.preventDefault();\n        }\n\n        this.toggle();\n\n        if (onClick) {\n            onClick(event);\n        }\n    };\n\n    toggle() {\n        this.setState((state) => ({\n            open: !state.open,\n        }));\n    }\n\n    open() {\n        this.setState(() => ({\n            open: true,\n        }));\n    }\n\n    close() {\n        this.setState(() => ({\n            open: false,\n        }));\n\n        if (this.props.closeNotif) {\n            this.props.closeNotif();\n        }\n    }\n\n    render() {\n        const { open } = this.state;\n        const { url, className, icon } = this.props;\n        let { value, dropdown } = this.props;\n        let button;\n\n        if (value !== undefined) {\n            value = <span className=\"indicator__value\">{value}</span>;\n        }\n\n        const title = (\n            <span className=\"indicator__area\">\n                {icon}\n                {value}\n            </span>\n        );\n\n        if (url) {\n            button = (\n                <Link to={url} className=\"indicator__button\" onClick={this.handleButtonClick}>\n                    {title}\n                </Link>\n            );\n        } else {\n            button = (\n                <button type=\"button\" className=\"indicator__button\" onClick={this.handleButtonClick}>\n                    {title}\n                </button>\n            );\n        }\n\n        if (dropdown) {\n            dropdown = <div className=\"indicator__dropdown\">{dropdown}</div>;\n        }\n\n        const classes = classNames(`indicator indicator--trigger--click ${className}`, {\n            \"indicator--opened\": open,\n        });\n\n        return (\n            <div className={classes} ref={this.setWrapperRef}>\n                {button}\n                {dropdown}\n            </div>\n        );\n    }\n}\n\nIndicator.propTypes = {\n    /** indicator value */\n    value: PropTypes.number,\n    /** the component that will be shown in the dropdown */\n    dropdown: PropTypes.node,\n    /** indicator icon */\n    icon: PropTypes.node,\n    /** indicator url */\n    url: PropTypes.string,\n    /** callback function that is called when the dropdown is opened */\n    onOpen: PropTypes.func,\n    /** callback function that is called when the dropdown is closed */\n    onClose: PropTypes.func,\n};\n\nexport default Indicator;\n","// react\nimport React from \"react\";\n\n// third-party\nimport classNames from \"classnames\";\nimport { connect } from \"react-redux\";\nimport { Link, withRouter } from \"react-router-dom\";\n\n// application\nimport AsyncAction from \"../shared/AsyncAction\";\nimport { ArrowRoundedRight6x9Svg, Cart16Svg, LocationPin } from \"../../svg\";\nimport { cartAddItem } from \"../../store/cart\";\nimport { url } from \"../../services/utils\";\nimport BlockLoader from \"../blocks/BlockLoader\";\n\nconst Suggestions = React.memo((props) => {\n    const { context, className, products, itemMalls, cartAddItem, isLoading, customer, query } = props;\n    const rootClasses = classNames(`suggestions suggestions--location--${context}`, className);\n\n    const handleAddCart = (product) => {\n        if (customer.token !== undefined && customer.token !== \"\") {\n            return cartAddItem(product, customer.token);\n        } else {\n            return new Promise((resolve) => {\n                // window.open(\"https://sso.datadik.kemdikbud.go.id/app/3D1C4271-7C02-487E-B330-7294B7EB4564\", \"_self\");\n                props.history.push(\"/login\");\n                resolve();\n            });\n        }\n    };\n\n    // PPN rate - standard Indonesian VAT rate is 11%\n    const ppnRate = 0.12;\n\n    console.log(products, \"search product\");\n    console.log(itemMalls, \"search itemMalls\");\n\n    // Inside the products.map function in your Suggestions component\n\n    const list =\n        products &&\n        products.map((product) => {\n            // Get base price\n            const price =\n                typeof product.price.primary === \"number\"\n                    ? product.price.primary\n                    : parseFloat(product.price.primary || 0);\n\n            // Check if product is tax exempt (you may need to adjust this condition based on your actual data structure)\n            const isTaxExempt = product.taxExempt || product.isTaxExempt || !product.ppnTagItem || false;\n\n            // PPN amount calculation\n            const ppnAmount = isTaxExempt ? 0 : Math.ceil((price / 1.11) * 0.11);\n\n            const dppPph = Math.floor(price / 1.11);\n\n            const dppNilaiLain = Math.ceil((11 / 12) * Number(dppPph));\n            const ppn = Math.ceil(dppNilaiLain * ppnRate);\n\n            // Format price to show rounded amount without decimals if needed\n            const formattedPrice = isTaxExempt\n                ? `Rp ${Math.round(price).toLocaleString(\"id-ID\")}`\n                : product.price.primaryCurrencyFormat;\n\n            return (\n                <li key={product.id} className=\"suggestions__item\">\n                    {/* Product image section */}\n                    {product.images && product.images.length > 0 && (\n                        <div className=\"suggestions__item-image product-image\">\n                            <div className=\"product-image__body\">\n                                <img className=\"product-image__img\" src={product.images[0]} alt=\"\" />\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Product info section */}\n                    <div className=\"suggestions__item-info\">\n                        <Link className=\"suggestions__item-name\" to={url.product(product)}>\n                            {product.name}\n                        </Link>\n                        <div className=\"suggestions__item-meta\">{product.mall?.name}</div>\n                    </div>\n\n                    {/* Price and PPN section */}\n                    <div className=\"suggestions__item-price\">\n                        {formattedPrice}\n                        <div className=\"suggestions__item-ppn\" style={{ fontSize: \"11px\", color: \"#6c757d\" }}>\n                            {isTaxExempt ? (\n                                <>\n                                    <div style={{ color: \"#28A745\" }}>Bebas Pajak</div>\n                                    <div>DPP PPH: {formattedPrice}</div>\n                                    <div>DPP Nilai Lain: Rp 0</div>\n                                    <div>PPN 12%: Rp 0</div>\n                                </>\n                            ) : (\n                                <>\n                                    <div style={{ color: \"#28A745\" }}>Harga Termasuk Pajak</div>\n\n                                    <div>DPP PPH: Rp {dppPph.toLocaleString(\"id-ID\")}</div>\n                                    <div>DPP Nilai Lain: Rp {dppNilaiLain.toLocaleString(\"id-ID\")}</div>\n                                    <div>\n                                        PPN {ppnRate * 100}%: Rp {ppn.toLocaleString(\"id-ID\")}\n                                    </div>\n                                </>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Add to cart button (for header context) */}\n                    {context === \"header\" && (\n                        <div className=\"suggestions__item-actions\">\n                            <AsyncAction\n                                action={() => handleAddCart(product)}\n                                render={({ run, loading }) => (\n                                    <button\n                                        type=\"button\"\n                                        onClick={run}\n                                        title=\"Add to cart\"\n                                        className={classNames(\"btn btn-primary btn-sm btn-svg-icon\", {\n                                            \"btn-loading\": loading,\n                                        })}\n                                    >\n                                        <Cart16Svg />\n                                    </button>\n                                )}\n                            />\n                        </div>\n                    )}\n                </li>\n            );\n        });\n\n    const listToko =\n        itemMalls &&\n        itemMalls.map((mall) => (\n            <li key={mall.id} className=\"suggestions__item\">\n                {mall.image && mall.image.primary && (\n                    <div className=\"suggestions__item-image product-image\">\n                        <div className=\"product-image__body\">\n                            <img className=\"product-image__img\" src={mall.image.primary} alt=\"\" />\n                        </div>\n                    </div>\n                )}\n                <div className=\"suggestions__item-info\">\n                    <Link className=\"suggestions__item-name\" to={`/store/${mall.slug}`}>\n                        {mall.name}\n                    </Link>\n                    <div className=\"suggestions__item-meta\">{mall.location?.city}</div>\n                </div>\n            </li>\n        ));\n\n    return (\n        <div className={rootClasses}>\n            {isLoading ? (\n                <BlockLoader />\n            ) : (\n                <ul className=\"suggestions__list\">\n                    <li className=\"suggestions__item\">\n                        <div>BARANG</div>\n                    </li>\n                    {list && list.length > 0 ? (\n                        <>\n                            {list}\n                            <li className=\"suggestions__item d-flex justify-content-center\">\n                                <Link\n                                    to={`/products/search?keyword=${query}`}\n                                    className=\"suggestions__item-name\"\n                                    style={{ color: \"#0E336D\" }}\n                                >\n                                    Lihat Produk Lainnya\n                                </Link>\n                            </li>\n                        </>\n                    ) : (\n                        <li className=\"d-flex justify-content-center py-3\">Produk tidak ditemukan</li>\n                    )}\n\n                    <li className=\"suggestions__item\">\n                        <div>TOKO</div>\n                    </li>\n                    {listToko && listToko.length > 0 ? (\n                        <>\n                            {listToko}\n                            <li className=\"suggestions__item\">\n                                <Link\n                                    to={`/store?keyword=${query}`}\n                                    className=\"suggestions__item-name d-flex justify-content-between align-items-center w-100\"\n                                >\n                                    <div style={{ color: \"#0E336D\" }}>Lihat Pencarian Toko \"{query}\" Lainnya</div>\n                                    <ArrowRoundedRight6x9Svg />\n                                </Link>\n                            </li>\n                        </>\n                    ) : (\n                        <li className=\"d-flex justify-content-center py-3\">Toko tidak ditemukan</li>\n                    )}\n                </ul>\n            )}\n        </div>\n    );\n});\n\nconst mapStateToProps = (state) => ({ customer: state.customer });\n\nconst mapDispatchToProps = {\n    cartAddItem,\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Suggestions));\n","// react\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\n\n// third-party\nimport classNames from \"classnames\";\nimport { withRouter } from \"react-router-dom\";\n\n// application\nimport shopApi from \"../../api/shop\";\nimport Suggestions from \"./Suggestions\";\nimport { Cross20Svg, Search20Svg } from \"../../svg\";\nimport { connect } from \"react-redux\";\n\nconst Search = React.memo((props) => {\n    const { context, className, inputRef, onClose, location, customer } = props;\n    const [cancelFn, setCancelFn] = useState(() => () => {});\n    const [suggestionsOpen, setSuggestionsOpen] = useState(false);\n    const [hasSuggestions, setHasSuggestions] = useState(false);\n    const [suggestedProducts, setSuggestedProducts] = useState([]);\n    const [suggestedItemMalls, setSuggestedItemMalls] = useState([]);\n    const [isLoadingSuggestions, setIsLoadingSuggestions] = useState(true);\n    const [query, setQuery] = useState(\"\");\n\n    const wrapper = useRef(null);\n    const close = useCallback(() => {\n        if (onClose) {\n            onClose();\n        }\n\n        setSuggestionsOpen(false);\n    }, [onClose]);\n\n    // Close suggestions when the location has been changed.\n    useEffect(() => close(), [close, location]);\n\n    // Close suggestions when a click has been made outside component.\n    useEffect(() => {\n        const onGlobalClick = (event) => {\n            if (wrapper.current && !wrapper.current.contains(event.target)) {\n                close();\n            }\n        };\n\n        document.addEventListener(\"mousedown\", onGlobalClick);\n\n        return () => document.removeEventListener(\"mousedown\", onGlobalClick);\n    }, [close]);\n\n    // Cancel previous typing.\n    useEffect(() => () => cancelFn(), [cancelFn]);\n\n    const handleFocus = () => {\n        setSuggestionsOpen(true);\n    };\n\n    const debounceRef = useRef(null);\n\n    const handleChangeQuery = useCallback(\n        (event) => {\n            const query = event.target.value;\n            setQuery(query);\n            if (debounceRef.current) {\n                clearTimeout(debounceRef.current);\n            }\n\n            if (query.length > 2) {\n                setIsLoadingSuggestions(true);\n                setSuggestionsOpen(true);\n                setHasSuggestions(true);\n\n                debounceRef.current = setTimeout(() => {\n                    const options = { limit: 5, page: 1 };\n\n                    shopApi\n                        .getSuggestions(query, options, customer.token)\n                        .then((response) => {\n                            setIsLoadingSuggestions(false);\n                            console.log(\"Search API Response:\", response); // Debug log\n\n                            // Update untuk struktur API baru yang memiliki nested data\n                            const products = response.data?.data?.items || response.data?.items || [];\n                            const itemMalls = response.data?.data?.itemMalls || response.data?.itemMalls || [];\n\n                            console.log(\"Extracted search products:\", products); // Debug log\n                            console.log(\"Extracted search itemMalls:\", itemMalls); // Debug log\n\n                            setSuggestedProducts(products);\n                            setSuggestedItemMalls(itemMalls);\n                        })\n                        .catch((error) => {\n                            console.error(\"Search API Error:\", error);\n                            setIsLoadingSuggestions(false);\n                            setSuggestedProducts([]);\n                            setSuggestedItemMalls([]);\n                        });\n                }, 800);\n            } else {\n                setHasSuggestions(false);\n            }\n        },\n        [customer?.token]\n    );\n    // const handleChangeQuery = (event) => {\n    //     const query = event.target.value;\n    //     setQuery(query);\n\n    //     if (query.length > 2) {\n\n    //       const debounce = (callback, delay) => {\n    //         let timeoutId;\n    //         return (...args) => {\n    //           clearTimeout(timeoutId);\n    //           timeoutId = setTimeout(() => {\n    //             callback.apply(this, args);\n    //           }, delay);\n    //         };\n    //       };\n\n    //       setIsLoadingSuggestions(true);\n    //       const debouncedGetSuggestions = debounce(() => {\n    //         const options = { limit: 5, page: 1 };\n    //         setSuggestionsOpen(true);\n    //         setHasSuggestions(true);\n    //         shopApi.getSuggestions(query, options, customer.token).then((products) => {\n    //           setIsLoadingSuggestions(false);\n    //           setSuggestedProducts(products.data.items);\n    //           setSuggestedToko(products.data.itemMalls);\n    //         });\n    //       }, 300);\n\n    //       debouncedGetSuggestions();\n    //     } else {\n    //       setHasSuggestions(false);\n    //     }\n    //   };\n    const handleBlur = () => {\n        setTimeout(() => {\n            if (!document.activeElement || document.activeElement === document.body) {\n                return;\n            }\n\n            // Close suggestions if the focus received an external element.\n            if (wrapper.current && !wrapper.current.contains(document.activeElement)) {\n                close();\n            }\n        }, 10);\n    };\n\n    // Close suggestions when the Escape key has been pressed.\n    const handleKeyDown = (event) => {\n        // Escape.\n        if (event.which === 27) {\n            close();\n        }\n    };\n\n    const rootClasses = classNames(`search search--location--${context}`, className, {\n        \"search--suggestions-open\": suggestionsOpen,\n        \"search--has-suggestions\": hasSuggestions,\n    });\n\n    const closeButton =\n        context !== \"mobile-header\" ? (\n            \"\"\n        ) : (\n            <button className=\"search__button search__button--type--close\" type=\"button\" onClick={close}>\n                <Cross20Svg />\n            </button>\n        );\n\n    return (\n        <div className={rootClasses} ref={wrapper} onBlur={handleBlur}>\n            <div className=\"search__body\">\n                <form\n                    style={{ borderRadius: \"10px\" }}\n                    className=\"search__form\"\n                    action={`${process.env.PUBLIC_URL}/products/search`}\n                >\n                    <input\n                        style={{ borderTopLeftRadius: \"10px\", borderBottomLeftRadius: \"10px\" }}\n                        ref={inputRef}\n                        onChange={handleChangeQuery}\n                        onFocus={handleFocus}\n                        onKeyDown={handleKeyDown}\n                        value={query}\n                        className=\"search__input\"\n                        name=\"keyword\"\n                        placeholder=\"Cari produk ...\"\n                        aria-label=\"Site search\"\n                        type=\"text\"\n                        autoComplete=\"off\"\n                    />\n                    <button\n                        className=\"search__button search__button--type--submit\"\n                        type=\"submit\"\n                        style={{ borderTopRightRadius: \"10px\", borderBottomRightRadius: \"10px\" }}\n                    >\n                        <Search20Svg />\n                    </button>\n                    {closeButton}\n                    {/* <div className=\"search__border\" /> */}\n                </form>\n\n                <Suggestions\n                    className=\"search__suggestions\"\n                    context={context}\n                    itemMalls={suggestedItemMalls}\n                    products={suggestedProducts}\n                    isLoading={isLoadingSuggestions}\n                    query={query}\n                />\n            </div>\n        </div>\n    );\n});\n\nconst mapStateToProps = (state) => ({ customer: state.customer });\n\nexport default withRouter(connect(mapStateToProps, null)(Search));\n","// react\nimport React, { Component } from \"react\";\n\n// third-party\nimport classNames from \"classnames\";\nimport { connect } from \"react-redux\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport { Link } from \"react-router-dom\";\n\n// application\nimport { Menu18x14Svg, Search20Svg, Cart20Svg } from \"../../svg\";\nimport { mobileMenuOpen } from \"../../store/mobile-menu\";\nimport Indicator from \"../header/Indicator\";\nimport Search from \"../header/Search\";\n\nclass MobileHeader extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            searchOpen: false,\n        };\n        this.searchInput = React.createRef();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { searchOpen } = this.state;\n\n        if (searchOpen && searchOpen !== prevState.searchOpen && this.searchInput.current) {\n            this.searchInput.current.focus();\n        }\n    }\n\n    handleOpenSearch = () => {\n        this.setState(() => ({ searchOpen: true }));\n    };\n\n    handleCloseSearch = () => {\n        this.setState(() => ({ searchOpen: false }));\n    };\n\n    render() {\n        const { openMobileMenu, miniCart, auth } = this.props;\n        const { searchOpen } = this.state;\n        const searchClasses = classNames(\"mobile-header__search\", {\n            \"mobile-header__search--open\": searchOpen,\n        });\n\n        return (\n            <div className=\"mobile-header\">\n                <div className=\"mobile-header__panel\">\n                    <div className=\"container\">\n                        <div className=\"mobile-header__body\">\n                            <button type=\"button\" className=\"mobile-header__menu-button\" onClick={openMobileMenu}>\n                                <Menu18x14Svg />\n                            </button>\n                            <Link to=\"/\" className=\"mobile-header__logo\">\n                                <LazyLoadImage\n                                    width=\"100%\"\n                                    height=\"100%\"\n                                    effect=\"opacity\"\n                                    alt=\"logo siplah\"\n                                    src={`${process.env.PUBLIC_URL}/images/logo.png`}\n                                />\n                            </Link>\n                            <Search\n                                context=\"mobile-header\"\n                                className={searchClasses}\n                                inputRef={this.searchInput}\n                                onClose={this.handleCloseSearch}\n                            />\n                            <div className=\"mobile-header__indicators\">\n                                <Indicator\n                                    className=\"indicator--mobile indicator--mobile-search d-md-none\"\n                                    onClick={this.handleOpenSearch}\n                                    icon={<Search20Svg />}\n                                />\n                                {auth && (\n                                    <Indicator\n                                        className=\"indicator--mobile\"\n                                        url=\"/shop/cart\"\n                                        value={miniCart.totalAllProduct}\n                                        icon={<Cart20Svg />}\n                                    />\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    cart: state.cart,\n    miniCart: state.miniCart,\n    auth: state.auth,\n});\n\nconst mapDispatchToProps = {\n    openMobileMenu: mobileMenuOpen,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MobileHeader);\n"],"sourceRoot":""}