(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[18,37],{170:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var n=a(1),o=a.n(n);function s(e){return o.a.createElement("div",Object.assign({className:"block-loader"},e),o.a.createElement("div",{className:"block-loader__spinner"}))}},172:function(e,t,a){"use strict";var n=a(1);class o extends n.Component{constructor(e){super(e),this.canceled=!1,this.run=()=>{const{action:e}=this.props,{loading:t}=this.state;!t&&e&&(this.setState({loading:!0}),e().then(()=>{this.canceled||this.setState({loading:!1})}))},this.state={loading:!1}}componentWillUnmount(){this.canceled=!0}render(){const{render:e}=this.props,{loading:t}=this.state;return e?e({run:this.run,loading:t}):null}}t.a=o},175:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));const n={home:()=>"/",catalog:()=>"/shop/catalog",category:e=>"/shop/catalog/".concat(e.slug),product:e=>"/product/".concat(e.mall.id,"/").concat(e.slug),mall:e=>"/store/".concat(e.slug)};function o(e){return e.parent?[...o(e.parent),e.parent]:[]}},185:function(e,t,a){"use strict";var n=a(1),o=a.n(n),s=a(34),i=a.n(s),l=a(39);class r extends n.PureComponent{constructor(e){var t;super(e),this.setWrapperRef=e=>{this.wrapperRef=e},this.handleOutsideClick=e=>{const{open:t}=this.state;this.wrapperRef&&!this.wrapperRef.contains(e.target)&&t&&this.close()},this.handleButtonClick=e=>{const{onClick:t,dropdown:a}=this.props;a&&e.preventDefault(),this.toggle(),t&&t(e)},this.state={open:null!==(t=this.props.openNotif)&&void 0!==t&&t,tooltipOpen:!1}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick)}componentDidUpdate(e,t){const{open:a}=this.state,{onOpen:n,onClose:o}=this.props;a!==t.open&&(a&&n&&n(),!a&&o&&o())}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick)}toggle(){this.setState(e=>({open:!e.open}))}open(){this.setState(()=>({open:!0}))}close(){this.setState(()=>({open:!1})),this.props.closeNotif&&this.props.closeNotif()}render(){const{open:e}=this.state,{url:t,className:a,icon:n}=this.props;console.log(this.props,"props lonceng");let s,{value:r,dropdown:c}=this.props;void 0!==r&&(r=o.a.createElement("span",{className:"indicator__value"},r));const m=o.a.createElement("span",{className:"indicator__area"},n,r);s=t?o.a.createElement(l.b,{to:t,className:"indicator__button",onClick:this.handleButtonClick},m):o.a.createElement("button",{type:"button",className:"indicator__button",onClick:this.handleButtonClick},m),c&&(c=o.a.createElement("div",{className:"indicator__dropdown"},c));const d=i()("indicator indicator--trigger--click ".concat(a),{"indicator--opened":e});return o.a.createElement("div",{className:d,ref:this.setWrapperRef},s,c)}}t.a=r},187:function(e,t,a){"use strict";const n={getCategories:()=>fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","product/category")).then(e=>e.json())};t.a=n},202:function(e,t,a){"use strict";t.a=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}));return new String(t)}},215:function(e,t,a){"use strict";var n=a(1),o=a.n(n);t.a=e=>o.a.createElement(o.a.Fragment,null,o.a.createElement("img",Object.assign({},e,{src:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyMjYgMjI2Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBmb250LWZhbWlseT0ibm9uZSIgZm9udC13ZWlnaHQ9Im5vbmUiIGZvbnQtc2l6ZT0ibm9uZSIgdGV4dC1hbmNob3I9Im5vbmUiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMCwyMjZ2LTIyNmgyMjZ2MjI2eiIgZmlsbD0ibm9uZSI+PC9wYXRoPjxnIGZpbGw9IiNlNzRjM2MiPjxwYXRoIGQ9Ik0xMTMsMTguODMzMzNjLTE2LjUxODMyLDAgLTMwLjI3MjcyLDEyLjM0MjU4IC0zMi41ODEzLDI4LjI1aC0zMi4yMTM0NmMtMC40MDA5NSwtMC4wNjg2MSAtMC44MDcwOSwtMC4xMDI0NSAtMS4yMTM4NywtMC4xMDExNmMtMC4zNTE0OCwwLjAwNzU4IC0wLjcwMTksMC4wNDEzOSAtMS4wNDgzNCwwLjEwMTE2aC0xNS4zMzg4N2MtMi41NDY5OSwtMC4wMzYwMiAtNC45MTYwNywxLjMwMjE1IC02LjIwMDA4LDMuNTAyMWMtMS4yODQwMSwyLjE5OTk1IC0xLjI4NDAxLDQuOTIwODQgMCw3LjEyMDhjMS4yODQwMSwyLjE5OTk1IDMuNjUzMDksMy41MzgxMiA2LjIwMDA4LDMuNTAyMWgxMC4wNjk1OGwxMS44NTM2LDEyMi41NTQ2MWMxLjI3NjMzLDEzLjIxNDU0IDEyLjUwMzEzLDIzLjQwMzczIDI1Ljc3NjI4LDIzLjQwMzczaDY5LjM4MzU1YzEzLjI3Mzg0LDAgMjQuNTAwNDYsLTEwLjE4ODA0IDI1Ljc3NjI4LC0yMy40MDM3M2wxMS44NjI3OSwtMTIyLjU1NDYxaDEwLjA2OTU4YzIuNTQ2OTksMC4wMzYwMiA0LjkxNjA3LC0xLjMwMjE1IDYuMjAwMDgsLTMuNTAyMWMxLjI4NDAxLC0yLjE5OTk1IDEuMjg0MDEsLTQuOTIwODQgMCwtNy4xMjA4Yy0xLjI4NDAxLC0yLjE5OTk1IC0zLjY1MzA5LC0zLjUzODEyIC02LjIwMDA4LC0zLjUwMjFoLTE1LjMyOTY3Yy0wLjc0OTE3LC0wLjEyMTU0IC0xLjUxMzA0LC0wLjEyMTU0IC0yLjI2MjIxLDBoLTMyLjIyMjY2Yy0yLjMwODU4LC0xNS45MDc0MiAtMTYuMDYyOTgsLTI4LjI1IC0zMi41ODEzLC0yOC4yNXpNMTEzLDMyLjk1ODMzYzguODQ3NjksMCAxNi4xMDYxMSw1Ljk3MDkyIDE4LjE4MDQyLDE0LjEyNWgtMzYuMzYwODRjMi4wNzQzMSwtOC4xNTQwOCA5LjMzMjczLC0xNC4xMjUgMTguMTgwNDIsLTE0LjEyNXpNNTQuODUzOTIsNjEuMjA4MzNoMTE2LjI4Mjk2bC0xMS43MzQwNSwxMjEuMTkzNmMtMC41ODg2OCw2LjA5NzkgLTUuNTkxMTcsMTAuNjM5NzMgLTExLjcxNTY2LDEwLjYzOTczaC02OS4zODM1NWMtNi4xMTU3NiwwIC0xMS4xMjc0OSwtNC41NTAxMSAtMTEuNzE1NjYsLTEwLjYzOTczek05Ni40MTA0OCw4NC42NDg4NWMtMy44OTY5LDAuMDYwODggLTcuMDA4MDUsMy4yNjY2OCAtNi45NTIxNSw3LjE2MzY1djcwLjYyNWMtMC4wMzYwMiwyLjU0Njk5IDEuMzAyMTUsNC45MTYwNyAzLjUwMjEsNi4yMDAwOGMyLjE5OTk1LDEuMjg0MDEgNC45MjA4NCwxLjI4NDAxIDcuMTIwOCwwYzIuMTk5OTUsLTEuMjg0MDEgMy41MzgxMiwtMy42NTMwOSAzLjUwMjEsLTYuMjAwMDh2LTcwLjYyNWMwLjAyNzQsLTEuOTA5NzkgLTAuNzE5ODIsLTMuNzQ5MjYgLTIuMDcxMjQsLTUuMDk4OTZjLTEuMzUxNDMsLTEuMzQ5NyAtMy4xOTE4NiwtMi4wOTQ1NSAtNS4xMDE2MSwtMi4wNjQ3ek0xMjkuMzY4ODEsODQuNjQ4ODVjLTMuODk2OSwwLjA2MDg4IC03LjAwODA1LDMuMjY2NjggLTYuOTUyMTUsNy4xNjM2NXY3MC42MjVjLTAuMDM2MDIsMi41NDY5OSAxLjMwMjE1LDQuOTE2MDcgMy41MDIxLDYuMjAwMDhjMi4xOTk5NSwxLjI4NDAxIDQuOTIwODQsMS4yODQwMSA3LjEyMDgsMGMyLjE5OTk1LC0xLjI4NDAxIDMuNTM4MTIsLTMuNjUzMDkgMy41MDIxLC02LjIwMDA4di03MC42MjVjMC4wMjc0LC0xLjkwOTc5IC0wLjcxOTgyLC0zLjc0OTI2IC0yLjA3MTI0LC01LjA5ODk2Yy0xLjM1MTQzLC0xLjM0OTcgLTMuMTkxODYsLTIuMDk0NTUgLTUuMTAxNjEsLTIuMDY0N3oiPjwvcGF0aD48L2c+PC9nPjwvc3ZnPg==",alt:""})))},231:function(e,t,a){"use strict";var n=a(4),o=a(1),s=a.n(o),i=a(40),l=a(34),r=a.n(l),c=a(69),m=a(7),d=a.n(m),u=a(169),p=a(10),h=a(102),g=a(202),b=a(170),E=a(172);const v={room:null};const f=(e,t)=>{switch(t.type){case"SET_ROOM":return Object(n.a)(Object(n.a)({},e),{},{room:t.value});default:throw new Error}},N=e=>{const[t,a]=Object(o.useReducer)(f,v),[n,i]=Object(o.useState)([]),[l,c]=Object(o.useState)([]),[m,N]=Object(o.useState)(null),[y,j]=Object(o.useState)(),[M,_]=Object(o.useState)(""),[O,k]=Object(o.useState)(!1),w=Object(p.g)(),{id:x}=e.customer,{layout:C,toggle:L}=e,T=Object(o.useCallback)(e=>{e&&e.scrollIntoView({smoth:!0})},[]);Object(o.useEffect)(()=>{const e=function(e){const t={};return null!==e&&(t.room=e),d.a.stringify(t,{encode:!1})}(t.room),a="".concat(window.location.pathname).concat(e?"?":"").concat(e);return window.history.replaceState(null,"",a),()=>{}},[t.room]),Object(o.useEffect)(()=>{h.a.database().ref("/unread-message/customer/".concat(x)).on("value",e=>{fetch("".concat("https://siplah.eurekabookhouse.co.id/api_chat/","get-users?id=").concat(x,"&from=customer")).then(e=>e.json()).then(e=>{c(e)})})},[x]),Object(o.useEffect)(()=>{k(!0);let e=h.a.database().ref("contact/customer/".concat(t.room)).on("value",e=>{fetch("".concat("https://siplah.eurekabookhouse.co.id/api_chat/","message?customerId=").concat(x,"&sellerId=").concat(m)).then(e=>e.json()).then(e=>{i(e),k(!1)})});return()=>h.a.database().ref("contact/customer/".concat(t.room)).off("value",e)},[m,x,t.room]);Object(o.useEffect)(()=>{if(void 0!==x||void 0!==m){var e=new FormData;e.append("customerId",x),e.append("seller_id",m),e.append("role","seller");var t={method:"POST",body:e,redirect:"follow"};fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","backendseller/Mychat/readChat"),t).then(e=>{h.a.database().ref("/unread-message/customer/".concat(x)).set("".concat(Object(g.a)())),e.text()})}},[m,x]);let I=s.a.createElement("div",{className:"row justify-content-center align-items-center p-0 m-0"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("button",{onClick:()=>{"function"===typeof L&&L(),w.push("/store")},className:"btn btn-primary btn-block"},"Mulai Percakapan")));null!=l&&l.length>0&&(I=l.map((e,t)=>s.a.createElement("li",{key:t,style:{background:Number(e.sellerId)===Number(m)&&"#EBEBEB"},className:"person","data-chat":e.sellerId,onClick:()=>{return N((t=e).sellerId),a({type:"SET_ROOM",value:t.room}),void _(t.room);var t}},s.a.createElement("div",{className:"user",style:{borderRadius:"50%",border:"1px solid black"}},s.a.createElement("img",{style:{objectFit:"contain"},src:"https://cdn.eurekabookhouse.co.id/ebh/mall/".concat(e.image),alt:""})),s.a.createElement("p",{className:"name-time"},s.a.createElement("p",{className:"name d-flex justify-content-between",style:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",whiteSpace:"nowrap !important",marginBottom:"0"}},s.a.createElement("div",null,e.sellerName),e.countUnread>0&&s.a.createElement("div",{class:"badge badge-primary ml-3",style:{fontSize:"15px",background:"lightsalmon",height:"15px",padding:" 0 10px",borderRadius:" 1000px",fontWeight:"700"}},e.countUnread))))));let S=O?s.a.createElement(b.default,null):n.map((e,t)=>{const a=n.length-1===t;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{key:t,ref:a?T:null,className:r()("",{"chat-left":"seller"===e.role,"chat-right mr-2":"customer"===e.role})},"customer"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time),s.a.createElement("div",{className:r()("chat-text text-light",{"bg-info":"seller"===e.role,"bg-secondary":"customer"===e.role}),style:{whiteSpace:"pre-line"}},s.a.createElement("h6",{className:"font-weight-bold mb-1 text-capitalize"},"seller"===e.role?e.sellerName:e.customerName),s.a.createElement("span",{style:{wordWrap:"anywhere"}},e.text)),"seller"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time)))});return 0===S.length&&(S=s.a.createElement("div",{className:"row justify-content-center align-items-center"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement(u.r,null),s.a.createElement("h5",{className:"text-center my-3"},"Belum ada percakapan")))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"content-wrapper"},s.a.createElement("div",{className:"row gutters"},s.a.createElement("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},s.a.createElement("div",{className:"card chat m-0"},s.a.createElement("div",{className:"row no-gutters"},s.a.createElement("div",{className:"col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3"},s.a.createElement("div",{className:"users-container"},s.a.createElement("ul",{className:"users",style:{maxHeight:"modal"===C?"60vh":"100vh",minHeight:"modal"===C?"60vh":"100vh",overflowY:"auto"}},I))),s.a.createElement("div",{className:"col-xl-8 col-lg-8 col-md-8 col-sm-9 col-9"},s.a.createElement("div",{className:"chat-container"},s.a.createElement("ul",{className:"chat-box chatContainerScroll",style:{maxHeight:"modal"===C?"40vh":"80vh",minHeight:"modal"===C?"40vh":"80vh",overflowY:"auto",overflowX:"hidden"}},S),n.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group mt-3 mb-1"},s.a.createElement("textarea",{className:"form-control",rows:3,style:{resize:"none"},autoFocus:!0,value:y,onChange:e=>j(e.target.value),placeholder:"Tulis Pesan Anda..."})),s.a.createElement("div",{className:"form-group"},s.a.createElement(E.a,{action:()=>new Promise(e=>{if(""!==y){var t=new Headers,a=new FormData;a.append("customerId",x),a.append("seller_id",m),a.append("message",y),a.append("role","customer");var o={method:"POST",headers:t,body:a,redirect:"follow"};fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","backendseller/mychat/addchattoRoom"),o).then(async t=>{h.a.database().ref("/unread-message/seller/".concat(m)).set("".concat(Object(g.a)())),h.a.database().ref("/contact/seller/".concat(M)).set("".concat(Object(g.a)())),i([...n,await t.json()]),j(""),e()})}else e()}),render:e=>{let{run:t,loading:a}=e;return s.a.createElement("button",{type:"button",className:r()("btn btn-primary btn-lg btn-block",{"btn-loading":a}),onClick:t},"Kirim Pesan")}})))))))))))};N.defaultProps={layout:"modal"};const y={addChatList:c.a};t.a=Object(i.b)(e=>({customer:e.customer,chat:e.chat}),y)(N)},232:function(e,t,a){"use strict";t.a=new class{constructor(){this.privateArea=null,this.privateSubscriber=null}set area(e){this.privateArea!==e&&(this.privateArea=e,this.privateSubscriber&&this.privateSubscriber(this.area))}get area(){return this.privateArea}subscribe(e){return this.privateSubscriber=e,()=>{this.privateSubscriber=null}}}},233:function(e,t,a){"use strict";var n=a(1),o=a.n(n),s=a(34),i=a.n(s),l=a(10),r=a(65),c=a(40),m=a(39),d=a(172),u=a(169),p=a(64),h=a(175),g=a(170);const b=o.a.memo(e=>{const{context:t,className:a,products:n,itemMalls:s,cartAddItem:l,isLoading:r,customer:c,query:p}=e,b=i()("suggestions suggestions--location--".concat(t),a);console.log(n,"search product"),console.log(s,"search itemMalls");const E=n&&n.map(a=>{var n;const s="number"===typeof a.price.primary?a.price.primary:parseFloat(a.price.primary||0),r=a.taxExempt||a.isTaxExempt||!a.ppnTagItem||!1,p=(r||Math.ceil(s/1.11*.11),Math.floor(s/1.11)),g=Math.ceil(11/12*Number(p)),b=Math.ceil(.12*g),E=r?"Rp ".concat(Math.round(s).toLocaleString("id-ID")):a.price.primaryCurrencyFormat;return o.a.createElement("li",{key:a.id,className:"suggestions__item"},a.images&&a.images.length>0&&o.a.createElement("div",{className:"suggestions__item-image product-image"},o.a.createElement("div",{className:"product-image__body"},o.a.createElement("img",{className:"product-image__img",src:a.images[0],alt:""}))),o.a.createElement("div",{className:"suggestions__item-info"},o.a.createElement(m.b,{className:"suggestions__item-name",to:h.b.product(a)},a.name),o.a.createElement("div",{className:"suggestions__item-meta"},null===(n=a.mall)||void 0===n?void 0:n.name)),o.a.createElement("div",{className:"suggestions__item-price"},E,o.a.createElement("div",{className:"suggestions__item-ppn",style:{fontSize:"11px",color:"#6c757d"}},r?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{color:"#28A745"}},"Bebas Pajak"),o.a.createElement("div",null,"DPP PPH: ",E),o.a.createElement("div",null,"DPP Nilai Lain: Rp 0"),o.a.createElement("div",null,"PPN 12%: Rp 0")):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{color:"#28A745"}},"Harga Termasuk Pajak"),o.a.createElement("div",null,"DPP PPH: Rp ",p.toLocaleString("id-ID")),o.a.createElement("div",null,"DPP Nilai Lain: Rp ",g.toLocaleString("id-ID")),o.a.createElement("div",null,"PPN ",12,"%: Rp ",b.toLocaleString("id-ID"))))),"header"===t&&o.a.createElement("div",{className:"suggestions__item-actions"},o.a.createElement(d.a,{action:()=>(t=>void 0!==(null===c||void 0===c?void 0:c.token)&&""!==(null===c||void 0===c?void 0:c.token)?l(t,null===c||void 0===c?void 0:c.token):new Promise(t=>{e.history.push("/login"),t()}))(a),render:e=>{let{run:t,loading:a}=e;return o.a.createElement("button",{type:"button",onClick:t,title:"Add to cart",className:i()("btn btn-primary btn-sm btn-svg-icon",{"btn-loading":a})},o.a.createElement(u.i,null))}})))}),v=s&&s.map(e=>{var t;return o.a.createElement("li",{key:e.id,className:"suggestions__item"},e.image&&e.image.primary&&o.a.createElement("div",{className:"suggestions__item-image product-image"},o.a.createElement("div",{className:"product-image__body"},o.a.createElement("img",{className:"product-image__img",src:e.image.primary,alt:""}))),o.a.createElement("div",{className:"suggestions__item-info"},o.a.createElement(m.b,{className:"suggestions__item-name",to:"/store/".concat(e.slug)},e.name),o.a.createElement("div",{className:"suggestions__item-meta"},null===(t=e.location)||void 0===t?void 0:t.city)))});return o.a.createElement("div",{className:b},r?o.a.createElement(g.default,null):o.a.createElement("ul",{className:"suggestions__list"},o.a.createElement("li",{className:"suggestions__item"},o.a.createElement("div",null,"BARANG")),E&&E.length>0?o.a.createElement(o.a.Fragment,null,E,o.a.createElement("li",{className:"suggestions__item d-flex justify-content-center"},o.a.createElement(m.b,{to:"/products/search?keyword=".concat(p),className:"suggestions__item-name",style:{color:"#0E336D"}},"Lihat Produk Lainnya"))):o.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Produk tidak ditemukan"),o.a.createElement("li",{className:"suggestions__item"},o.a.createElement("div",null,"TOKO")),v&&v.length>0?o.a.createElement(o.a.Fragment,null,v,o.a.createElement("li",{className:"suggestions__item"},o.a.createElement(m.b,{to:"/store?keyword=".concat(p),className:"suggestions__item-name d-flex justify-content-between align-items-center w-100"},o.a.createElement("div",{style:{color:"#0E336D"}},'Lihat Pencarian Toko "',p,'" Lainnya'),o.a.createElement(u.f,null)))):o.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Toko tidak ditemukan")))}),E={cartAddItem:p.a};var v=Object(l.j)(Object(c.b)(e=>({customer:e.customer}),E)(b));const f=o.a.memo(e=>{const{context:t,className:a,inputRef:s,onClose:l,location:c,customer:m}=e,[d,p]=Object(n.useState)(()=>()=>{}),[h,g]=Object(n.useState)(!1),[b,E]=Object(n.useState)(!1),[f,N]=Object(n.useState)([]),[y,j]=Object(n.useState)([]),[M,_]=Object(n.useState)(!0),[O,k]=Object(n.useState)(""),w=Object(n.useRef)(null),x=Object(n.useCallback)(()=>{l&&l(),g(!1)},[l]);Object(n.useEffect)(()=>x(),[x,c]),Object(n.useEffect)(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]),Object(n.useEffect)(()=>()=>d(),[d]);const C=Object(n.useRef)(null),L=Object(n.useCallback)(e=>{const t=e.target.value;k(t),C.current&&clearTimeout(C.current),t.length>2?(_(!0),g(!0),E(!0),C.current=setTimeout(()=>{r.a.getSuggestions(t,{limit:5,page:1},null===m||void 0===m?void 0:m.token).then(e=>{var t,a,n,o,s,i;_(!1),console.log("Search API Response:",e);const l=(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.items)||(null===(n=e.data)||void 0===n?void 0:n.items)||[],r=(null===(o=e.data)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.itemMalls)||(null===(i=e.data)||void 0===i?void 0:i.itemMalls)||[];console.log("Extracted search products:",l),console.log("Extracted search itemMalls:",r),N(l),j(r)}).catch(e=>{console.error("Search API Error:",e),_(!1),N([]),j([])})},800)):E(!1)},[null===m||void 0===m?void 0:m.token]),T=i()("search search--location--".concat(t),a,{"search--suggestions-open":h,"search--has-suggestions":b}),I="mobile-header"!==t?"":o.a.createElement("button",{className:"search__button search__button--type--close",type:"button",onClick:x},o.a.createElement(u.o,null));return o.a.createElement("div",{className:T,ref:w,onBlur:()=>{setTimeout(()=>{document.activeElement&&document.activeElement!==document.body&&w.current&&!w.current.contains(document.activeElement)&&x()},10)}},o.a.createElement("div",{className:"search__body"},o.a.createElement("form",{style:{borderRadius:"10px"},className:"search__form",action:"".concat("/satdik","/products/search")},o.a.createElement("input",{style:{borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},ref:s,onChange:L,onFocus:()=>{g(!0)},onKeyDown:e=>{27===e.which&&x()},value:O,className:"search__input",name:"keyword",placeholder:"Cari produk ...","aria-label":"Site search",type:"text",autoComplete:"off"}),o.a.createElement("button",{className:"search__button search__button--type--submit",type:"submit",style:{borderTopRightRadius:"10px",borderBottomRightRadius:"10px"}},o.a.createElement(u.w,null)),I),o.a.createElement(v,{className:"search__suggestions",context:t,itemMalls:y,products:f,isLoading:M,query:O})))});t.a=Object(l.j)(Object(c.b)(e=>({customer:e.customer}),null)(f))},245:function(e,t,a){"use strict";var n=a(5),o=a(11),s=a(1),i=a.n(s),l=a(3),r=a.n(l),c=a(34),m=a.n(c),d=a(174),u={tag:d.n,className:r.a.string,cssModule:r.a.object},p=function(e){var t=e.className,a=e.cssModule,s=e.tag,l=Object(o.a)(e,["className","cssModule","tag"]),r=Object(d.j)(m()(t,"modal-body"),a);return i.a.createElement(s,Object(n.a)({},l,{className:r}))};p.propTypes=u,p.defaultProps={tag:"div"},t.a=p},276:function(e,t,a){"use strict";var n=a(182),o=a(5),s=a(184),i=a(13),l=a(1),r=a.n(l),c=a(3),m=a.n(c),d=a(34),u=a.n(d),p=a(14),h=a.n(p),g=a(174),b={children:m.a.node.isRequired,node:m.a.any},E=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null},a.render=function(){return g.d?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),h.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null},t}(r.a.Component);E.propTypes=b;var v=E,f=a(11),N=a(209),y=Object(n.a)({},N.Transition.propTypes,{children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:g.n,baseClass:m.a.string,baseClassActive:m.a.string,className:m.a.string,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])}),j=Object(n.a)({},N.Transition.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:g.c.Fade,appear:!0,enter:!0,exit:!0,in:!0});function M(e){var t=e.tag,a=e.baseClass,n=e.baseClassActive,s=e.className,i=e.cssModule,l=e.children,c=e.innerRef,m=Object(f.a)(e,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),d=Object(g.l)(m,g.a),p=Object(g.k)(m,g.a);return r.a.createElement(N.Transition,d,(function(e){var m="entered"===e,d=Object(g.j)(u()(s,a,m&&n),i);return r.a.createElement(t,Object(o.a)({className:d},p,{ref:c}),l)}))}M.propTypes=y,M.defaultProps=j;var _=M;function O(){}var k=m.a.shape(_.propTypes),w={isOpen:m.a.bool,autoFocus:m.a.bool,centered:m.a.bool,scrollable:m.a.bool,size:m.a.string,toggle:m.a.func,keyboard:m.a.bool,role:m.a.string,labelledBy:m.a.string,backdrop:m.a.oneOfType([m.a.bool,m.a.oneOf(["static"])]),onEnter:m.a.func,onExit:m.a.func,onOpened:m.a.func,onClosed:m.a.func,children:m.a.node,className:m.a.string,wrapClassName:m.a.string,modalClassName:m.a.string,backdropClassName:m.a.string,contentClassName:m.a.string,external:m.a.node,fade:m.a.bool,cssModule:m.a.object,zIndex:m.a.oneOfType([m.a.number,m.a.string]),backdropTransition:k,modalTransition:k,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func]),unmountOnClose:m.a.bool,returnFocusAfterClose:m.a.bool,container:g.o},x=Object.keys(w),C={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:O,onClosed:O,modalTransition:{timeout:g.c.Modal},backdropTransition:{mountOnEnter:!0,timeout:g.c.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body"},L=function(e){function t(t){var a;return(a=e.call(this,t)||this)._element=null,a._originalBodyPadding=null,a.getFocusableChildren=a.getFocusableChildren.bind(Object(s.a)(a)),a.handleBackdropClick=a.handleBackdropClick.bind(Object(s.a)(a)),a.handleBackdropMouseDown=a.handleBackdropMouseDown.bind(Object(s.a)(a)),a.handleEscape=a.handleEscape.bind(Object(s.a)(a)),a.handleStaticBackdropAnimation=a.handleStaticBackdropAnimation.bind(Object(s.a)(a)),a.handleTab=a.handleTab.bind(Object(s.a)(a)),a.onOpened=a.onOpened.bind(Object(s.a)(a)),a.onClosed=a.onClosed.bind(Object(s.a)(a)),a.manageFocusAfterClose=a.manageFocusAfterClose.bind(Object(s.a)(a)),a.clearBackdropAnimationTimeout=a.clearBackdropAnimationTimeout.bind(Object(s.a)(a)),a.state={isOpen:!1,showStaticBackdropAnimation:!1},a}Object(i.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.isOpen,a=e.autoFocus,n=e.onEnter;t&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),n&&n(),this._isMounted=!0},a.componentDidUpdate=function(e,t){if(this.props.isOpen&&!e.isOpen)return this.init(),void this.setState({isOpen:!0});this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)},a.componentWillUnmount=function(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),this._isMounted=!1},a.onOpened=function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||O)(e,t)},a.onClosed=function(e){var t=this.props.unmountOnClose;this.props.onClosed(),(this.props.modalTransition.onExited||O)(e),t&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})},a.setFocus=function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()},a.getFocusableChildren=function(){return this._element.querySelectorAll(g.f.join(", "))},a.getFocusedChild=function(){var e,t=this.getFocusableChildren();try{e=document.activeElement}catch(a){e=t[0]}return e},a.handleBackdropClick=function(e){if(e.target===this._mouseDownElement){e.stopPropagation();var t=this._dialog?this._dialog.parentNode:null;if(t&&e.target===t&&"static"===this.props.backdrop&&this.handleStaticBackdropAnimation(),!this.props.isOpen||!0!==this.props.backdrop)return;t&&e.target===t&&this.props.toggle&&this.props.toggle(e)}},a.handleTab=function(e){if(9===e.which){var t=this.getFocusableChildren(),a=t.length;if(0!==a){for(var n=this.getFocusedChild(),o=0,s=0;s<a;s+=1)if(t[s]===n){o=s;break}e.shiftKey&&0===o?(e.preventDefault(),t[a-1].focus()):e.shiftKey||o!==a-1||(e.preventDefault(),t[0].focus())}}},a.handleBackdropMouseDown=function(e){this._mouseDownElement=e.target},a.handleEscape=function(e){this.props.isOpen&&e.keyCode===g.i.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):"static"===this.props.backdrop&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))},a.handleStaticBackdropAnimation=function(){var e=this;this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout((function(){e.setState({showStaticBackdropAnimation:!1})}),100)},a.init=function(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=Object(g.h)(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=Object(g.g)(),Object(g.e)(),0===t.openCount&&(document.body.className=u()(document.body.className,Object(g.j)("modal-open",this.props.cssModule))),t.openCount+=1},a.destroy=function(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()},a.manageFocusAfterClose=function(){if(this._triggeringElement){var e=this.props.returnFocusAfterClose;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}},a.close=function(){if(t.openCount<=1){var e=Object(g.j)("modal-open",this.props.cssModule),a=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(a," ").trim()}this.manageFocusAfterClose(),t.openCount=Math.max(0,t.openCount-1),Object(g.m)(this._originalBodyPadding)},a.renderModalDialog=function(){var e,t=this,a=Object(g.k)(this.props,x);return r.a.createElement("div",Object(o.a)({},a,{className:Object(g.j)(u()("modal-dialog",this.props.className,(e={},e["modal-"+this.props.size]=this.props.size,e["modal-dialog-centered"]=this.props.centered,e["modal-dialog-scrollable"]=this.props.scrollable,e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),r.a.createElement("div",{className:Object(g.j)(u()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))},a.render=function(){var e=this.props.unmountOnClose;if(this._element&&(this.state.isOpen||!e)){var t=!!this._element&&!this.state.isOpen&&!e;this._element.style.display=t?"none":"block";var a=this.props,s=a.wrapClassName,i=a.modalClassName,l=a.backdropClassName,c=a.cssModule,m=a.isOpen,d=a.backdrop,p=a.role,h=a.labelledBy,b=a.external,E=a.innerRef,f={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":h,role:p,tabIndex:"-1"},N=this.props.fade,y=Object(n.a)({},_.defaultProps,{},this.props.modalTransition,{baseClass:N?this.props.modalTransition.baseClass:"",timeout:N?this.props.modalTransition.timeout:0}),j=Object(n.a)({},_.defaultProps,{},this.props.backdropTransition,{baseClass:N?this.props.backdropTransition.baseClass:"",timeout:N?this.props.backdropTransition.timeout:0}),M=d&&(N?r.a.createElement(_,Object(o.a)({},j,{in:m&&!!d,cssModule:c,className:Object(g.j)(u()("modal-backdrop",l),c)})):r.a.createElement("div",{className:Object(g.j)(u()("modal-backdrop","show",l),c)}));return r.a.createElement(v,{node:this._element},r.a.createElement("div",{className:Object(g.j)(s)},r.a.createElement(_,Object(o.a)({},f,y,{in:m,onEntered:this.onOpened,onExited:this.onClosed,cssModule:c,className:Object(g.j)(u()("modal",i,this.state.showStaticBackdropAnimation&&"modal-static"),c),innerRef:E}),b,this.renderModalDialog()),M))}return null},a.clearBackdropAnimationTimeout=function(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)},t}(r.a.Component);L.propTypes=w,L.defaultProps=C,L.openCount=0;t.a=L},309:function(e,t,a){"use strict";var n=a(5),o=a(11),s=a(1),i=a.n(s),l=a(3),r=a.n(l),c=a(34),m=a.n(c),d=a(174),u={tag:d.n,wrapTag:d.n,toggle:r.a.func,className:r.a.string,cssModule:r.a.object,children:r.a.node,closeAriaLabel:r.a.string,charCode:r.a.oneOfType([r.a.string,r.a.number]),close:r.a.object},p=function(e){var t,a=e.className,s=e.cssModule,l=e.children,r=e.toggle,c=e.tag,u=e.wrapTag,p=e.closeAriaLabel,h=e.charCode,g=e.close,b=Object(o.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),E=Object(d.j)(m()(a,"modal-header"),s);if(!g&&r){var v="number"===typeof h?String.fromCharCode(h):h;t=i.a.createElement("button",{type:"button",onClick:r,className:Object(d.j)("close",s),"aria-label":p},i.a.createElement("span",{"aria-hidden":"true"},v))}return i.a.createElement(u,Object(n.a)({},b,{className:E}),i.a.createElement(c,{className:Object(d.j)("modal-title",s)},l),g||t)};p.propTypes=u,p.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},t.a=p},406:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),s=a(40),i=a(39),l=a(4),r=a(34),c=a.n(r),m=a(172),d=a(185),u=a(169),p=a(64),h=a(175),g=a(20),b=a(15),E=a.n(b),v=a(215);const f={cartRemoveItem:p.e,addMiniCart:g.a};var N=Object(s.b)(e=>({cart:e.cart,miniCart:e.miniCart,customer:e.customer}),f)((function(e){const{miniCart:t,cart:a,cartRemoveItem:n,customer:s}=e;let r,p;if(console.log(t,"mini cart length"),null!=a.cartList&&(p=1===a.cartList.items.length&&1===a.cartList.items[0].product.length?Object(l.a)(Object(l.a)({},a),{},{options:{page:1,limit:3}}):Object(l.a)({},a)),void 0!==t.items&&void 0!==t.items.product){const e=t.items.product.map(e=>{let t;const a="non"===e.ppnType||0===Number(e.ppn);e.image&&(t=o.a.createElement("div",{className:"product-image dropcart__product-image"},o.a.createElement(i.b,{to:h.b.product(e),className:"product-image__body"},o.a.createElement("img",{className:"product-image__img",src:e.image,alt:""}))));const l=o.a.createElement(m.a,{action:()=>(e=>new Promise(t=>{E.a.fire({title:"Anda yakin ingin menghapus produk ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hapus",reverseButtons:!0}).then(t=>{t.isConfirmed&&n(e,null===s||void 0===s?void 0:s.token,p)}),t()}))(e),render:e=>{let{run:t,loading:a}=e;const n=c()("dropcart__product-remove btn btn-light btn-sm btn-svg-icon",{"btn-loading":a});return o.a.createElement("button",{type:"button",onClick:t,className:n},o.a.createElement(v.a,null),o.a.createElement("small",{className:"text-danger d-block text-center"},"hapus"))}});let r;if(a){const t=e.priceCurrencyFormat;r=o.a.createElement("div",{className:"dropcart__product-meta"},o.a.createElement("span",{className:"dropcart__product-quantity"},e.qty)," \xd7 ",o.a.createElement("span",{className:"dropcart__product-price"},t),o.a.createElement("div",{style:{fontSize:"11px",marginTop:"3px"}},o.a.createElement("div",{style:{color:"#28a745"}},"Bebas Pajak"),o.a.createElement("div",null,"DPP PPh: ",t),o.a.createElement("div",null,"DPP Nilai Lain: Rp.0"),o.a.createElement("div",null,"PPN 12%: ",e.ppnCurrencyFormat||"Rp0")))}else r=o.a.createElement("div",{className:"dropcart__product-meta"},o.a.createElement("span",{className:"dropcart__product-quantity"},e.qty)," \xd7 ",o.a.createElement("span",{className:"dropcart__product-price"},e.priceCurrencyFormat),o.a.createElement("div",{style:{fontSize:"11px",marginTop:"3px"}},o.a.createElement("div",null,"DPP PPh: Rp"," ",(Math.floor(Number(e.itemPrice)/1.11)*Number(e.qty)).toLocaleString("id-ID")),o.a.createElement("div",null,"DPP Nilai Lain: Rp"," ",(Math.floor(Number(e.itemPrice/1.11)*(11/12))*Number(e.qty)).toLocaleString("id-ID")),o.a.createElement("div",null,"PPN 12%: ",e.ppnCurrencyFormat),o.a.createElement("small",null,"*PPN yang dikenakan telah menggunakan perhitungan terbaru sesuai dengan"," ",o.a.createElement("a",{target:"_blank",href:"https://jdih.kemenkeu.go.id/api/download/ad276b82-94bd-4197-b409-af33e2842cd6/2024pmkeuangan131.pdf"},"PMK No. 131 Tahun 2024"),"*")));return o.a.createElement("div",{key:e.id,className:"dropcart__product"},t,o.a.createElement("div",{className:"dropcart__product-info"},o.a.createElement("div",{className:"dropcart__product-name"},o.a.createElement(i.b,{to:h.b.product(e)},e.name)),void 0,r),l)});r=o.a.createElement("div",{className:"dropcart"},o.a.createElement("div",{className:"dropcart__products-list"},e),o.a.createElement("div",{className:"dropcart__totals"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Total"),o.a.createElement("td",null,t.items.totalCurrencyFormat))))),o.a.createElement("div",{className:"dropcart__buttons"},o.a.createElement(i.b,{className:"btn btn-secondary",to:"/shop/cart"},"Lihat Keranjang")))}else r=o.a.createElement("div",{className:"dropcart"},o.a.createElement("div",{className:"dropcart__empty"},"Keranjang belanja anda kosong"));return o.a.createElement(d.a,{url:"/shop/cart",dropdown:r,value:(null===t||void 0===t?void 0:t.total)||0,icon:o.a.createElement(u.j,null)})})),y=a(232),j=a(187),M=a(170);let _=[],O=[0,0,0];var k=e=>{const[t,a]=Object(n.useState)(!0),[s,r]=Object(n.useState)([]),[m,d]=Object(n.useState)([]),[p,h]=Object(n.useState)([]),{handleTransitionEnd:g,handleClose:b}=e;Object(n.useEffect)(()=>{let e=!1;return a(!0),j.a.getCategories().then(t=>{e||(r(t.data.map(e=>Object(l.a)(Object(l.a)({},e),{},{isActive:!1,submenu:e.submenu.menu}))),a(!1))}),()=>{e=!0}},[]),Object(n.useEffect)(()=>{document.querySelectorAll(".departments_links_item").forEach(e=>{e.classList.remove("active")}),p.forEach(e=>{let t=document.getElementById("".concat(e.id));t&&t.classList.add("active")})},[p]);const E=e=>{(e=>{let t={parentId:Number(e.parentId),id:Number(e.id)},a=O.findIndex(t=>Number(t.parentId)===Number(e.parentId));a>-1?(O[a]=t,O.length-1!==a&&O.pop(),O=[...O],h(O)):(O=[...O,t],h(O))})(e);let t=null;e.submenu&&e.submenu.length>0&&(t=o.a.createElement("div",{className:"departments_links_list"},f(e.submenu)));let a={parentId:e.id,title:e.title,content:t};if(e.submenu)if(0===Number(e.parentId))_=[a],d(_);else if(_.length>0)if(_[_.length-1].parentId===e.parentId)e.submenu.length>0&&(_=[..._,a],d(_));else{const t=_.findIndex(t=>t.parentId===e.parentId);t>-1&&(t+1!==_.length?(_.pop(),_[t+1]=a):_[t+1]=a,_=[..._],d(_))}},v=e=>{if(void 0===e.submenu||0===e.submenu.length){let t=O.findIndex(t=>Number(t.parentId)===Number(e.parentId));O.splice(t,1),O=[...O],h(O)}},f=e=>{if(e)return e.map((e,t)=>{let a=null,n=null;return e.submenu&&e.submenu.length>0&&(a=o.a.createElement("div",{className:"icon"},o.a.createElement(u.f,null))),n=o.a.createElement(i.b,{to:"/products/category/".concat(e.id,"/").concat(e.url),id:e.id,onMouseEnter:()=>{E(e)},onClick:()=>{b()},onMouseLeave:()=>{v(e)},className:c()("departments_links_item")},o.a.createElement("div",{className:"title"},e.title),a),e.submenu&&e.submenu.length>0&&(n=o.a.createElement(i.b,{id:e.id,to:"/products/category/".concat(e.id,"/").concat(e.url),onMouseEnter:()=>{E(e)},onMouseLeave:()=>{v(e)},className:c()("departments_links_item")},o.a.createElement("div",{className:"title"},e.title),a)),n})};return o.a.createElement("div",{className:"departments_links--custom",onTransitionEnd:g},o.a.createElement("div",{className:"d-flex mb-0 departments_links_container"},t?o.a.createElement(M.default,{style:{position:"static"}}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"departments_links_list"},f(s)," "),m.map(e=>e.content))))};class w extends n.Component{constructor(e){super(e),this.unsubscribeAria=()=>{},this.setWrapperRef=e=>{this.rootRef=e},this.handleOutsideClick=e=>{this.rootRef&&!this.rootRef.contains(e.target)&&this.setState(()=>({open:!1}))},this.handleButtonClick=()=>{this.setState(e=>({open:!e.open}))},this.handleTransitionEnd=e=>{this.rootRef&&"height"===e.propertyName&&(this.rootRef.querySelector(".departments__links-wrapper").style.height="",this.rootRef.classList.remove("departments--transition"))},this.state={open:!1,fixed:!1,area:null}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick),this.unsubscribeAria=y.a.subscribe(e=>{this.setState({fixed:!!e,area:e})}),this.setState({fixed:!!y.a.area,area:y.a.area})}componentDidUpdate(e,t){const{fixed:a,area:n,open:o}=this.state;if(t.fixed!==a){const e=this.rootRef,t=e.querySelector(".departments__links-wrapper");if(a){const a=n.getBoundingClientRect(),o=a.top+a.height+window.scrollY;e.classList.remove("departments--transition"),e.classList.add("departments--fixed","departments--opened");const s=o-(t.getBoundingClientRect().top+window.scrollY);t.style.height="".concat(s,"px"),t.getBoundingClientRect()}else e.classList.remove("departments--opened","departments--fixed"),t.style.height=""}else if(!a)if(o){const e=this.rootRef,t=e.querySelector(".departments__links-wrapper");t.getBoundingClientRect();const a=t.getBoundingClientRect().height;e.classList.add("departments--transition","departments--opened");const n=t.getBoundingClientRect().height;t.style.height="".concat(a,"px"),t.getBoundingClientRect(),t.style.height="".concat(n,"px")}else{const e=this.rootRef,t=e.querySelector(".departments__links-wrapper"),a=t.getBoundingClientRect().height;t.style.height="".concat(a,"px"),e.classList.add("departments--transition"),e.classList.remove("departments--opened"),t.getBoundingClientRect(),t.style.height=""}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick),this.unsubscribeAria()}render(){return o.a.createElement("div",{ref:this.setWrapperRef},o.a.createElement("div",{className:"departments"},o.a.createElement("div",{className:"departments__body"},o.a.createElement("div",{className:"departments__links-wrapper"})),o.a.createElement("button",{type:"button",className:"departments__button",onClick:this.handleButtonClick},o.a.createElement(u.q,{className:"departments__button-icon"}),"Kategori",o.a.createElement(u.c,{className:"departments__button-arrow"}))),this.state.open&&o.a.createElement(k,{handleClose:()=>this.setState({open:!1}),onTransitionEnd:this.handleTransitionEnd}))}}var x=w,C=a(10),L=a(18),T=a(42),I=a(43),S=a(27),D=a(23);a(24);const A={customerAdd:T.a,loginCustomer:I.b,resetMiniCart:g.c,resetFirstLogin:S.b};var z=Object(C.j)(Object(s.b)(e=>({customer:e.customer}),A)((function(e){const{customer:t}=e,a=o.a.createElement("div",{className:"account-menu"},o.a.createElement("div",{className:"account-menu__divider"}),o.a.createElement(i.b,{to:"/account/dashboard",className:"account-menu__user"},o.a.createElement("div",{className:"account-menu__user-avatar"},o.a.createElement("img",{src:"https://siplah.eurekabookhouse.co.id/assets/image/logo-kemdikbud.png",alt:""})),o.a.createElement("div",{className:"account-menu__user-info"},o.a.createElement("div",{className:"account-menu__user-name"},null===t||void 0===t?void 0:t.name),o.a.createElement("div",{className:"account-menu__user-email",style:{fontSize:"12px"}},null===t||void 0===t?void 0:t.email))),o.a.createElement("div",{className:"account-menu__divider"}),o.a.createElement("ul",{className:"account-menu__links"},o.a.createElement("li",null,o.a.createElement(i.b,{to:"/account/detail"},"Data Sekolah")),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/account/orders"},"Riwayat Belanja")),o.a.createElement("li",null,o.a.createElement(i.b,{to:"/account/notification"},"Notifikasi")),o.a.createElement("li",null)),o.a.createElement("div",{className:"account-menu__divider"}),o.a.createElement("ul",{className:"account-menu__links"},o.a.createElement("li",null,o.a.createElement("a",{style:{cursor:"pointer"},onClick:()=>{localStorage.removeItem("auth"),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("persist:primary"),localStorage.removeItem("notifShown"),window.location.href="/satdik",L.a.logout(null===t||void 0===t?void 0:t.token).then(t=>{e.customerAdd(null),e.resetMiniCart(),e.resetFirstLogin(),localStorage.clear(),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("notifShown"),L.a.clearCache(),D.b.success("Berhasil logout"),window.location.href="/satdik"}).catch(e=>{console.log("Logout error:",e),D.b.error("Gagal logout")})}},"Logout"))));return o.a.createElement(d.a,{url:"/account",dropdown:a,icon:o.a.createElement(u.t,null)})}))),R=a(276),P=a(309),B=a(245),Y=a(69),F=a(231);const U={addChatList:Y.a};var W=Object(s.b)(e=>({customer:e.customer,chat:e.chat,newMessage:e.newMessage}),U)(e=>{const[t,a]=Object(n.useState)(!1),[s,i]=Object(n.useState)(0);Object(n.useEffect)(()=>{i(e.newMessage)},[e]);const l=()=>{a(!t)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{onClick:l,icon:o.a.createElement(u.k,null),value:0===s?void 0:s}),o.a.createElement(R.a,{isOpen:t,style:{overflowY:"hidden"},size:"xl",toggle:l},o.a.createElement(P.a,{toggle:l},o.a.createElement("h5",{className:"title"},"Chat")),o.a.createElement(B.a,null,o.a.createElement(F.a,{layout:"modal",toggle:l}))))});var Q=Object(s.b)(e=>({compare:e.compare}),null)((function(e){return o.a.createElement(d.a,{url:"/shop/compare",icon:o.a.createElement(u.n,null)})})),Z=a(49),H=a(58);const G={cartRemoveItem:p.e,addMiniCart:g.a,closeNotif:Z.a};var J=Object(s.b)(e=>({cart:e.cart,miniCart:e.miniCart,customer:e.customer,openNotif:e.openNotif}),G)((function(e){var t,a;const{customer:s}=e,[r,p]=Object(n.useState)(()=>{const e=localStorage.getItem("notificationReminder");return e?JSON.parse(e):[]}),[h,g]=Object(n.useState)(()=>{const e=localStorage.getItem("notification");return e?JSON.parse(e):[]}),b=Object(C.g)(),[E,v]=Object(n.useState)(!0);let f;Object(n.useEffect)(()=>{"true"===localStorage.getItem("notifShownApi")||Promise.all([L.a.getNotification({page:1,limit:3,isNotifReminder:1},{},null===s||void 0===s?void 0:s.token),L.a.getNotification({page:1,limit:3,isNotifReminder:0},{},null===s||void 0===s?void 0:s.token)]).then(e=>{let[t,a]=e;200===t.status.code&&(console.log(t.data),p(t.data),localStorage.setItem("notificationReminder",JSON.stringify(t.data))),200===a.status.code&&(console.log(a.data),g(a.data),localStorage.setItem("notification",JSON.stringify(a.data))),localStorage.setItem("notifShownApi","true")})},[]);const N=()=>L.a.readAllNotification(null===s||void 0===s?void 0:s.token).then(e=>{200===e.status.code?(D.b.success("Semua notifikasi telah dibaca"),v(e=>!e)):D.b.error("Terjadi kesalaha pada sistem")}),y=async e=>{await L.a.readNotification({id:e.id},null===s||void 0===s?void 0:s.token),g(t=>{var a;const n=null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(t=>t.id===e.id?Object(l.a)(Object(l.a)({},t),{},{isRead:!0}):t),o=Object(l.a)(Object(l.a)({},t),{},{items:n});return localStorage.setItem("notification",JSON.stringify(o)),o}),p(t=>{var a;const n=null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(t=>t.id===e.id?Object(l.a)(Object(l.a)({},t),{},{isRead:!0}):t),o=Object(l.a)(Object(l.a)({},t),{},{items:n});return localStorage.setItem("notificationReminder",JSON.stringify(o)),o}),H.a.event({category:"School Notification",action:"Show Order Detail From Notification"}),b.push((e=>{switch(e.type){case"nego":return"/account/negotiation/".concat(e.linkRedirect);default:return"/account/orders/".concat(e.linkRedirect)}})(e))};if((null===h||void 0===h||null===(t=h.items)||void 0===t?void 0:t.length)>0||(null===r||void 0===r||null===(a=r.items)||void 0===a?void 0:a.length)>0){var j,M;const e=null===h||void 0===h||null===(j=h.items)||void 0===j?void 0:j.map(e=>{let t;return e.icon&&(t=o.a.createElement("div",{className:"product-image dropcart__product-image d-flex justify-content-center align-items-center",style:{width:"45px",height:"50px"}},o.a.createElement("span",{onClick:()=>y(e),className:"product-image__body"},o.a.createElement("img",{className:"product-image__img",src:e.icon,alt:"icon"})))),o.a.createElement("div",{key:e.id,onClick:()=>y(e),className:"dropcart__product my-1",style:e.isRead?{padding:"10px 0",cursor:"pointer"}:{background:"rgba(14, 51, 109, 0.11) none repeat scroll 0% 0%",padding:"10px 0",cursor:"pointer"}},t,o.a.createElement("div",{className:"dropcart__product-info"},o.a.createElement("div",{className:"dropcart__product-name d-flex justify-content-between flex-column",style:{fontSize:"12px",height:"100%"}},o.a.createElement("span",{className:"font-weight-bold mb-1",style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical"}},e.title),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text},style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical"}}))))}),t=null===r||void 0===r||null===(M=r.items)||void 0===M?void 0:M.map(e=>{let t;return e.icon&&(t=o.a.createElement("div",{className:"product-image dropcart__product-image d-flex justify-content-center align-items-center",style:{width:"45px",height:"50px"}},o.a.createElement("span",{onClick:()=>y(e),className:"product-image__body"},o.a.createElement("img",{className:"product-image__img",src:e.icon,alt:"icon"})))),o.a.createElement("div",{key:e.id,onClick:()=>y(e),className:"dropcart__product my-1",style:e.isRead?{padding:"10px 0",cursor:"pointer"}:{background:"rgba(14, 51, 109, 0.11) none repeat scroll 0% 0%",padding:"10px 0",cursor:"pointer"}},t,o.a.createElement("div",{className:"dropcart__product-info"},o.a.createElement("div",{className:"dropcart__product-name d-flex justify-content-between flex-column",style:{fontSize:"12px",height:"100%"}},o.a.createElement("span",{className:"font-weight-bold mb-1",style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical"}},e.title),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text},style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical"}}),e.mustFollowUp&&o.a.createElement("small",{className:"text-primary d-block text-right"},"Tindaklanjuti ",o.a.createElement("i",{class:"fa fa-angle-right","aria-hidden":"true"})))))});f=o.a.createElement("div",{className:"dropcart",style:{overflowY:"auto",maxHeight:"400px"}},o.a.createElement("div",{style:{padding:"10px 0 0 10px"}},o.a.createElement("small",{className:"text-muted"},"Perlu Ditindaklajuti")),(null===t||void 0===t?void 0:t.length)>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"dropcart__products-list dropnotification__list mb-0"},t),o.a.createElement("div",{className:"d-flex justify-content-center py-1"},o.a.createElement(i.b,{className:"text-center d-inline-block",to:"/account/notification?isNotifReminder=1"},"Lihat Selengkapnya"))):o.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"),o.a.createElement("div",{style:{padding:"5px 10px",marginTop:"5px"},className:"d-flex justify-content-between align-items-center"},o.a.createElement("small",{className:"text-muted"},"Informasi untuk anda"),o.a.createElement(m.a,{action:N,render:e=>{let{run:t,loading:a}=e;return o.a.createElement("button",{style:{fontSize:"12px",padding:"5px",height:"calc(1.543rem + 2px)"},type:"button",onClick:t,className:c()("btn btn-primary btn-sm",{"btn-loading":a})},"Tandai sudah dibaca")}})),(null===e||void 0===e?void 0:e.length)>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"dropcart__products-list dropnotification__list"},e),o.a.createElement("div",{className:"d-flex justify-content-center pb-2"},o.a.createElement(i.b,{className:"text-center d-inline-block",to:"/account/notification?type=notif"},"Lihat Selengkapnya"))):o.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"))}else f=o.a.createElement("div",{className:"dropcart"},o.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"));return o.a.createElement(d.a,{url:"/account/notification",closeNotif:e.closeNotif,openNotif:e.openNotif,dropdown:f,value:(null===s||void 0===s?void 0:s.totalNotifReminder)||void 0,icon:o.a.createElement(u.s,{style:{width:"20px"}})})})),X=a(233);function q(e){const{layout:t}=e;let a=null,n=null;return"compact"===t&&(a=o.a.createElement("div",{className:"nav-panel__logo"},o.a.createElement(i.b,{to:"/"},o.a.createElement("img",{alt:"",src:"https://siplah.eurekabookhouse.co.id/assets/front/images/icons/ebhcom-header_new.png",style:{width:"100%"}})))),"default"===t&&(n=o.a.createElement("div",{className:"nav-panel__departments"},o.a.createElement(x,null))),o.a.createElement("div",{className:"nav-panel"},o.a.createElement("div",{className:"nav-panel__container container"},o.a.createElement("div",{className:"nav-panel__row"},a,n,o.a.createElement("div",{className:"nav-panel__indicators align-items-center justify-content-between"},o.a.createElement("div",{className:"site-header__search",style:{width:"100%",marginRight:"20px",flexGrow:0}},o.a.createElement(X.a,{context:"header"})),e.auth?o.a.createElement(o.a.Fragment,null,o.a.createElement(W,null),o.a.createElement(Q,null),o.a.createElement(J,null),o.a.createElement(N,null),o.a.createElement(z,null)):o.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},o.a.createElement(i.b,{to:"/login",style:{borderRadius:"10px",background:"rgb(255,98,33)",color:"white"},className:"btn mr-2"},"Login"),o.a.createElement("a",{style:{borderRadius:"10px",background:"#0A6BB2",color:"white"},className:"btn ",href:"https://siplah.eurekabookhouse.co.id/penyedia/register",target:"_blank",rel:"noopener noreferrer"},"Daftar"))))))}q.defaultProps={layout:"default"};t.default=Object(s.b)(e=>({auth:e.auth}),{})(q)}}]);
//# sourceMappingURL=18.80454bcf.chunk.js.map