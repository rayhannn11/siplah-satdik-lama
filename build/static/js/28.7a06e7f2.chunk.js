(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[28],{178:function(t,e,o){"use strict";var a=o(4),i=o(7),s=o.n(i);const n={getNewProducts:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const i={limit:t.limit||10,page:t.page||1};return o&&(i.keyword=o),t.sort&&(i.sort=t.sort),t.locationName&&(i.filter_province=t.locationName),t.locationId&&(i.filter_locationId=t.locationId),t.categoryId&&(i.filter_categoryId=t.categoryId),t.longitude&&(i.longitude=t.longitude),t.latitude&&(i.latitude=t.latitude),Object.keys(e).forEach(t=>{i["filter_".concat(t)]=e[t]}),fetch("https://siplah.eurekabookhouse.co.id/api/product/shortProduct?".concat(s.a.stringify(i)),{headers:{"Content-Type":"application/json",Authorization:a||""}}).then(t=>t.json())},getStores:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const n=Object(a.a)(Object(a.a)({},t),{},{keyword:o});return Object.keys(e).forEach(t=>{n["filter_".concat(t)]=e[t]}),fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall?").concat(s.a.stringify(n)),{headers:{"Content-Type":"application/json",Authorization:i||""}}).then(t=>t.json())},getStore:t=>{const e={slug:t};return fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall?").concat(s.a.stringify(e))).then(t=>t.json())},addReviewStore:(t,e)=>fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall/review"),{method:"post",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify(t)}).then(t=>t.json()),searchStore:t=>fetch("https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword=".concat(t),{method:"get",headers:{"Content-Type":"application/json"}}).then(t=>t.json()),uploadExcel:(t,e)=>{const o=new FormData;return o.append("file",t),o.append("mall_id",e),fetch("https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV",{method:"POST",body:o}).then(t=>t.json())}};e.a=n},400:function(t,e,o){"use strict";o.r(e);var a=o(4),i=o(1),s=o.n(i),n=o(7),r=o.n(n),c=o(40),l=o(53),d=o(170),p=o(203),u=o(204),g=o(207),h=(o(65),o(178)),f=o(206),m=o(66),y=o(171);function b(t){const e=r.a.parse(t),o={page:1,limit:24};return"string"===typeof e.page&&(o.page=parseFloat(e.page)),"string"===typeof e.limit&&(o.limit=parseFloat(e.limit)),"string"===typeof e.sort&&(o.sort=e.sort),"string"===typeof e.categoryId&&(o.categoryId=e.categoryId),"string"===typeof e.locationId&&(o.locationId=e.locationId),"string"===typeof e.locationName&&(o.locationName=e.locationName),"string"===typeof e.longitude&&(o.longitude=e.longitude),"string"===typeof e.latitude&&(o.latitude=e.latitude),o}function S(t){const e=r.a.parse(t);let o=void 0;return"string"==typeof e.keyword&&(o=e.keyword),o}function v(t){const e=r.a.parse(t),o={};return Object.keys(e).forEach(t=>{const a=t.match(/^filter_([-_A-Za-z0-9]+)$/);if(!a)return;const i=a[1];o[i]=e[t]}),o}const j={init:!1,categoryIsLoading:!0,category:null,productsListIsLoading:!0,productsList:null,options:{},filters:{},keyword:null};function E(t,e){switch(e.type){case"FETCH_CATEGORY_SUCCESS":return Object(a.a)(Object(a.a)({},t),{},{init:!0,categoryIsLoading:!1,category:e.category});case"FETCH_PRODUCTS_LIST":return Object(a.a)(Object(a.a)({},t),{},{productsListIsLoading:!0});case"FETCH_PRODUCTS_LIST_SUCCESS":return Object(a.a)(Object(a.a)({},t),{},{productsListIsLoading:!1,productsList:e.productsList});case"SET_OPTION_VALUE":return Object(a.a)(Object(a.a)({},t),{},{options:Object(a.a)(Object(a.a)({},t.options),{},{page:1,[e.option]:e.value})});case"SET_FILTER_VALUE":return Object(a.a)(Object(a.a)({},t),{},{options:Object(a.a)(Object(a.a)({},t.options),{},{page:1}),filters:Object(a.a)(Object(a.a)({},t.filters),{},{[e.filter]:e.value})});case"RESET_FILTERS":return Object(a.a)(Object(a.a)({},t),{},{options:Object(a.a)(Object(a.a)({},t.options),{},{page:1,locationName:"",locationId:"",categoryId:""}),filters:{}});case"RESET":return t.init?j:t;default:throw new Error}}function O(t){const[e,o,i]=[b(s=window.location.search),v(s),S(s)];var s;return Object(a.a)(Object(a.a)({},t),{},{options:e,filters:o,keyword:i})}function k(t){var e,o;const{columns:n,viewMode:c,sidebarPosition:m,customer:b}=t,S=3===n?"mobile":"always",[v,k]=Object(i.useReducer)(E,j,O);if(Object(i.useEffect)(()=>{const t=function(t,e,o){const a={};return 1!==t.page&&(a.page=t.page),24!==t.limit&&(a.limit=t.limit),"default"!==t.sort&&(a.sort=t.sort),""!==t.longitude&&(a.longitude=t.longitude),""!==t.latidude&&(a.latidude=t.latidude),""!==t.locationName&&(a.locationName=t.locationName),""!==t.locationId&&(a.locationId=t.locationId),""!==t.categoryId&&(a.categoryId=t.categoryId),""!==o&&void 0!==o&&null!==o&&(a.keyword=o),Object.keys(e).filter(t=>!!e[t]).forEach(t=>{a["filter_".concat(t)]=e[t]}),r.a.stringify(a,{encode:!1})}(v.options,v.filters,v.keyword),e="".concat(window.location.pathname).concat(t?"?":"").concat(t);window.history.replaceState(null,"",e)},[v.options,v.filters,v.keyword]),Object(i.useEffect)(()=>{let e=!1;return k({type:"FETCH_PRODUCTS_LIST"}),""!==v.keyword&&void 0!==v.keyword||t.history.push("/"),h.a.getNewProducts(v.options,Object(a.a)({},v.filters),v.keyword,null===b||void 0===b?void 0:b.token).then(t=>{var o;if(e)return;console.log("ShopPageSearch - API result:",t);const i=(null===(o=t.data)||void 0===o?void 0:o.data)||t.data||t;console.log("ShopPageSearch - apiData:",i),console.log("ShopPageSearch - apiData.items:",null===i||void 0===i?void 0:i.items),console.log("ShopPageSearch - apiData.filters:",null===i||void 0===i?void 0:i.filters),console.log("ShopPageSearch - apiData.sorts:",null===i||void 0===i?void 0:i.sorts);const s=Object(a.a)(Object(a.a)({},i),{},{page:v.options.page||1,pages:i.items&&i.items.length<(i.limit||10)?v.options.page||1:(v.options.page||1)+1,sorts:i.sorts||[{slug:"RELEVANCE",name:"Paling Sesuai",isSelected:!0},{slug:"name-asc",name:"Nama (A-Z)",isSelected:!1},{slug:"name-desc",name:"Nama (Z-A)",isSelected:!1},{slug:"price-asc",name:"Harga Terendah",isSelected:!1},{slug:"price-desc",name:"Harga Tertinggi",isSelected:!1}],filters:i.filters||[]});console.log("ShopPageSearch - transformedData:",s),console.log("ShopPageSearch - transformedData.filters:",s.filters),k({type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:s})}).catch(t=>{console.error("Search API Error:",t),e||k({type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:{items:[],page:1,pages:1,limit:24,sorts:[],filters:[]}})}),()=>{e=!0}},[k,v.keyword,v.options,v.filters,t.history]),v.productsListIsLoading&&!v.productsList)return s.a.createElement(d.default,null);let I;const w=s.a.createElement(g.a,{isLoading:v.productsListIsLoading,productsList:v.productsList||{items:[],sorts:[],filters:[]},sorts:(null===(e=v.productsList)||void 0===e?void 0:e.sorts)||[],options:v.options,filters:v.filters,dispatch:k,layout:c,grid:"grid-".concat(n,"-").concat(n>3?"full":"sidebar"),offcanvas:S,keyword:v.keyword}),L=s.a.createElement(p.a,{offcanvas:S},s.a.createElement(u.a,null,s.a.createElement(f.a,{title:"Filter",offcanvas:S,filters:((null===(o=v.productsList)||void 0===o?void 0:o.filters)||[]).map(t=>"category"===t.type?Object(a.a)(Object(a.a)({},t),{},{selected:v.options.categoryId}):Object(a.a)({},t)),values:Object(a.a)(Object(a.a)({},v.filters),v.options),dispatch:k})));if(n>4)I=s.a.createElement("div",{className:"container mt-5"},s.a.createElement("div",{className:"block"},w),L);else{const t=s.a.createElement("div",{className:"shop-layout__sidebar"},L);I=s.a.createElement("div",{className:"container mt-5"},v.productsList.categoryFiltered&&s.a.createElement("div",{className:"page-header__title mt-1"},s.a.createElement("h4",null,v.productsList.categoryFiltered)),s.a.createElement("div",{className:"shop-layout shop-layout--sidebar--".concat(m)},"start"===m&&t,s.a.createElement("div",{className:"shop-layout__content"},s.a.createElement("div",{className:"block"},w)),"end"===m&&t))}return s.a.createElement("div",{style:{background:"rgb(236,236,237)"},className:"pt-5"},s.a.createElement(l.a,null,s.a.createElement("title",null,y.a.name)),I)}k.defaultProps={columns:3,viewMode:"grid",sidebarPosition:"start"};e.default=Object(c.b)(t=>({sidebarState:t.sidebar,page:t.category,customer:t.customer}),()=>({sidebarClose:m.b}))(k)}}]);
//# sourceMappingURL=28.7a06e7f2.chunk.js.map