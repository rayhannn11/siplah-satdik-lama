(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[28],{142:function(e,t,o){"use strict";var a=o(6),i=o.n(a);const s={getNewProducts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const s={limit:e.limit||10,page:e.page||1};return o&&(s.keyword=o),e.sort&&(s.sort=e.sort),e.locationName&&(s.filter_province=e.locationName),e.locationId&&(s.filter_locationId=e.locationId),e.categoryId&&(s.filter_categoryId=e.categoryId),e.longitude&&(s.longitude=e.longitude),e.latitude&&(s.latitude=e.latitude),Object.keys(t).forEach(e=>{s["filter_"+e]=t[e]}),fetch("https://siplah.eurekabookhouse.co.id/api/product/shortProduct?"+i.a.stringify(s),{headers:{"Content-Type":"application/json",Authorization:a||""}}).then(e=>e.json())},getStores:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const s={...e,keyword:o};return Object.keys(t).forEach(e=>{s["filter_"+e]=t[e]}),fetch("https://siplah.eurekabookhouse.co.id/api/mall?"+i.a.stringify(s),{headers:{"Content-Type":"application/json",Authorization:a||""}}).then(e=>e.json())},getStore:e=>{const t={slug:e};return fetch("https://siplah.eurekabookhouse.co.id/api/mall?"+i.a.stringify(t)).then(e=>e.json())},addReviewStore:(e,t)=>fetch("https://siplah.eurekabookhouse.co.id/api/mall/review",{method:"post",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then(e=>e.json()),searchStore:e=>fetch("https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword="+e,{method:"get",headers:{"Content-Type":"application/json"}}).then(e=>e.json()),uploadExcel:(e,t)=>{const o=new FormData;return o.append("file",e),o.append("mall_id",t),fetch("https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV",{method:"POST",body:o}).then(e=>e.json())}};t.a=s},364:function(e,t,o){"use strict";o.r(t);var a=o(1),i=o.n(a),s=o(6),r=o.n(s),n=o(34),l=o(46),c=o(135),d=o(167),p=o(168),u=o(171),g=(o(57),o(142)),h=o(170),f=o(58),m=o(136);function y(e){const t=r.a.parse(e),o={page:1,limit:24};return"string"===typeof t.page&&(o.page=parseFloat(t.page)),"string"===typeof t.limit&&(o.limit=parseFloat(t.limit)),"string"===typeof t.sort&&(o.sort=t.sort),"string"===typeof t.categoryId&&(o.categoryId=t.categoryId),"string"===typeof t.locationId&&(o.locationId=t.locationId),"string"===typeof t.locationName&&(o.locationName=t.locationName),"string"===typeof t.longitude&&(o.longitude=t.longitude),"string"===typeof t.latitude&&(o.latitude=t.latitude),o}function S(e){const t=r.a.parse(e);let o=void 0;return"string"==typeof t.keyword&&(o=t.keyword),o}function E(e){const t=r.a.parse(e),o={};return Object.keys(t).forEach(e=>{const a=e.match(/^filter_([-_A-Za-z0-9]+)$/);if(!a)return;const i=a[1];o[i]=t[e]}),o}const v={init:!1,categoryIsLoading:!0,category:null,productsListIsLoading:!0,productsList:null,options:{},filters:{},keyword:null};function k(e,t){switch(t.type){case"FETCH_CATEGORY_SUCCESS":return{...e,init:!0,categoryIsLoading:!1,category:t.category};case"FETCH_PRODUCTS_LIST":return{...e,productsListIsLoading:!0};case"FETCH_PRODUCTS_LIST_SUCCESS":return{...e,productsListIsLoading:!1,productsList:t.productsList};case"SET_OPTION_VALUE":return{...e,options:{...e.options,page:1,[t.option]:t.value}};case"SET_FILTER_VALUE":return{...e,options:{...e.options,page:1},filters:{...e.filters,[t.filter]:t.value}};case"RESET_FILTERS":return{...e,options:{...e.options,page:1,locationName:"",locationId:"",categoryId:""},filters:{}};case"RESET":return e.init?v:e;default:throw new Error}}function I(e){const[t,o,a]=[y(i=window.location.search),E(i),S(i)];var i;return{...e,options:t,filters:o,keyword:a}}function w(e){var t,o;const{columns:s,viewMode:n,sidebarPosition:f,customer:y}=e,S=3===s?"mobile":"always",[E,w]=Object(a.useReducer)(k,v,I);if(Object(a.useEffect)(()=>{const e=function(e,t,o){const a={};return 1!==e.page&&(a.page=e.page),24!==e.limit&&(a.limit=e.limit),"default"!==e.sort&&(a.sort=e.sort),""!==e.longitude&&(a.longitude=e.longitude),""!==e.latidude&&(a.latidude=e.latidude),""!==e.locationName&&(a.locationName=e.locationName),""!==e.locationId&&(a.locationId=e.locationId),""!==e.categoryId&&(a.categoryId=e.categoryId),""!==o&&void 0!==o&&null!==o&&(a.keyword=o),Object.keys(t).filter(e=>!!t[e]).forEach(e=>{a["filter_"+e]=t[e]}),r.a.stringify(a,{encode:!1})}(E.options,E.filters,E.keyword),t=`${window.location.pathname}${e?"?":""}${e}`;window.history.replaceState(null,"",t)},[E.options,E.filters,E.keyword]),Object(a.useEffect)(()=>{let t=!1;return w({type:"FETCH_PRODUCTS_LIST"}),""!==E.keyword&&void 0!==E.keyword||e.history.push("/"),g.a.getNewProducts(E.options,{...E.filters},E.keyword,y.token).then(e=>{var o;if(t)return;console.log("ShopPageSearch - API result:",e);const a=(null===(o=e.data)||void 0===o?void 0:o.data)||e.data||e;console.log("ShopPageSearch - apiData:",a),console.log("ShopPageSearch - apiData.items:",null===a||void 0===a?void 0:a.items),console.log("ShopPageSearch - apiData.filters:",null===a||void 0===a?void 0:a.filters),console.log("ShopPageSearch - apiData.sorts:",null===a||void 0===a?void 0:a.sorts);const i={...a,page:E.options.page||1,pages:a.items&&a.items.length<(a.limit||10)?E.options.page||1:(E.options.page||1)+1,sorts:a.sorts||[{slug:"RELEVANCE",name:"Paling Sesuai",isSelected:!0},{slug:"name-asc",name:"Nama (A-Z)",isSelected:!1},{slug:"name-desc",name:"Nama (Z-A)",isSelected:!1},{slug:"price-asc",name:"Harga Terendah",isSelected:!1},{slug:"price-desc",name:"Harga Tertinggi",isSelected:!1}],filters:a.filters||[]};console.log("ShopPageSearch - transformedData:",i),console.log("ShopPageSearch - transformedData.filters:",i.filters),w({type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:i})}).catch(e=>{console.error("Search API Error:",e),t||w({type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:{items:[],page:1,pages:1,limit:24,sorts:[],filters:[]}})}),()=>{t=!0}},[w,E.keyword,E.options,E.filters,e.history]),E.productsListIsLoading&&!E.productsList)return i.a.createElement(c.default,null);let L;const _=i.a.createElement(u.a,{isLoading:E.productsListIsLoading,productsList:E.productsList||{items:[],sorts:[],filters:[]},sorts:(null===(t=E.productsList)||void 0===t?void 0:t.sorts)||[],options:E.options,filters:E.filters,dispatch:w,layout:n,grid:`grid-${s}-${s>3?"full":"sidebar"}`,offcanvas:S,keyword:E.keyword}),b=i.a.createElement(d.a,{offcanvas:S},i.a.createElement(p.a,null,i.a.createElement(h.a,{title:"Filter",offcanvas:S,filters:((null===(o=E.productsList)||void 0===o?void 0:o.filters)||[]).map(e=>"category"===e.type?{...e,selected:E.options.categoryId}:{...e}),values:{...E.filters,...E.options},dispatch:w})));if(s>4)L=i.a.createElement("div",{className:"container mt-5"},i.a.createElement("div",{className:"block"},_),b);else{const e=i.a.createElement("div",{className:"shop-layout__sidebar"},b);L=i.a.createElement("div",{className:"container mt-5"},E.productsList.categoryFiltered&&i.a.createElement("div",{className:"page-header__title mt-1"},i.a.createElement("h4",null,E.productsList.categoryFiltered)),i.a.createElement("div",{className:"shop-layout shop-layout--sidebar--"+f},"start"===f&&e,i.a.createElement("div",{className:"shop-layout__content"},i.a.createElement("div",{className:"block"},_)),"end"===f&&e))}return i.a.createElement("div",{style:{background:"rgb(236,236,237)"},className:"pt-5"},i.a.createElement(l.a,null,i.a.createElement("title",null,m.a.name)),L)}w.defaultProps={columns:3,viewMode:"grid",sidebarPosition:"start"};t.default=Object(n.b)(e=>({sidebarState:e.sidebar,page:e.category,customer:e.customer}),()=>({sidebarClose:f.b}))(w)}}]);
//# sourceMappingURL=28.fd413a6d.chunk.js.map