(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[22,42],{144:function(e,t,a){"use strict";var o=a(4),c=a(7),s=a.n(c);const r={getNewProducts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const c={limit:e.limit||10,page:e.page||1};return a&&(c.keyword=a),e.sort&&(c.sort=e.sort),e.locationName&&(c.filter_province=e.locationName),e.locationId&&(c.filter_locationId=e.locationId),e.categoryId&&(c.filter_categoryId=e.categoryId),e.longitude&&(c.longitude=e.longitude),e.latitude&&(c.latitude=e.latitude),Object.keys(t).forEach(e=>{c["filter_".concat(e)]=t[e]}),fetch("https://siplah.eurekabookhouse.co.id/api/product/shortProduct?".concat(s.a.stringify(c)),{headers:{"Content-Type":"application/json",Authorization:o||""}}).then(e=>e.json())},getStores:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;const r=Object(o.a)(Object(o.a)({},e),{},{keyword:a});return Object.keys(t).forEach(e=>{r["filter_".concat(e)]=t[e]}),fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall?").concat(s.a.stringify(r)),{headers:{"Content-Type":"application/json",Authorization:c||""}}).then(e=>e.json())},getStore:e=>{const t={slug:e};return fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall?").concat(s.a.stringify(t))).then(e=>e.json())},addReviewStore:(e,t)=>fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","mall/review"),{method:"post",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then(e=>e.json()),searchStore:e=>fetch("https://siplahstagingapi.eurekagroup.id/penyedia/get-cv?page=1&limit=5&keyword=".concat(e),{method:"get",headers:{"Content-Type":"application/json"}}).then(e=>e.json()),uploadExcel:(e,t)=>{const a=new FormData;return a.append("file",e),a.append("mall_id",t),fetch("https://siplahstagingapi.eurekagroup.id/penyedia/uploadCSV",{method:"POST",body:a}).then(e=>e.json())}};t.a=r},168:function(e,t,a){"use strict";t.a=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}));return new String(t)}},180:function(e,t,a){"use strict";a.r(t);var o=a(4),c=a(1),s=a.n(c),r=a(10),l=a(7),n=a.n(l),i=a(35),m=a(136),d=a(169),u=a(170),p=a(173),g=a(58),h=a(172),f=a(59);function b(e){const t=n.a.parse(e),a={page:1,limit:6,from:"",fromProductId:""};return"string"===typeof t.page&&(a.page=parseFloat(t.page)),"string"===typeof t.limit&&(a.limit=parseFloat(t.limit)),"string"===typeof t.sort&&(a.sort=t.sort),"string"===typeof t.keyword&&(a.keyword=t.keyword),"string"===typeof t.from&&(a.from=t.from),"string"===typeof t.fromProductId&&(a.fromProductId=t.fromProductId),"string"===typeof t.categoryId&&(a.categoryId=t.categoryId),a}function E(e){const t=n.a.parse(e),a={};return Object.keys(t).forEach(e=>{const o=e.match(/^filter_([-_A-Za-z0-9]+)$/);if(!o)return;const c=o[1];a[c]=t[e]}),a}const v={init:!1,categoryIsLoading:!0,category:null,productsListIsLoading:!0,productsList:null,options:{},filters:{}};function y(e,t){switch(t.type){case"FETCH_CATEGORY_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{init:!0,categoryIsLoading:!1,category:t.category});case"FETCH_PRODUCTS_LIST":return Object(o.a)(Object(o.a)({},e),{},{productsListIsLoading:!0});case"FETCH_PRODUCTS_LIST_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{productsListIsLoading:!1,productsList:t.productsList});case"SET_OPTION_VALUE":return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},{page:1,[t.option]:t.value})});case"SET_FILTER_VALUE":return Object(o.a)(Object(o.a)({},e),{},{options:Object(o.a)(Object(o.a)({},e.options),{},{page:1}),filters:Object(o.a)(Object(o.a)({},e.filters),{},{[t.filter]:t.value})});case"RESET_FILTERS":return Object(o.a)(Object(o.a)({},e),{},{options:{page:1,limit:6},filters:{}});case"RESET":return e.init?v:e;default:throw new Error}}function N(e){const[t,a]=[b(c=window.location.search),E(c)];var c;return Object(o.a)(Object(o.a)({},e),{},{options:t,filters:a})}function j(e){const{columns:t,viewMode:a,sidebarPosition:l,store:i,forAct:f,doHandleChooseProduct:b,mainProduct:E,customer:j,doHandleFetchCompareList:O}=e,_=3===t?"mobile":"always",[k,w]=Object(c.useReducer)(y,v,N);let x,{slug:I,categoryId:S}=Object(r.i)();if(Object(c.useEffect)(()=>{const e=function(e,t){const a={};return 1!==e.page&&(a.page=e.page),6!==e.limit&&(a.limit=e.limit),""!==e.sort&&(a.sort=e.sort),""!==e.keyword&&(a.keyword=e.keyword),""!==e.from&&(a.from=e.from),""!==e.fromProductId&&(a.fromProductId=e.fromProductId),""!==e.categoryId&&(a.categoryId=e.categoryId),Object.keys(t).filter(e=>!!t[e]).forEach(e=>{a["filter_".concat(e)]=t[e]}),n.a.stringify(a,{encode:!1})}(k.options,k.filters),t="".concat(window.location.pathname).concat(e?"?":"").concat(e);window.history.replaceState(null,"",t)},[k.options,k.filters]),""!==i&&void 0!==i&&(I=i),Object(c.useEffect)(()=>{let e=!1;return w({type:"FETCH_PRODUCTS_LIST"}),g.a.getProducts(Object(o.a)({},k.options),Object(o.a)({},k.filters),I,S,j.token).then(t=>{const{data:a}=t;e||w(f?{type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:a}:{type:"FETCH_PRODUCTS_LIST_SUCCESS",productsList:Object(o.a)(Object(o.a)({},a),{},{filters:a.filters.filter(e=>"category"!==e.type)})})}),()=>{e=!0}},[w,I,i,S,k.categoryName,k.options,k.filters,j.token]),k.productsListIsLoading&&!k.productsList)return s.a.createElement(m.default,null);const C=s.a.createElement(p.a,{forAct:f,doHandleChooseProduct:b,isLoading:k.productsListIsLoading,productsList:k.productsList,mainProduct:E,sorts:k.productsList.sorts,options:k.options,filters:k.filters,dispatch:w,layout:a,doHandleFetchCompareList:O,grid:"grid-".concat(t,"-").concat(t>3?"full":"sidebar"),offcanvas:_});let T=s.a.createElement(d.a,{offcanvas:_},s.a.createElement(u.a,null,s.a.createElement(h.a,{title:"Filter",offcanvas:_,filters:k.productsList.filters,values:k.filters,dispatch:w})));if("compare"===f&&(T=s.a.createElement(d.a,{offcanvas:_,style:{position:"sticky",top:"10px",left:0}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement("img",{alt:"",src:E.image,style:{width:"100%",opacity:.7,display:"block",height:"auto",transition:".5s ease",backfaceVisibility:"hidden"}})),s.a.createElement("div",{className:"col-12 text-center",style:{position:"absolute",top:" 50%",left:" 50%",transform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)",textAlign:"center",background:"rgba(0,0,0,.5)",padding:"17px",color:"white"}},s.a.createElement("h5",null,E.name),s.a.createElement("h6",null,E.priceCurrencyFormat),s.a.createElement("h6",null,"Jumlah : ",E.qty),s.a.createElement("span",{class:"badge badge-primary"},"Barang Yang Dibandingkan"))))))),t>4)x=s.a.createElement("div",{className:"container mt-5"},s.a.createElement("div",{className:"block"},C),T);else{const e=s.a.createElement("div",{className:"shop-layout__sidebar"},T);x=s.a.createElement("div",{style:{background:"rgb(236,236,237)"},className:"pt-5"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"shop-layout shop-layout--sidebar--".concat(l)},"start"===l&&e,s.a.createElement("div",{className:"shop-layout__content"},s.a.createElement("div",{className:"block"},C)),"end"===l&&e)))}return s.a.createElement(s.a.Fragment,null,x)}j.defaultProps={columns:3,viewMode:"grid",sidebarPosition:"start"};t.default=Object(i.b)(e=>({sidebarState:e.sidebar,page:e.category,customer:e.customer}),()=>({sidebarClose:f.b}))(j)},212:function(e,t,a){"use strict";var o=a(5),c=a(11),s=a(1),r=a.n(s),l=a(3),n=a.n(l),i=a(30),m=a.n(i),d=a(140),u={tag:d.n,className:n.a.string,cssModule:n.a.object},p=function(e){var t=e.className,a=e.cssModule,s=e.tag,l=Object(c.a)(e,["className","cssModule","tag"]),n=Object(d.j)(m()(t,"modal-footer"),a);return r.a.createElement(s,Object(o.a)({},l,{className:n}))};p.propTypes=u,p.defaultProps={tag:"div"},t.a=p},378:function(e,t,a){"use strict";a.r(t);var o=a(4),c=a(1),s=a.n(c),r=a(47),l=a(10),n=a(34),i=a(137),m=a(144),d=a(24),u=a(136),p=a(180),g=a(35),h=a(242),f=a(275),b=a(211),E=a(30),v=a.n(E),y=a(62),N=a(84),j=a(168);const O={addChatList:y.a};var _=Object(g.b)(e=>({customer:e.customer}),O)(e=>{const{isOpen:t,toggle:a,store:o,customer:r}=e,[l,n]=Object(c.useState)([]),[i,m]=Object(c.useState)(""),[d,u]=Object(c.useState)(""),p=Object(c.useCallback)(e=>{n(e)},[]),g=Object(c.useCallback)(e=>{e&&e.scrollIntoView({smoth:!0})},[]);Object(c.useEffect)(()=>(fetch("".concat("https://siplah.eurekabookhouse.co.id/api_chat/","room?customerId=").concat(r.id,"&sellerId=").concat(o.id)).then(e=>e.json()).then(e=>{N.a.database().ref("/contact/customer/".concat(e.room)).on("value",t=>{null===t.val()&&N.a.database().ref("/contact/customer/".concat(e.room)).set("".concat(Object(j.a)()))}),u(e.room)}),()=>{}),[r.id,o.id]),Object(c.useEffect)(()=>{if(void 0!==r.id||void 0!==o.id){var e=new FormData;e.append("customerId",r.id),e.append("seller_id",o.id),e.append("role","seller");var t={method:"POST",body:e,redirect:"follow"};fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","backendseller/Mychat/readChat"),t).then(e=>{N.a.database().ref("/unread-message/customer/".concat(r.id)).set("".concat(Object(j.a)())),e.text()})}},[o.id]),Object(c.useEffect)(()=>{N.a.database().ref("/contact/customer/".concat(d)).on("value",e=>{fetch("".concat("https://siplah.eurekabookhouse.co.id/api_chat/","message?customerId=").concat(r.id,"&sellerId=").concat(o.id)).then(e=>e.json()).then(e=>{p(e)})})},[o.id,r.id,p,d]),Object(c.useEffect)(()=>{let e=!1;if(!e){var t=new Headers,a=new FormData;a.append("customerId",r.id),a.append("seller_id",o.id);var c={method:"POST",headers:t,body:a,redirect:"follow"};return fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","backendseller/Mychat/checkRoom"),c).then(e=>{e.text()}),()=>{e=!0}}},[]);return s.a.createElement(h.a,{isOpen:t,toggle:a,size:"xl",style:{overflowY:"hidden"}},s.a.createElement(f.a,{toggle:a},s.a.createElement("h6",null,o.name)),s.a.createElement(b.a,null,s.a.createElement("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},s.a.createElement("div",{className:"chat-container"},s.a.createElement("ul",{className:"chat-box chatContainerScroll",style:{maxHeight:"40vh",overflowY:"auto",overflowX:"hidden"}},l.map((e,t)=>{const a=l.length-1===t;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{key:t,ref:a?g:null,className:v()("",{"chat-left":"seller"===e.role,"chat-right mr-2":"customer"===e.role})},"customer"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time),s.a.createElement("div",{className:v()("chat-text text-light",{"bg-info":"seller"===e.role,"bg-secondary":"customer"===e.role}),style:{whiteSpace:"pre-line"}},s.a.createElement("h6",{className:"font-weight-bold mb-1 text-capitalize"},"seller"===e.role?e.sellerName:e.customerName),s.a.createElement("span",{style:{wordWrap:"anywhere"}},e.text)),"seller"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time)))})),s.a.createElement("div",{className:"form-group mt-3 mb-1"},s.a.createElement("textarea",{className:"form-control",rows:3,style:{resize:"none"},value:i,onChange:e=>m(e.target.value),autoFocus:!0,placeholder:"Tulis Pesan Anda..."})),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{type:"button",onClick:()=>{if(""!==i){var e=new Headers,t=new FormData;t.append("customerId",r.id),t.append("seller_id",o.id),t.append("message",i),t.append("role","customer");var a={method:"POST",headers:e,body:t,redirect:"follow"};fetch("".concat("https://siplah.eurekabookhouse.co.id/api/","backendseller/mychat/addchattoRoom"),a).then(async e=>{N.a.database().ref("/unread-message/seller/".concat(o.id)).set("".concat(Object(j.a)())),N.a.database().ref("/contact/seller/".concat(d)).set("".concat(Object(j.a)())),n([...l,await e.json()]),m("")})}},className:v()("btn btn-primary btn-lg btn-block")},"Kirim Pesan"))))))}),k=a(145),w=a(212),x=a(58),I=a(142);var S=e=>{const{toggle:t,isOpen:a,storeId:r}=e,[l,n]=Object(c.useState)({items:[]}),[i,m]=Object(c.useState)({page:1,limit:5});Object(c.useEffect)(()=>{x.a.getMallReviews(r,i).then(e=>{n(e.data)})},[i]);let d=[];return l.items&&(d=l.items.map((e,t)=>s.a.createElement("li",{key:t,className:"reviews-list__item"},s.a.createElement("div",{className:"review"},s.a.createElement("div",{className:" review__content"},s.a.createElement("div",{className:" review__author"},e.customerName),s.a.createElement("div",{className:" review__rating"},s.a.createElement(k.a,{value:e.rate})),s.a.createElement("div",{className:" review__text"},e.text),s.a.createElement("div",{className:" review__date"},e.createdAt)))))),s.a.createElement(h.a,{isOpen:a,toggle:()=>t(!a),size:"xl"},s.a.createElement(f.a,{toggle:()=>t(!a)},s.a.createElement("h5",null,"Ulasan Toko")),s.a.createElement(b.a,null,s.a.createElement("div",{className:"reviews-view",style:{maxHeight:"50vh",overflowY:"auto",overflowX:"hidden"}},s.a.createElement("div",{className:"reviews-view__list"},s.a.createElement("div",{className:"reviews-list"},d.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("ol",{className:"reviews-list__content"},d)):s.a.createElement("h5",{className:"text-center"},"Belum Ada Ulasan"))))),d.length>0&&s.a.createElement(w.a,{className:"align-items-center justify-content-center"},s.a.createElement("div",{className:"reviews-list__pagination"},s.a.createElement(I.a,{onPageChange:e=>m(Object(o.a)(Object(o.a)({},i),{},{page:e})),current:l.page,siblings:2,total:l.pages}))))};const C={store:null,storeIsLoading:!0};function T(e,t){switch(t.type){case d.m:return Object(o.a)(Object(o.a)({},e),{},{storeIsLoading:!0});case d.n:return Object(o.a)(Object(o.a)({},e),{},{storeIsLoading:!1,store:t.store});default:throw new Error}}t.default=Object(g.b)(e=>({auth:e.auth}),null)(e=>{const{slug:t}=Object(l.i)(),[a,o]=Object(c.useReducer)(T,C),[g,h]=Object(c.useState)(!1),[f,b]=Object(c.useState)(!1),{store:E,storeIsLoading:v}=a;Object(c.useEffect)(()=>(o({type:d.m}),m.a.getStore(t).then(e=>{const{data:t,status:a}=e;200===a.code?o({type:d.n,store:t}):o({type:d.n,store:null})}),()=>{}),[t]);const y=()=>{h(!g)};return v?s.a.createElement(u.default,null):null==E?s.a.createElement("div",{className:"block block-empty "},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"block-empty__body"},s.a.createElement("div",{className:"block-empty__message"},"Toko Tidak Ditemukan"),s.a.createElement("div",{className:"block-empty__actions"},s.a.createElement(n.b,{to:"/store",className:"btn btn-primary btn-sm"},"Cari Toko"))))):s.a.createElement("div",{className:"pt-4",style:{backgroundColor:"rgb(236, 236, 237)"}},s.a.createElement(r.a,null,s.a.createElement("title",null,"".concat(E.name," \u2014 ").concat(i.a.name))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card shadow",style:{borderRadius:"20px"}},s.a.createElement("div",{style:{display:"block",width:"100%",maxWidth:"1200px",maxHeight:"100%",position:"relative",paddingTop:"30.25%",overflow:"hidden",backgroundColor:"rgb(255,247,241)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",borderBottom:"2px solid #F0F0F0"}},s.a.createElement("img",{alt:"",src:E.image.header,style:{display:"block",position:"absolute",height:"100%",objectFit:"contain",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}})),s.a.createElement("div",{className:"card-body position-relative",style:{borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",backgroundColor:"rgb(255,247,241)"}},s.a.createElement("div",{className:"rounded-circle shadow d-flex justify-content-center position-absolute img-profile__store bg-white",style:{background:" no-repeat center/75% url(".concat(E.image.primary,")")}}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("h4",{className:"m-0"},E.name),s.a.createElement("span",null,E.location.province," | Total ",E.totalProduct," Produk")),s.a.createElement("div",{className:"offset-md-2 col-md-4"},e.auth&&s.a.createElement("button",{className:"btn btn-sm btn-primary d-block mt-1",onClick:y},"Chat Penjual"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement("small",{className:"store-info__title mt-2"},"Nama PIC"),s.a.createElement("small",{className:"mt-0 text-uppercase"},E.pic.name),s.a.createElement("small",{className:"store-info__title mt-2"},"Telp PIC"),s.a.createElement("small",{className:"mt-0"},E.pic.phone),s.a.createElement("small",{className:"store-info__title mt-2"},"Jabatan PIC"),s.a.createElement("small",{className:"mt-0 text-uppercase"},E.pic.position)),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("small",{className:"store-info__title"},"Alamat Toko"),s.a.createElement("small",{className:"mt-0"},E.location.address),s.a.createElement("small",{className:"store-info__title"},"Email Toko"),s.a.createElement("small",{className:"mt-0"},E.email),s.a.createElement("small",{className:"store-info__title"},"Jenis Usaha"),s.a.createElement("small",{className:"mt-0"},E.type),s.a.createElement("small",{className:"store-info__title"},"Rating Toko"),s.a.createElement("div",{className:"product__rating mt-2"},s.a.createElement("div",{className:"product__rating-stars"},s.a.createElement(k.a,{value:E.averageRating})),s.a.createElement("div",{className:"product__rating-legend",style:{color:"blue",cursor:"pointer"},onClick:()=>b(!f)},s.a.createElement("u",null,"(","".concat(E.totalRating," Ulasan"),")"))))))),s.a.createElement(S,{storeId:E.id,toggle:b,isOpen:f})),s.a.createElement(p.default,{forAct:"store"}),e.auth&&g&&s.a.createElement(_,{isOpen:g,toggle:y,store:E}))})}}]);
//# sourceMappingURL=22.40821e7f.chunk.js.map