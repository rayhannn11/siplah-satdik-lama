(this["webpackJsonpsiplah.eureka"]=this["webpackJsonpsiplah.eureka"]||[]).push([[18,35],{135:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var n=a(1),s=a.n(n);function o(e){return s.a.createElement("div",Object.assign({className:"block-loader"},e),s.a.createElement("div",{className:"block-loader__spinner"}))}},137:function(e,t,a){"use strict";var n=a(1);class s extends n.Component{constructor(e){super(e),this.canceled=!1,this.run=()=>{const{action:e}=this.props,{loading:t}=this.state;!t&&e&&(this.setState({loading:!0}),e().then(()=>{this.canceled||this.setState({loading:!1})}))},this.state={loading:!1}}componentWillUnmount(){this.canceled=!0}render(){const{render:e}=this.props,{loading:t}=this.state;return e?e({run:this.run,loading:t}):null}}t.a=s},140:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));const n={home:()=>"/",catalog:()=>"/shop/catalog",category:e=>"/shop/catalog/"+e.slug,product:e=>`/product/${e.mall.id}/${e.slug}`,mall:e=>"/store/"+e.slug};function s(e){return e.parent?[...s(e.parent),e.parent]:[]}},149:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(29),i=a.n(o),r=a(33);class l extends n.PureComponent{constructor(e){var t;super(e),this.setWrapperRef=e=>{this.wrapperRef=e},this.handleOutsideClick=e=>{const{open:t}=this.state;this.wrapperRef&&!this.wrapperRef.contains(e.target)&&t&&this.close()},this.handleButtonClick=e=>{const{onClick:t,dropdown:a}=this.props;a&&e.preventDefault(),this.toggle(),t&&t(e)},this.state={open:null!==(t=this.props.openNotif)&&void 0!==t&&t,tooltipOpen:!1}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick)}componentDidUpdate(e,t){const{open:a}=this.state,{onOpen:n,onClose:s}=this.props;a!==t.open&&(a&&n&&n(),!a&&s&&s())}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick)}toggle(){this.setState(e=>({open:!e.open}))}open(){this.setState(()=>({open:!0}))}close(){this.setState(()=>({open:!1})),this.props.closeNotif&&this.props.closeNotif()}render(){const{open:e}=this.state,{url:t,className:a,icon:n}=this.props;let o,{value:l,dropdown:c}=this.props;void 0!==l&&(l=s.a.createElement("span",{className:"indicator__value"},l));const m=s.a.createElement("span",{className:"indicator__area"},n,l);o=t?s.a.createElement(r.b,{to:t,className:"indicator__button",onClick:this.handleButtonClick},m):s.a.createElement("button",{type:"button",className:"indicator__button",onClick:this.handleButtonClick},m),c&&(c=s.a.createElement("div",{className:"indicator__dropdown"},c));const d=i()("indicator indicator--trigger--click "+a,{"indicator--opened":e});return s.a.createElement("div",{className:d,ref:this.setWrapperRef},o,c)}}t.a=l},151:function(e,t,a){"use strict";const n={getCategories:()=>fetch("https://siplah.eurekabookhouse.co.id/api/product/category").then(e=>e.json())};t.a=n},166:function(e,t,a){"use strict";t.a=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}));return new String(t)}},179:function(e,t,a){"use strict";var n=a(1),s=a.n(n);t.a=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement("img",Object.assign({},e,{src:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAyMjYgMjI2Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBmb250LWZhbWlseT0ibm9uZSIgZm9udC13ZWlnaHQ9Im5vbmUiIGZvbnQtc2l6ZT0ibm9uZSIgdGV4dC1hbmNob3I9Im5vbmUiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMCwyMjZ2LTIyNmgyMjZ2MjI2eiIgZmlsbD0ibm9uZSI+PC9wYXRoPjxnIGZpbGw9IiNlNzRjM2MiPjxwYXRoIGQ9Ik0xMTMsMTguODMzMzNjLTE2LjUxODMyLDAgLTMwLjI3MjcyLDEyLjM0MjU4IC0zMi41ODEzLDI4LjI1aC0zMi4yMTM0NmMtMC40MDA5NSwtMC4wNjg2MSAtMC44MDcwOSwtMC4xMDI0NSAtMS4yMTM4NywtMC4xMDExNmMtMC4zNTE0OCwwLjAwNzU4IC0wLjcwMTksMC4wNDEzOSAtMS4wNDgzNCwwLjEwMTE2aC0xNS4zMzg4N2MtMi41NDY5OSwtMC4wMzYwMiAtNC45MTYwNywxLjMwMjE1IC02LjIwMDA4LDMuNTAyMWMtMS4yODQwMSwyLjE5OTk1IC0xLjI4NDAxLDQuOTIwODQgMCw3LjEyMDhjMS4yODQwMSwyLjE5OTk1IDMuNjUzMDksMy41MzgxMiA2LjIwMDA4LDMuNTAyMWgxMC4wNjk1OGwxMS44NTM2LDEyMi41NTQ2MWMxLjI3NjMzLDEzLjIxNDU0IDEyLjUwMzEzLDIzLjQwMzczIDI1Ljc3NjI4LDIzLjQwMzczaDY5LjM4MzU1YzEzLjI3Mzg0LDAgMjQuNTAwNDYsLTEwLjE4ODA0IDI1Ljc3NjI4LC0yMy40MDM3M2wxMS44NjI3OSwtMTIyLjU1NDYxaDEwLjA2OTU4YzIuNTQ2OTksMC4wMzYwMiA0LjkxNjA3LC0xLjMwMjE1IDYuMjAwMDgsLTMuNTAyMWMxLjI4NDAxLC0yLjE5OTk1IDEuMjg0MDEsLTQuOTIwODQgMCwtNy4xMjA4Yy0xLjI4NDAxLC0yLjE5OTk1IC0zLjY1MzA5LC0zLjUzODEyIC02LjIwMDA4LC0zLjUwMjFoLTE1LjMyOTY3Yy0wLjc0OTE3LC0wLjEyMTU0IC0xLjUxMzA0LC0wLjEyMTU0IC0yLjI2MjIxLDBoLTMyLjIyMjY2Yy0yLjMwODU4LC0xNS45MDc0MiAtMTYuMDYyOTgsLTI4LjI1IC0zMi41ODEzLC0yOC4yNXpNMTEzLDMyLjk1ODMzYzguODQ3NjksMCAxNi4xMDYxMSw1Ljk3MDkyIDE4LjE4MDQyLDE0LjEyNWgtMzYuMzYwODRjMi4wNzQzMSwtOC4xNTQwOCA5LjMzMjczLC0xNC4xMjUgMTguMTgwNDIsLTE0LjEyNXpNNTQuODUzOTIsNjEuMjA4MzNoMTE2LjI4Mjk2bC0xMS43MzQwNSwxMjEuMTkzNmMtMC41ODg2OCw2LjA5NzkgLTUuNTkxMTcsMTAuNjM5NzMgLTExLjcxNTY2LDEwLjYzOTczaC02OS4zODM1NWMtNi4xMTU3NiwwIC0xMS4xMjc0OSwtNC41NTAxMSAtMTEuNzE1NjYsLTEwLjYzOTczek05Ni40MTA0OCw4NC42NDg4NWMtMy44OTY5LDAuMDYwODggLTcuMDA4MDUsMy4yNjY2OCAtNi45NTIxNSw3LjE2MzY1djcwLjYyNWMtMC4wMzYwMiwyLjU0Njk5IDEuMzAyMTUsNC45MTYwNyAzLjUwMjEsNi4yMDAwOGMyLjE5OTk1LDEuMjg0MDEgNC45MjA4NCwxLjI4NDAxIDcuMTIwOCwwYzIuMTk5OTUsLTEuMjg0MDEgMy41MzgxMiwtMy42NTMwOSAzLjUwMjEsLTYuMjAwMDh2LTcwLjYyNWMwLjAyNzQsLTEuOTA5NzkgLTAuNzE5ODIsLTMuNzQ5MjYgLTIuMDcxMjQsLTUuMDk4OTZjLTEuMzUxNDMsLTEuMzQ5NyAtMy4xOTE4NiwtMi4wOTQ1NSAtNS4xMDE2MSwtMi4wNjQ3ek0xMjkuMzY4ODEsODQuNjQ4ODVjLTMuODk2OSwwLjA2MDg4IC03LjAwODA1LDMuMjY2NjggLTYuOTUyMTUsNy4xNjM2NXY3MC42MjVjLTAuMDM2MDIsMi41NDY5OSAxLjMwMjE1LDQuOTE2MDcgMy41MDIxLDYuMjAwMDhjMi4xOTk5NSwxLjI4NDAxIDQuOTIwODQsMS4yODQwMSA3LjEyMDgsMGMyLjE5OTk1LC0xLjI4NDAxIDMuNTM4MTIsLTMuNjUzMDkgMy41MDIxLC02LjIwMDA4di03MC42MjVjMC4wMjc0LC0xLjkwOTc5IC0wLjcxOTgyLC0zLjc0OTI2IC0yLjA3MTI0LC01LjA5ODk2Yy0xLjM1MTQzLC0xLjM0OTcgLTMuMTkxODYsLTIuMDk0NTUgLTUuMTAxNjEsLTIuMDY0N3oiPjwvcGF0aD48L2c+PC9nPjwvc3ZnPg==",alt:""})))},195:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(34),i=a(29),r=a.n(i),l=a(61),c=a(6),m=a.n(c),d=a(134),u=a(9),p=a(83),h=a(166),g=a(135),b=a(137);const E={room:null};const f=(e,t)=>{switch(t.type){case"SET_ROOM":return{...e,room:t.value};default:throw new Error}},N=e=>{const[t,a]=Object(n.useReducer)(f,E),[o,i]=Object(n.useState)([]),[l,c]=Object(n.useState)([]),[N,v]=Object(n.useState)(null),[y,M]=Object(n.useState)(),[j,_]=Object(n.useState)(""),[k,w]=Object(n.useState)(!1),O=Object(u.g)(),{id:x}=e.customer,{layout:C,toggle:L}=e,T=Object(n.useCallback)(e=>{e&&e.scrollIntoView({smoth:!0})},[]);Object(n.useEffect)(()=>{const e=function(e){const t={};return null!==e&&(t.room=e),m.a.stringify(t,{encode:!1})}(t.room),a=`${window.location.pathname}${e?"?":""}${e}`;return window.history.replaceState(null,"",a),()=>{}},[t.room]),Object(n.useEffect)(()=>{p.a.database().ref("/unread-message/customer/"+x).on("value",e=>{fetch(`https://siplah.eurekabookhouse.co.id/api_chat/get-users?id=${x}&from=customer`).then(e=>e.json()).then(e=>{c(e)})})},[x]),Object(n.useEffect)(()=>{w(!0);let e=p.a.database().ref("contact/customer/"+t.room).on("value",e=>{fetch(`https://siplah.eurekabookhouse.co.id/api_chat/message?customerId=${x}&sellerId=${N}`).then(e=>e.json()).then(e=>{i(e),w(!1)})});return()=>p.a.database().ref("contact/customer/"+t.room).off("value",e)},[N,x,t.room]);Object(n.useEffect)(()=>{if(void 0!==x||void 0!==N){var e=new FormData;e.append("customerId",x),e.append("seller_id",N),e.append("role","seller"),fetch("https://siplah.eurekabookhouse.co.id/api/backendseller/Mychat/readChat",{method:"POST",body:e,redirect:"follow"}).then(e=>{p.a.database().ref("/unread-message/customer/"+x).set(""+Object(h.a)()),e.text()})}},[N,x]);let I=s.a.createElement("div",{className:"row justify-content-center align-items-center p-0 m-0"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("button",{onClick:()=>{"function"===typeof L&&L(),O.push("/store")},className:"btn btn-primary btn-block"},"Mulai Percakapan")));null!=l&&l.length>0&&(I=l.map((e,t)=>s.a.createElement("li",{key:t,style:{background:Number(e.sellerId)===Number(N)&&"#EBEBEB"},className:"person","data-chat":e.sellerId,onClick:()=>{return v((t=e).sellerId),a({type:"SET_ROOM",value:t.room}),void _(t.room);var t}},s.a.createElement("div",{className:"user",style:{borderRadius:"50%",border:"1px solid black"}},s.a.createElement("img",{style:{objectFit:"contain"},src:"https://cdn.eurekabookhouse.co.id/ebh/mall/"+e.image,alt:""})),s.a.createElement("p",{className:"name-time"},s.a.createElement("p",{className:"name d-flex justify-content-between",style:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",whiteSpace:"nowrap !important",marginBottom:"0"}},s.a.createElement("div",null,e.sellerName),e.countUnread>0&&s.a.createElement("div",{class:"badge badge-primary ml-3",style:{fontSize:"15px",background:"lightsalmon",height:"15px",padding:" 0 10px",borderRadius:" 1000px",fontWeight:"700"}},e.countUnread))))));let S=k?s.a.createElement(g.default,null):o.map((e,t)=>{const a=o.length-1===t;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{key:t,ref:a?T:null,className:r()("",{"chat-left":"seller"===e.role,"chat-right mr-2":"customer"===e.role})},"customer"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time),s.a.createElement("div",{className:r()("chat-text text-light",{"bg-info":"seller"===e.role,"bg-secondary":"customer"===e.role}),style:{whiteSpace:"pre-line"}},s.a.createElement("h6",{className:"font-weight-bold mb-1 text-capitalize"},"seller"===e.role?e.sellerName:e.customerName),s.a.createElement("span",{style:{wordWrap:"anywhere"}},e.text)),"seller"===e.role&&s.a.createElement("div",{className:"chat-hour"},e.time)))});return 0===S.length&&(S=s.a.createElement("div",{className:"row justify-content-center align-items-center"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement(d.r,null),s.a.createElement("h5",{className:"text-center my-3"},"Belum ada percakapan")))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"content-wrapper"},s.a.createElement("div",{className:"row gutters"},s.a.createElement("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},s.a.createElement("div",{className:"card chat m-0"},s.a.createElement("div",{className:"row no-gutters"},s.a.createElement("div",{className:"col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3"},s.a.createElement("div",{className:"users-container"},s.a.createElement("ul",{className:"users",style:{maxHeight:"modal"===C?"60vh":"100vh",minHeight:"modal"===C?"60vh":"100vh",overflowY:"auto"}},I))),s.a.createElement("div",{className:"col-xl-8 col-lg-8 col-md-8 col-sm-9 col-9"},s.a.createElement("div",{className:"chat-container"},s.a.createElement("ul",{className:"chat-box chatContainerScroll",style:{maxHeight:"modal"===C?"40vh":"80vh",minHeight:"modal"===C?"40vh":"80vh",overflowY:"auto",overflowX:"hidden"}},S),o.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group mt-3 mb-1"},s.a.createElement("textarea",{className:"form-control",rows:3,style:{resize:"none"},autoFocus:!0,value:y,onChange:e=>M(e.target.value),placeholder:"Tulis Pesan Anda..."})),s.a.createElement("div",{className:"form-group"},s.a.createElement(b.a,{action:()=>new Promise(e=>{if(""!==y){var t=new Headers,a=new FormData;a.append("customerId",x),a.append("seller_id",N),a.append("message",y),a.append("role","customer"),fetch("https://siplah.eurekabookhouse.co.id/api/backendseller/mychat/addchattoRoom",{method:"POST",headers:t,body:a,redirect:"follow"}).then(async t=>{p.a.database().ref("/unread-message/seller/"+N).set(""+Object(h.a)()),p.a.database().ref("/contact/seller/"+j).set(""+Object(h.a)()),i([...o,await t.json()]),M(""),e()})}else e()}),render:e=>{let{run:t,loading:a}=e;return s.a.createElement("button",{type:"button",className:r()("btn btn-primary btn-lg btn-block",{"btn-loading":a}),onClick:t},"Kirim Pesan")}})))))))))))};N.defaultProps={layout:"modal"};const v={addChatList:l.a};t.a=Object(o.b)(e=>({customer:e.customer,chat:e.chat}),v)(N)},196:function(e,t,a){"use strict";t.a=new class{constructor(){this.privateArea=null,this.privateSubscriber=null}set area(e){this.privateArea!==e&&(this.privateArea=e,this.privateSubscriber&&this.privateSubscriber(this.area))}get area(){return this.privateArea}subscribe(e){return this.privateSubscriber=e,()=>{this.privateSubscriber=null}}}},197:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(29),i=a.n(o),r=a(9),l=a(57),c=a(34),m=a(33),d=a(137),u=a(134),p=a(56),h=a(140),g=a(135);const b=s.a.memo(e=>{const{context:t,className:a,products:n,itemMalls:o,cartAddItem:r,isLoading:l,customer:c,query:p}=e,b=i()("suggestions suggestions--location--"+t,a);console.log(n,"search product"),console.log(o,"search itemMalls");const E=n&&n.map(a=>{var n;const o="number"===typeof a.price.primary?a.price.primary:parseFloat(a.price.primary||0),l=a.taxExempt||a.isTaxExempt||!a.ppnTagItem||!1,p=(l||Math.ceil(o/1.11*.11),Math.floor(o/1.11)),g=Math.ceil(11/12*Number(p)),b=Math.ceil(.12*g),E=l?"Rp "+Math.round(o).toLocaleString("id-ID"):a.price.primaryCurrencyFormat;return s.a.createElement("li",{key:a.id,className:"suggestions__item"},a.images&&a.images.length>0&&s.a.createElement("div",{className:"suggestions__item-image product-image"},s.a.createElement("div",{className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:a.images[0],alt:""}))),s.a.createElement("div",{className:"suggestions__item-info"},s.a.createElement(m.b,{className:"suggestions__item-name",to:h.b.product(a)},a.name),s.a.createElement("div",{className:"suggestions__item-meta"},null===(n=a.mall)||void 0===n?void 0:n.name)),s.a.createElement("div",{className:"suggestions__item-price"},E,s.a.createElement("div",{className:"suggestions__item-ppn",style:{fontSize:"11px",color:"#6c757d"}},l?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#28A745"}},"Bebas Pajak"),s.a.createElement("div",null,"DPP PPH: ",E),s.a.createElement("div",null,"DPP Nilai Lain: Rp 0"),s.a.createElement("div",null,"PPN 12%: Rp 0")):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{color:"#28A745"}},"Harga Termasuk Pajak"),s.a.createElement("div",null,"DPP PPH: Rp ",p.toLocaleString("id-ID")),s.a.createElement("div",null,"DPP Nilai Lain: Rp ",g.toLocaleString("id-ID")),s.a.createElement("div",null,"PPN ",12,"%: Rp ",b.toLocaleString("id-ID"))))),"header"===t&&s.a.createElement("div",{className:"suggestions__item-actions"},s.a.createElement(d.a,{action:()=>(t=>void 0!==c.token&&""!==c.token?r(t,c.token):new Promise(t=>{e.history.push("/login"),t()}))(a),render:e=>{let{run:t,loading:a}=e;return s.a.createElement("button",{type:"button",onClick:t,title:"Add to cart",className:i()("btn btn-primary btn-sm btn-svg-icon",{"btn-loading":a})},s.a.createElement(u.i,null))}})))}),f=o&&o.map(e=>{var t;return s.a.createElement("li",{key:e.id,className:"suggestions__item"},e.image&&e.image.primary&&s.a.createElement("div",{className:"suggestions__item-image product-image"},s.a.createElement("div",{className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:e.image.primary,alt:""}))),s.a.createElement("div",{className:"suggestions__item-info"},s.a.createElement(m.b,{className:"suggestions__item-name",to:"/store/"+e.slug},e.name),s.a.createElement("div",{className:"suggestions__item-meta"},null===(t=e.location)||void 0===t?void 0:t.city)))});return s.a.createElement("div",{className:b},l?s.a.createElement(g.default,null):s.a.createElement("ul",{className:"suggestions__list"},s.a.createElement("li",{className:"suggestions__item"},s.a.createElement("div",null,"BARANG")),E&&E.length>0?s.a.createElement(s.a.Fragment,null,E,s.a.createElement("li",{className:"suggestions__item d-flex justify-content-center"},s.a.createElement(m.b,{to:"/products/search?keyword="+p,className:"suggestions__item-name",style:{color:"#0E336D"}},"Lihat Produk Lainnya"))):s.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Produk tidak ditemukan"),s.a.createElement("li",{className:"suggestions__item"},s.a.createElement("div",null,"TOKO")),f&&f.length>0?s.a.createElement(s.a.Fragment,null,f,s.a.createElement("li",{className:"suggestions__item"},s.a.createElement(m.b,{to:"/store?keyword="+p,className:"suggestions__item-name d-flex justify-content-between align-items-center w-100"},s.a.createElement("div",{style:{color:"#0E336D"}},'Lihat Pencarian Toko "',p,'" Lainnya'),s.a.createElement(u.f,null)))):s.a.createElement("li",{className:"d-flex justify-content-center py-3"},"Toko tidak ditemukan")))}),E={cartAddItem:p.a};var f=Object(r.j)(Object(c.b)(e=>({customer:e.customer}),E)(b));const N=s.a.memo(e=>{const{context:t,className:a,inputRef:o,onClose:r,location:c,customer:m}=e,[d,p]=Object(n.useState)(()=>()=>{}),[h,g]=Object(n.useState)(!1),[b,E]=Object(n.useState)(!1),[N,v]=Object(n.useState)([]),[y,M]=Object(n.useState)([]),[j,_]=Object(n.useState)(!0),[k,w]=Object(n.useState)(""),O=Object(n.useRef)(null),x=Object(n.useCallback)(()=>{r&&r(),g(!1)},[r]);Object(n.useEffect)(()=>x(),[x,c]),Object(n.useEffect)(()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]),Object(n.useEffect)(()=>()=>d(),[d]);const C=Object(n.useRef)(null),L=Object(n.useCallback)(e=>{const t=e.target.value;w(t),C.current&&clearTimeout(C.current),t.length>2?(_(!0),g(!0),E(!0),C.current=setTimeout(()=>{l.a.getSuggestions(t,{limit:5,page:1},m.token).then(e=>{var t,a,n,s,o,i;_(!1),console.log("Search API Response:",e);const r=(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.items)||(null===(n=e.data)||void 0===n?void 0:n.items)||[],l=(null===(s=e.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.itemMalls)||(null===(i=e.data)||void 0===i?void 0:i.itemMalls)||[];console.log("Extracted search products:",r),console.log("Extracted search itemMalls:",l),v(r),M(l)}).catch(e=>{console.error("Search API Error:",e),_(!1),v([]),M([])})},800)):E(!1)},[null===m||void 0===m?void 0:m.token]),T=i()("search search--location--"+t,a,{"search--suggestions-open":h,"search--has-suggestions":b}),I="mobile-header"!==t?"":s.a.createElement("button",{className:"search__button search__button--type--close",type:"button",onClick:x},s.a.createElement(u.o,null));return s.a.createElement("div",{className:T,ref:O,onBlur:()=>{setTimeout(()=>{document.activeElement&&document.activeElement!==document.body&&O.current&&!O.current.contains(document.activeElement)&&x()},10)}},s.a.createElement("div",{className:"search__body"},s.a.createElement("form",{style:{borderRadius:"10px"},className:"search__form",action:"/satdik/products/search"},s.a.createElement("input",{style:{borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"},ref:o,onChange:L,onFocus:()=>{g(!0)},onKeyDown:e=>{27===e.which&&x()},value:k,className:"search__input",name:"keyword",placeholder:"Cari produk ...","aria-label":"Site search",type:"text",autoComplete:"off"}),s.a.createElement("button",{className:"search__button search__button--type--submit",type:"submit",style:{borderTopRightRadius:"10px",borderBottomRightRadius:"10px"}},s.a.createElement(u.w,null)),I),s.a.createElement(f,{className:"search__suggestions",context:t,itemMalls:y,products:N,isLoading:j,query:k})))});t.a=Object(r.j)(Object(c.b)(e=>({customer:e.customer}),null)(N))},209:function(e,t,a){"use strict";var n=a(4),s=a(10),o=a(1),i=a.n(o),r=a(3),l=a.n(r),c=a(29),m=a.n(c),d=a(139),u={tag:d.n,className:l.a.string,cssModule:l.a.object},p=function(e){var t=e.className,a=e.cssModule,o=e.tag,r=Object(s.a)(e,["className","cssModule","tag"]),l=Object(d.j)(m()(t,"modal-body"),a);return i.a.createElement(o,Object(n.a)({},r,{className:l}))};p.propTypes=u,p.defaultProps={tag:"div"},t.a=p},240:function(e,t,a){"use strict";var n=a(146),s=a(4),o=a(148),i=a(12),r=a(1),l=a.n(r),c=a(3),m=a.n(c),d=a(29),u=a.n(d),p=a(13),h=a.n(p),g=a(139),b={children:m.a.node.isRequired,node:m.a.any},E=function(e){function t(){return e.apply(this,arguments)||this}Object(i.a)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null},a.render=function(){return g.d?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),h.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null},t}(l.a.Component);E.propTypes=b;var f=E,N=a(10),v=a(173),y=Object(n.a)({},v.Transition.propTypes,{children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:g.n,baseClass:m.a.string,baseClassActive:m.a.string,className:m.a.string,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func])}),M=Object(n.a)({},v.Transition.defaultProps,{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:g.c.Fade,appear:!0,enter:!0,exit:!0,in:!0});function j(e){var t=e.tag,a=e.baseClass,n=e.baseClassActive,o=e.className,i=e.cssModule,r=e.children,c=e.innerRef,m=Object(N.a)(e,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),d=Object(g.l)(m,g.a),p=Object(g.k)(m,g.a);return l.a.createElement(v.Transition,d,(function(e){var m="entered"===e,d=Object(g.j)(u()(o,a,m&&n),i);return l.a.createElement(t,Object(s.a)({className:d},p,{ref:c}),r)}))}j.propTypes=y,j.defaultProps=M;var _=j;function k(){}var w=m.a.shape(_.propTypes),O={isOpen:m.a.bool,autoFocus:m.a.bool,centered:m.a.bool,scrollable:m.a.bool,size:m.a.string,toggle:m.a.func,keyboard:m.a.bool,role:m.a.string,labelledBy:m.a.string,backdrop:m.a.oneOfType([m.a.bool,m.a.oneOf(["static"])]),onEnter:m.a.func,onExit:m.a.func,onOpened:m.a.func,onClosed:m.a.func,children:m.a.node,className:m.a.string,wrapClassName:m.a.string,modalClassName:m.a.string,backdropClassName:m.a.string,contentClassName:m.a.string,external:m.a.node,fade:m.a.bool,cssModule:m.a.object,zIndex:m.a.oneOfType([m.a.number,m.a.string]),backdropTransition:w,modalTransition:w,innerRef:m.a.oneOfType([m.a.object,m.a.string,m.a.func]),unmountOnClose:m.a.bool,returnFocusAfterClose:m.a.bool,container:g.o},x=Object.keys(O),C={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:k,onClosed:k,modalTransition:{timeout:g.c.Modal},backdropTransition:{mountOnEnter:!0,timeout:g.c.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body"},L=function(e){function t(t){var a;return(a=e.call(this,t)||this)._element=null,a._originalBodyPadding=null,a.getFocusableChildren=a.getFocusableChildren.bind(Object(o.a)(a)),a.handleBackdropClick=a.handleBackdropClick.bind(Object(o.a)(a)),a.handleBackdropMouseDown=a.handleBackdropMouseDown.bind(Object(o.a)(a)),a.handleEscape=a.handleEscape.bind(Object(o.a)(a)),a.handleStaticBackdropAnimation=a.handleStaticBackdropAnimation.bind(Object(o.a)(a)),a.handleTab=a.handleTab.bind(Object(o.a)(a)),a.onOpened=a.onOpened.bind(Object(o.a)(a)),a.onClosed=a.onClosed.bind(Object(o.a)(a)),a.manageFocusAfterClose=a.manageFocusAfterClose.bind(Object(o.a)(a)),a.clearBackdropAnimationTimeout=a.clearBackdropAnimationTimeout.bind(Object(o.a)(a)),a.state={isOpen:!1,showStaticBackdropAnimation:!1},a}Object(i.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.isOpen,a=e.autoFocus,n=e.onEnter;t&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),n&&n(),this._isMounted=!0},a.componentDidUpdate=function(e,t){if(this.props.isOpen&&!e.isOpen)return this.init(),void this.setState({isOpen:!0});this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)},a.componentWillUnmount=function(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),this._isMounted=!1},a.onOpened=function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||k)(e,t)},a.onClosed=function(e){var t=this.props.unmountOnClose;this.props.onClosed(),(this.props.modalTransition.onExited||k)(e),t&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})},a.setFocus=function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()},a.getFocusableChildren=function(){return this._element.querySelectorAll(g.f.join(", "))},a.getFocusedChild=function(){var e,t=this.getFocusableChildren();try{e=document.activeElement}catch(a){e=t[0]}return e},a.handleBackdropClick=function(e){if(e.target===this._mouseDownElement){e.stopPropagation();var t=this._dialog?this._dialog.parentNode:null;if(t&&e.target===t&&"static"===this.props.backdrop&&this.handleStaticBackdropAnimation(),!this.props.isOpen||!0!==this.props.backdrop)return;t&&e.target===t&&this.props.toggle&&this.props.toggle(e)}},a.handleTab=function(e){if(9===e.which){var t=this.getFocusableChildren(),a=t.length;if(0!==a){for(var n=this.getFocusedChild(),s=0,o=0;o<a;o+=1)if(t[o]===n){s=o;break}e.shiftKey&&0===s?(e.preventDefault(),t[a-1].focus()):e.shiftKey||s!==a-1||(e.preventDefault(),t[0].focus())}}},a.handleBackdropMouseDown=function(e){this._mouseDownElement=e.target},a.handleEscape=function(e){this.props.isOpen&&e.keyCode===g.i.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):"static"===this.props.backdrop&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))},a.handleStaticBackdropAnimation=function(){var e=this;this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout((function(){e.setState({showStaticBackdropAnimation:!1})}),100)},a.init=function(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=Object(g.h)(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=Object(g.g)(),Object(g.e)(),0===t.openCount&&(document.body.className=u()(document.body.className,Object(g.j)("modal-open",this.props.cssModule))),t.openCount+=1},a.destroy=function(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()},a.manageFocusAfterClose=function(){if(this._triggeringElement){var e=this.props.returnFocusAfterClose;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}},a.close=function(){if(t.openCount<=1){var e=Object(g.j)("modal-open",this.props.cssModule),a=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(a," ").trim()}this.manageFocusAfterClose(),t.openCount=Math.max(0,t.openCount-1),Object(g.m)(this._originalBodyPadding)},a.renderModalDialog=function(){var e,t=this,a=Object(g.k)(this.props,x);return l.a.createElement("div",Object(s.a)({},a,{className:Object(g.j)(u()("modal-dialog",this.props.className,(e={},e["modal-"+this.props.size]=this.props.size,e["modal-dialog-centered"]=this.props.centered,e["modal-dialog-scrollable"]=this.props.scrollable,e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),l.a.createElement("div",{className:Object(g.j)(u()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))},a.render=function(){var e=this.props.unmountOnClose;if(this._element&&(this.state.isOpen||!e)){var t=!!this._element&&!this.state.isOpen&&!e;this._element.style.display=t?"none":"block";var a=this.props,o=a.wrapClassName,i=a.modalClassName,r=a.backdropClassName,c=a.cssModule,m=a.isOpen,d=a.backdrop,p=a.role,h=a.labelledBy,b=a.external,E=a.innerRef,N={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":h,role:p,tabIndex:"-1"},v=this.props.fade,y=Object(n.a)({},_.defaultProps,{},this.props.modalTransition,{baseClass:v?this.props.modalTransition.baseClass:"",timeout:v?this.props.modalTransition.timeout:0}),M=Object(n.a)({},_.defaultProps,{},this.props.backdropTransition,{baseClass:v?this.props.backdropTransition.baseClass:"",timeout:v?this.props.backdropTransition.timeout:0}),j=d&&(v?l.a.createElement(_,Object(s.a)({},M,{in:m&&!!d,cssModule:c,className:Object(g.j)(u()("modal-backdrop",r),c)})):l.a.createElement("div",{className:Object(g.j)(u()("modal-backdrop","show",r),c)}));return l.a.createElement(f,{node:this._element},l.a.createElement("div",{className:Object(g.j)(o)},l.a.createElement(_,Object(s.a)({},N,y,{in:m,onEntered:this.onOpened,onExited:this.onClosed,cssModule:c,className:Object(g.j)(u()("modal",i,this.state.showStaticBackdropAnimation&&"modal-static"),c),innerRef:E}),b,this.renderModalDialog()),j))}return null},a.clearBackdropAnimationTimeout=function(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)},t}(l.a.Component);L.propTypes=O,L.defaultProps=C,L.openCount=0;t.a=L},273:function(e,t,a){"use strict";var n=a(4),s=a(10),o=a(1),i=a.n(o),r=a(3),l=a.n(r),c=a(29),m=a.n(c),d=a(139),u={tag:d.n,wrapTag:d.n,toggle:l.a.func,className:l.a.string,cssModule:l.a.object,children:l.a.node,closeAriaLabel:l.a.string,charCode:l.a.oneOfType([l.a.string,l.a.number]),close:l.a.object},p=function(e){var t,a=e.className,o=e.cssModule,r=e.children,l=e.toggle,c=e.tag,u=e.wrapTag,p=e.closeAriaLabel,h=e.charCode,g=e.close,b=Object(s.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),E=Object(d.j)(m()(a,"modal-header"),o);if(!g&&l){var f="number"===typeof h?String.fromCharCode(h):h;t=i.a.createElement("button",{type:"button",onClick:l,className:Object(d.j)("close",o),"aria-label":p},i.a.createElement("span",{"aria-hidden":"true"},f))}return i.a.createElement(u,Object(n.a)({},b,{className:E}),i.a.createElement(c,{className:Object(d.j)("modal-title",o)},r),g||t)};p.propTypes=u,p.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},t.a=p},370:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(34),i=a(33),r=a(29),l=a.n(r),c=a(137),m=a(149),d=a(134),u=a(56),p=a(140),h=a(21),g=a(20),b=a.n(g),E=a(179);const f={cartRemoveItem:u.e,addMiniCart:h.a};var N=Object(o.b)(e=>({cart:e.cart,miniCart:e.miniCart,customer:e.customer}),f)((function(e){const{miniCart:t,cart:a,cartRemoveItem:n,customer:o}=e;let r,u;if(console.log(t,"mini cart length"),null!=a.cartList&&(u=1===a.cartList.items.length&&1===a.cartList.items[0].product.length?{...a,options:{page:1,limit:3}}:{...a}),void 0!==t.items&&void 0!==t.items.product){const e=t.items.product.map(e=>{let t;const a="non"===e.ppnType||0===Number(e.ppn);e.image&&(t=s.a.createElement("div",{className:"product-image dropcart__product-image"},s.a.createElement(i.b,{to:p.b.product(e),className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:e.image,alt:""}))));const r=s.a.createElement(c.a,{action:()=>(e=>new Promise(t=>{b.a.fire({title:"Anda yakin ingin menghapus produk ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hapus",reverseButtons:!0}).then(t=>{t.isConfirmed&&n(e,o.token,u)}),t()}))(e),render:e=>{let{run:t,loading:a}=e;const n=l()("dropcart__product-remove btn btn-light btn-sm btn-svg-icon",{"btn-loading":a});return s.a.createElement("button",{type:"button",onClick:t,className:n},s.a.createElement(E.a,null),s.a.createElement("small",{className:"text-danger d-block text-center"},"hapus"))}});let m;if(a){const t=e.priceCurrencyFormat;m=s.a.createElement("div",{className:"dropcart__product-meta"},s.a.createElement("span",{className:"dropcart__product-quantity"},e.qty)," \xd7 ",s.a.createElement("span",{className:"dropcart__product-price"},t),s.a.createElement("div",{style:{fontSize:"11px",marginTop:"3px"}},s.a.createElement("div",{style:{color:"#28a745"}},"Bebas Pajak"),s.a.createElement("div",null,"DPP PPh: ",t),s.a.createElement("div",null,"DPP Nilai Lain: Rp.0"),s.a.createElement("div",null,"PPN 12%: ",e.ppnCurrencyFormat||"Rp0")))}else m=s.a.createElement("div",{className:"dropcart__product-meta"},s.a.createElement("span",{className:"dropcart__product-quantity"},e.qty)," \xd7 ",s.a.createElement("span",{className:"dropcart__product-price"},e.priceCurrencyFormat),s.a.createElement("div",{style:{fontSize:"11px",marginTop:"3px"}},s.a.createElement("div",null,"DPP PPh: Rp"," ",(Math.floor(Number(e.itemPrice)/1.11)*Number(e.qty)).toLocaleString("id-ID")),s.a.createElement("div",null,"DPP Nilai Lain: Rp"," ",(Math.floor(Number(e.itemPrice/1.11)*(11/12))*Number(e.qty)).toLocaleString("id-ID")),s.a.createElement("div",null,"PPN 12%: ",e.ppnCurrencyFormat),s.a.createElement("small",null,"*PPN yang dikenakan telah menggunakan perhitungan terbaru sesuai dengan"," ",s.a.createElement("a",{target:"_blank",href:"https://jdih.kemenkeu.go.id/api/download/ad276b82-94bd-4197-b409-af33e2842cd6/2024pmkeuangan131.pdf"},"PMK No. 131 Tahun 2024"),"*")));return s.a.createElement("div",{key:e.id,className:"dropcart__product"},t,s.a.createElement("div",{className:"dropcart__product-info"},s.a.createElement("div",{className:"dropcart__product-name"},s.a.createElement(i.b,{to:p.b.product(e)},e.name)),void 0,m),r)});r=s.a.createElement("div",{className:"dropcart"},s.a.createElement("div",{className:"dropcart__products-list"},e),s.a.createElement("div",{className:"dropcart__totals"},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Total"),s.a.createElement("td",null,t.items.totalCurrencyFormat))))),s.a.createElement("div",{className:"dropcart__buttons"},s.a.createElement(i.b,{className:"btn btn-secondary",to:"/shop/cart"},"Lihat Keranjang")))}else r=s.a.createElement("div",{className:"dropcart"},s.a.createElement("div",{className:"dropcart__empty"},"Keranjang belanja anda kosong"));return s.a.createElement(m.a,{url:"/shop/cart",dropdown:r,value:(null===t||void 0===t?void 0:t.totalAllProduct)||0,icon:s.a.createElement(d.j,null)})})),v=a(196),y=a(151),M=a(135);let j=[],_=[0,0,0];var k=e=>{const[t,a]=Object(n.useState)(!0),[o,r]=Object(n.useState)([]),[c,m]=Object(n.useState)([]),[u,p]=Object(n.useState)([]),{handleTransitionEnd:h,handleClose:g}=e;Object(n.useEffect)(()=>{let e=!1;return a(!0),y.a.getCategories().then(t=>{e||(r(t.data.map(e=>({...e,isActive:!1,submenu:e.submenu.menu}))),a(!1))}),()=>{e=!0}},[]),Object(n.useEffect)(()=>{document.querySelectorAll(".departments_links_item").forEach(e=>{e.classList.remove("active")}),u.forEach(e=>{let t=document.getElementById(""+e.id);t&&t.classList.add("active")})},[u]);const b=e=>{(e=>{let t={parentId:Number(e.parentId),id:Number(e.id)},a=_.findIndex(t=>Number(t.parentId)===Number(e.parentId));a>-1?(_[a]=t,_.length-1!==a&&_.pop(),_=[..._],p(_)):(_=[..._,t],p(_))})(e);let t=null;e.submenu&&e.submenu.length>0&&(t=s.a.createElement("div",{className:"departments_links_list"},f(e.submenu)));let a={parentId:e.id,title:e.title,content:t};if(e.submenu)if(0===Number(e.parentId))j=[a],m(j);else if(j.length>0)if(j[j.length-1].parentId===e.parentId)e.submenu.length>0&&(j=[...j,a],m(j));else{const t=j.findIndex(t=>t.parentId===e.parentId);t>-1&&(t+1!==j.length?(j.pop(),j[t+1]=a):j[t+1]=a,j=[...j],m(j))}},E=e=>{if(void 0===e.submenu||0===e.submenu.length){let t=_.findIndex(t=>Number(t.parentId)===Number(e.parentId));_.splice(t,1),_=[..._],p(_)}},f=e=>{if(e)return e.map((e,t)=>{let a=null,n=null;return e.submenu&&e.submenu.length>0&&(a=s.a.createElement("div",{className:"icon"},s.a.createElement(d.f,null))),n=s.a.createElement(i.b,{to:`/products/category/${e.id}/${e.url}`,id:e.id,onMouseEnter:()=>{b(e)},onClick:()=>{g()},onMouseLeave:()=>{E(e)},className:l()("departments_links_item")},s.a.createElement("div",{className:"title"},e.title),a),e.submenu&&e.submenu.length>0&&(n=s.a.createElement(i.b,{id:e.id,to:`/products/category/${e.id}/${e.url}`,onMouseEnter:()=>{b(e)},onMouseLeave:()=>{E(e)},className:l()("departments_links_item")},s.a.createElement("div",{className:"title"},e.title),a)),n})};return s.a.createElement("div",{className:"departments_links--custom",onTransitionEnd:h},s.a.createElement("div",{className:"d-flex mb-0 departments_links_container"},t?s.a.createElement(M.default,{style:{position:"static"}}):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"departments_links_list"},f(o)," "),c.map(e=>e.content))))};class w extends n.Component{constructor(e){super(e),this.unsubscribeAria=()=>{},this.setWrapperRef=e=>{this.rootRef=e},this.handleOutsideClick=e=>{this.rootRef&&!this.rootRef.contains(e.target)&&this.setState(()=>({open:!1}))},this.handleButtonClick=()=>{this.setState(e=>({open:!e.open}))},this.handleTransitionEnd=e=>{this.rootRef&&"height"===e.propertyName&&(this.rootRef.querySelector(".departments__links-wrapper").style.height="",this.rootRef.classList.remove("departments--transition"))},this.state={open:!1,fixed:!1,area:null}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick),this.unsubscribeAria=v.a.subscribe(e=>{this.setState({fixed:!!e,area:e})}),this.setState({fixed:!!v.a.area,area:v.a.area})}componentDidUpdate(e,t){const{fixed:a,area:n,open:s}=this.state;if(t.fixed!==a){const e=this.rootRef,t=e.querySelector(".departments__links-wrapper");if(a){const a=n.getBoundingClientRect(),s=a.top+a.height+window.scrollY;e.classList.remove("departments--transition"),e.classList.add("departments--fixed","departments--opened");const o=s-(t.getBoundingClientRect().top+window.scrollY);t.style.height=o+"px",t.getBoundingClientRect()}else e.classList.remove("departments--opened","departments--fixed"),t.style.height=""}else if(!a)if(s){const e=this.rootRef,t=e.querySelector(".departments__links-wrapper");t.getBoundingClientRect();const a=t.getBoundingClientRect().height;e.classList.add("departments--transition","departments--opened");const n=t.getBoundingClientRect().height;t.style.height=a+"px",t.getBoundingClientRect(),t.style.height=n+"px"}else{const e=this.rootRef,t=e.querySelector(".departments__links-wrapper"),a=t.getBoundingClientRect().height;t.style.height=a+"px",e.classList.add("departments--transition"),e.classList.remove("departments--opened"),t.getBoundingClientRect(),t.style.height=""}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick),this.unsubscribeAria()}render(){return s.a.createElement("div",{ref:this.setWrapperRef},s.a.createElement("div",{className:"departments"},s.a.createElement("div",{className:"departments__body"},s.a.createElement("div",{className:"departments__links-wrapper"})),s.a.createElement("button",{type:"button",className:"departments__button",onClick:this.handleButtonClick},s.a.createElement(d.q,{className:"departments__button-icon"}),"Kategori",s.a.createElement(d.c,{className:"departments__button-arrow"}))),this.state.open&&s.a.createElement(k,{handleClose:()=>this.setState({open:!1}),onTransitionEnd:this.handleTransitionEnd}))}}var O=w,x=a(9),C=a(15),L=a(36),T=a(37),I=a(38),S=a(19);a(25);const D={customerAdd:L.a,loginCustomer:T.b,resetMiniCart:h.c,resetFirstLogin:I.b};var A=Object(x.j)(Object(o.b)(e=>({customer:e.customer}),D)((function(e){const{customer:t}=e,a=s.a.createElement("div",{className:"account-menu"},s.a.createElement("div",{className:"account-menu__divider"}),s.a.createElement(i.b,{to:"/account/dashboard",className:"account-menu__user"},s.a.createElement("div",{className:"account-menu__user-avatar"},s.a.createElement("img",{src:"https://siplah.eurekabookhouse.co.id/assets/image/logo-kemdikbud.png",alt:""})),s.a.createElement("div",{className:"account-menu__user-info"},s.a.createElement("div",{className:"account-menu__user-name"},null===t||void 0===t?void 0:t.name),s.a.createElement("div",{className:"account-menu__user-email",style:{fontSize:"12px"}},null===t||void 0===t?void 0:t.email))),s.a.createElement("div",{className:"account-menu__divider"}),s.a.createElement("ul",{className:"account-menu__links"},s.a.createElement("li",null,s.a.createElement(i.b,{to:"/account/detail"},"Data Sekolah")),s.a.createElement("li",null,s.a.createElement(i.b,{to:"/account/orders"},"Riwayat Belanja")),s.a.createElement("li",null,s.a.createElement(i.b,{to:"/account/notification"},"Notifikasi")),s.a.createElement("li",null)),s.a.createElement("div",{className:"account-menu__divider"}),s.a.createElement("ul",{className:"account-menu__links"},s.a.createElement("li",null,s.a.createElement("a",{style:{cursor:"pointer"},onClick:()=>{localStorage.removeItem("auth"),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("persist:primary"),localStorage.removeItem("notifShown"),window.location.href="/satdik",C.a.logout(t.token).then(t=>{e.customerAdd(null),e.resetMiniCart(),e.resetFirstLogin(),localStorage.clear(),localStorage.removeItem("auth"),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("notifShown"),C.a.clearCache(),S.b.success("Berhasil logout"),window.location.href="/satdik"}).catch(e=>{console.log("Logout error:",e),S.b.error("Gagal logout")})}},"Logout"))));return s.a.createElement(m.a,{url:"/account",dropdown:a,icon:s.a.createElement(d.t,null)})}))),z=a(240),R=a(273),P=a(209),B=a(61),Y=a(195);const F={addChatList:B.a};var U=Object(o.b)(e=>({customer:e.customer,chat:e.chat,newMessage:e.newMessage}),F)(e=>{const[t,a]=Object(n.useState)(!1),[o,i]=Object(n.useState)(0);Object(n.useEffect)(()=>{i(e.newMessage)},[e]);const r=()=>{a(!t)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{onClick:r,icon:s.a.createElement(d.k,null),value:0===o?void 0:o}),s.a.createElement(z.a,{isOpen:t,style:{overflowY:"hidden"},size:"xl",toggle:r},s.a.createElement(R.a,{toggle:r},s.a.createElement("h5",{className:"title"},"Chat")),s.a.createElement(P.a,null,s.a.createElement(Y.a,{layout:"modal",toggle:r}))))});var W=Object(o.b)(e=>({compare:e.compare}),null)((function(e){return s.a.createElement(m.a,{url:"/shop/compare",icon:s.a.createElement(d.n,null)})})),Q=a(43),Z=a(50);const H={cartRemoveItem:u.e,addMiniCart:h.a,closeNotif:Q.a};var G=Object(o.b)(e=>({cart:e.cart,miniCart:e.miniCart,customer:e.customer,openNotif:e.openNotif}),H)((function(e){var t,a;const{customer:o}=e,[r,u]=Object(n.useState)(()=>{const e=localStorage.getItem("notificationReminder");return e?JSON.parse(e):[]}),[p,h]=Object(n.useState)(()=>{const e=localStorage.getItem("notification");return e?JSON.parse(e):[]}),g=Object(x.g)(),[b,E]=Object(n.useState)(!0);let f;Object(n.useEffect)(()=>{"true"===localStorage.getItem("notifShownApi")||Promise.all([C.a.getNotification({page:1,limit:3,isNotifReminder:1},{},o.token),C.a.getNotification({page:1,limit:3,isNotifReminder:0},{},o.token)]).then(e=>{let[t,a]=e;200===t.status.code&&(console.log(t.data),u(t.data),localStorage.setItem("notificationReminder",JSON.stringify(t.data))),200===a.status.code&&(console.log(a.data),h(a.data),localStorage.setItem("notification",JSON.stringify(a.data))),localStorage.setItem("notifShownApi","true")})},[]);const N=()=>C.a.readAllNotification(o.token).then(e=>{200===e.status.code?(S.b.success("Semua notifikasi telah dibaca"),E(e=>!e)):S.b.error("Terjadi kesalaha pada sistem")}),v=async e=>{await C.a.readNotification({id:e.id},o.token),h(t=>{var a;const n=null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(t=>t.id===e.id?{...t,isRead:!0}:t),s={...t,items:n};return localStorage.setItem("notification",JSON.stringify(s)),s}),u(t=>{var a;const n=null===t||void 0===t||null===(a=t.items)||void 0===a?void 0:a.map(t=>t.id===e.id?{...t,isRead:!0}:t),s={...t,items:n};return localStorage.setItem("notificationReminder",JSON.stringify(s)),s}),Z.a.event({category:"School Notification",action:"Show Order Detail From Notification"}),g.push((e=>{switch(e.type){case"nego":return"/account/negotiation/"+e.linkRedirect;default:return"/account/orders/"+e.linkRedirect}})(e))};if((null===p||void 0===p||null===(t=p.items)||void 0===t?void 0:t.length)>0||(null===r||void 0===r||null===(a=r.items)||void 0===a?void 0:a.length)>0){var y,M;const e=null===p||void 0===p||null===(y=p.items)||void 0===y?void 0:y.map(e=>{let t;return e.icon&&(t=s.a.createElement("div",{className:"product-image dropcart__product-image d-flex justify-content-center align-items-center",style:{width:"45px",height:"50px"}},s.a.createElement("span",{onClick:()=>v(e),className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:e.icon,alt:"icon"})))),s.a.createElement("div",{key:e.id,onClick:()=>v(e),className:"dropcart__product my-1",style:e.isRead?{padding:"10px 0",cursor:"pointer"}:{background:"rgba(14, 51, 109, 0.11) none repeat scroll 0% 0%",padding:"10px 0",cursor:"pointer"}},t,s.a.createElement("div",{className:"dropcart__product-info"},s.a.createElement("div",{className:"dropcart__product-name d-flex justify-content-between flex-column",style:{fontSize:"12px",height:"100%"}},s.a.createElement("span",{className:"font-weight-bold mb-1",style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical"}},e.title),s.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text},style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical"}}))))}),t=null===r||void 0===r||null===(M=r.items)||void 0===M?void 0:M.map(e=>{let t;return e.icon&&(t=s.a.createElement("div",{className:"product-image dropcart__product-image d-flex justify-content-center align-items-center",style:{width:"45px",height:"50px"}},s.a.createElement("span",{onClick:()=>v(e),className:"product-image__body"},s.a.createElement("img",{className:"product-image__img",src:e.icon,alt:"icon"})))),s.a.createElement("div",{key:e.id,onClick:()=>v(e),className:"dropcart__product my-1",style:e.isRead?{padding:"10px 0",cursor:"pointer"}:{background:"rgba(14, 51, 109, 0.11) none repeat scroll 0% 0%",padding:"10px 0",cursor:"pointer"}},t,s.a.createElement("div",{className:"dropcart__product-info"},s.a.createElement("div",{className:"dropcart__product-name d-flex justify-content-between flex-column",style:{fontSize:"12px",height:"100%"}},s.a.createElement("span",{className:"font-weight-bold mb-1",style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical"}},e.title),s.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.text},style:{overflowY:"hidden",textOverflow:"ellipsis",width:"100%",overflowX:"hidden",display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical"}}),e.mustFollowUp&&s.a.createElement("small",{className:"text-primary d-block text-right"},"Tindaklanjuti ",s.a.createElement("i",{class:"fa fa-angle-right","aria-hidden":"true"})))))});f=s.a.createElement("div",{className:"dropcart",style:{overflowY:"auto",maxHeight:"400px"}},s.a.createElement("div",{style:{padding:"10px 0 0 10px"}},s.a.createElement("small",{className:"text-muted"},"Perlu Ditindaklajuti")),(null===t||void 0===t?void 0:t.length)>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"dropcart__products-list dropnotification__list mb-0"},t),s.a.createElement("div",{className:"d-flex justify-content-center py-1"},s.a.createElement(i.b,{className:"text-center d-inline-block",to:"/account/notification?isNotifReminder=1"},"Lihat Selengkapnya"))):s.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"),s.a.createElement("div",{style:{padding:"5px 10px",marginTop:"5px"},className:"d-flex justify-content-between align-items-center"},s.a.createElement("small",{className:"text-muted"},"Informasi untuk anda"),s.a.createElement(c.a,{action:N,render:e=>{let{run:t,loading:a}=e;return s.a.createElement("button",{style:{fontSize:"12px",padding:"5px",height:"calc(1.543rem + 2px)"},type:"button",onClick:t,className:l()("btn btn-primary btn-sm",{"btn-loading":a})},"Tandai sudah dibaca")}})),(null===e||void 0===e?void 0:e.length)>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"dropcart__products-list dropnotification__list"},e),s.a.createElement("div",{className:"d-flex justify-content-center pb-2"},s.a.createElement(i.b,{className:"text-center d-inline-block",to:"/account/notification?type=notif"},"Lihat Selengkapnya"))):s.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"))}else f=s.a.createElement("div",{className:"dropcart"},s.a.createElement("div",{className:"dropcart__empty"},"Tidak ada notifikasi"));return s.a.createElement(m.a,{url:"/account/notification",closeNotif:e.closeNotif,openNotif:e.openNotif,dropdown:f,value:(null===o||void 0===o?void 0:o.totalNotifReminder)||void 0,icon:s.a.createElement(d.s,{style:{width:"20px"}})})})),J=a(197);function X(e){const{layout:t}=e;let a=null,n=null;return"compact"===t&&(a=s.a.createElement("div",{className:"nav-panel__logo"},s.a.createElement(i.b,{to:"/"},s.a.createElement("img",{alt:"",src:"https://siplah.eurekabookhouse.co.id/assets/front/images/icons/ebhcom-header_new.png",style:{width:"100%"}})))),"default"===t&&(n=s.a.createElement("div",{className:"nav-panel__departments"},s.a.createElement(O,null))),s.a.createElement("div",{className:"nav-panel"},s.a.createElement("div",{className:"nav-panel__container container"},s.a.createElement("div",{className:"nav-panel__row"},a,n,s.a.createElement("div",{className:"nav-panel__indicators align-items-center justify-content-between"},s.a.createElement("div",{className:"site-header__search",style:{width:"100%",marginRight:"20px",flexGrow:0}},s.a.createElement(J.a,{context:"header"})),e.auth?s.a.createElement(s.a.Fragment,null,s.a.createElement(U,null),s.a.createElement(W,null),s.a.createElement(G,null),s.a.createElement(N,null),s.a.createElement(A,null),s.a.createElement("p",null,"test")):s.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},s.a.createElement(i.b,{to:"/login",style:{borderRadius:"10px",background:"rgb(255,98,33)",color:"white"},className:"btn mr-2"},"Login"),s.a.createElement("a",{style:{borderRadius:"10px",background:"#0A6BB2",color:"white"},className:"btn ",href:"https://siplah.eurekabookhouse.co.id/penyedia/register",target:"_blank",rel:"noopener noreferrer"},"Daftar"))))))}X.defaultProps={layout:"default"};t.default=Object(o.b)(e=>({auth:e.auth}),{})(X)}}]);
//# sourceMappingURL=18.cc597262.chunk.js.map